MemoryMatch=MemoryMatch||{},function(){"use strict";var a=function(a,b){this.setParameters(a,b),this.buildItem()},b=a.prototype;b.parentDisplayObject=null,b.groupDisplayObject=null,b.achievementId=null,b.x=0,b.y=0,b.width=-1,b.height=-1,b.marginTop=0,b.marginLeft=0,b.centerX=0,b.marginX=0,b.lineHeight=0,b.title=null,b.message=null,b.value=null,b.icon=null,b.sound=null,b.borderColor=MemoryMatch.GameSetup.achievementBorderColor,b.backgroundColor=MemoryMatch.GameSetup.achievementBackgroundColor,b.fontColorEarned=MemoryMatch.GameSetup.achievementFontColorEarned,b.fontColorUnearned=MemoryMatch.GameSetup.achievementFontColorUnearned,b.autoClose=!1,b.earned=!0,b.setParameters=function(a,b){var c;this.parentDisplayObject=a,null!==b&&(null!==b.achievementId&&(this.achievementId=b.achievementId,c=this.getAchievementInfo(this.achievementId),null!=c&&(this.title=c.name,this.message=c.description,this.icon=c.icon,this.value=c.value)),null!=b.width?this.width=b.width:this.width<1&&(this.width=920*MemoryMatch.stageScaleFactor|0),null!=b.height?this.height=b.height:this.height<1&&(this.height=290*MemoryMatch.stageScaleFactor|0),null!=b.x?this.x=b.x:this.x<1&&(this.x=.5*this.width|0),null!=b.y?this.y=b.y:this.y<1&&(this.y=this.parentDisplayObject.canvas.height-this.height),null!=b.title?this.title=b.title:null===this.title&&(this.title=""),null!=b.message?this.message=b.message:null===this.message&&(this.message=""),null!=b.value&&(this.value=b.value),null!=b.icon?this.icon=b.icon:null===this.icon&&(this.icon=null),null!=b.backgroundColor&&(this.backgroundColor=b.backgroundColor),null!=b.borderColor&&(this.borderColor=b.borderColor),null!=b.sound&&(this.sound=b.sound),null!=b.autoClose&&(this.autoClose=b.autoClose),null!=b.earned&&(this.earned=b.earned))},b.getAchievementInfo=function(a){return MemoryMatch.getAchievementInfo(a)},b.getBounds=function(){return this.groupDisplayObject.getBounds()},b.buildItem=function(){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.marginTop=8*MemoryMatch.stageScaleFactor|0,this.marginLeft=8*MemoryMatch.stageScaleFactor|0,this.drawBackground(),this.setupIcon(),this.setupTitleText(),this.setupDescriptionText(),this.setupValueText(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(this.x,this.y,1,1,0,0,0,.5*this.width|0,.5*this.height|0),this.groupDisplayObject.visible=!0,this.autoClose&&window.setTimeout(this.closeStartAnimation.bind(this),500))},b.drawBackground=function(){var a=new createjs.Shape;a.x=0,a.y=0;var b=a.graphics;return b.beginFill(this.backgroundColor),b.beginStroke(this.borderColor),b.setStrokeStyle(1),b.drawRoundRect(0,0,this.width,this.height,12),this.groupDisplayObject.addChild(a),this.groupDisplayObject.setBounds(0,0,this.width,this.height),a},b.setupIcon=function(){var a,b,c,d,e=1;null!=this.icon&&(b=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),c=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,this.icon),d=new createjs.Sprite(b,this.icon),d.setTransform(.005*this.width|0,.5*this.height|0,e,e,0,0,0,0,.5*c.height|0),d.framerate=1,d.name="icon",this.earned||(a=new createjs.ColorFilter(.3,.3,.3,1),d.filters=[a],d.cache(0,0,c.width,c.height)),this.groupDisplayObject.addChild(d))},b.setupTitleText=function(){var a;a=new createjs.Text(this.title,MemoryMatch.getScaledFontSize(42)+" "+MemoryMatch.GameSetup.guiBoldFontName,this.earned?this.fontColorEarned:this.fontColorUnearned),a.textAlign="center",a.x=.5*this.width|0,a.y=.1*this.height|0,a.lineWidth=.8*this.width|0,a.maxWidth=.8*this.width|0,a.name="title",this.groupDisplayObject.addChild(a)},b.setupDescriptionText=function(){var a,b;b=this.earned?this.message:"???",a=new createjs.Text(b,MemoryMatch.getScaledFontSize(40)+" "+MemoryMatch.GameSetup.guiMediumFontName,this.earned?this.fontColorEarned:this.fontColorUnearned),a.textAlign="left",a.x=.28*this.width|0,a.y=.36*this.height|0,a.lineWidth=.72*this.width|0,a.maxWidth=.72*this.width|0,a.lineHeight=1.2*a.getMeasuredLineHeight(),a.name="description",this.groupDisplayObject.addChild(a)},b.setupValueText=function(){var a;null!=this.value&&(a=new createjs.Text(this.value.toString(),MemoryMatch.getScaledFontSize(56)+" "+MemoryMatch.GameSetup.guiMediumFontName,this.earned?this.fontColorEarned:this.fontColorUnearned),a.textAlign="right",a.x=.96*this.width|0,a.y=.6*this.height|0,a.lineWidth=.8*this.width|0,a.maxWidth=.8*this.width|0,a.name="value",this.groupDisplayObject.addChild(a))},b.isShowing=function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},b.playSound=function(){null!=this.sound&&MemoryMatch.triggerSoundFx(this.sound,{delay:0})},b.closeStartAnimation=function(){var a=2.5,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,250,1e3*a,!0,null,this.closeComplete.bind(this));b.showAtBegin=!0,b.vAlpha=-1/(a*MemoryMatch.fps),b.endAlpha=0},b.closeComplete=function(){this.killObject()},b.killObject=function(){this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject=null,this.groupDisplayObject=null},MemoryMatch.AchievementItem=a}(),MemoryMatch=MemoryMatch||{},MemoryMatch.AnimationHandler={canvas:null,stage:null,imgSeq:null,spriteTemplateParticles:null,spriteTemplateStars:null,activeCardQueue:null,allParticles:null,isQuitPending:!1,maxWidth:0,maxHeight:0,fps:0,frameTime:0,init:function(a,b){var c,d={images:[MemoryMatch.assetLoader.getResult("particles")],frames:MemoryMatch.GameSetup.particleFrames};this.canvas=a,this.stage=b,this.fps=MemoryMatch.fps,this.frameTime=MemoryMatch.frameTime,this.imgSeq=new Image,this.spriteTemplateParticles=new createjs.Sprite(new createjs.SpriteSheet(d)),this.spriteTemplateStars=new createjs.Sprite(new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),"particleStar"),c=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,"particleStar"),this.spriteTemplateStars.regX=.5*c.width,this.spriteTemplateStars.regY=.5*c.height,this.allParticles=[],this.activeCardQueue=[],this.maxHeight=this.canvas.height,this.maxWidth=this.canvas.width},quitPending:function(a){this.isQuitPending=a},destroy:function(){this.clearAllParticles(),this.clearAllAnimations(),this.activeCardQueue=null,this.allParticles=null,this.spriteTemplateParticles=null,this.spriteTemplateStars=null,this.canvas=null,this.stage=null,this.imgSeq=null},queueSize:function(){return(null===this.activeCardQueue?0:this.activeCardQueue.length)+(null===this.allParticles?0:this.allParticles.length)},addToAnimationQueue:function(a,b,c,d,e,f){var g=null;if(null!=a)return null==b&&(b=0),null==d&&(d=!1),g={},g.actor=a,g.addTime=Date.now(),g.startTime=g.addTime+b,g.started=!1,g.markedForRemoval=!1,g.endTime=null!=c?0==c?0:g.startTime+c:0,g.removeFromStage=d,g.startFunction=e,g.endFunction=f,g.tag=0,this.activeCardQueue.push(g),g},updateAnimations:function(){var a,b,c,d=Date.now(),e=0,f=null,g=this.activeCardQueue.length;if(!this.isQuitPending){for(a=0;g>a;a++)f=this.activeCardQueue[a],d>=f.startTime&&(c=!1,f.started||(f.started=!0,c=!0,null!=f.showAtBegin&&(f.actor.visible=f.showAtBegin),null!=f.startFunction&&f.startFunction(f)),null!=f.vX&&0!=f.vX&&(c=!0,f.actor.x+=f.vX,null!=f.endX&&null!=f.vX&&0!=f.vX&&(f.vX>0&&f.actor.x>=f.endX?(f.actor.x=f.endX,f.vX=null,f.endX=null):f.vX<0&&f.actor.x<=f.endX&&(f.actor.x=f.endX,f.vX=null,f.endX=null))),null!=f.vY&&0!=f.vY&&(c=!0,f.actor.y+=f.vY,null!=f.endY&&null!=f.vY&&0!=f.vY&&(f.vY>0&&f.actor.y>=f.endY?(f.actor.y=f.endY,f.vY=null,f.endY=null):f.vY<0&&f.actor.y<=f.endY&&(f.actor.y=f.endY,f.vY=null,f.endY=null))),null!=f.vXScale&&0!=f.vXScale&&(c=!0,f.actor.scaleX+=f.vXScale,void 0!=f.endXScale&&(f.vXScale>0&&f.actor.scaleX>=f.endXScale?(f.actor.scaleX=f.endXScale,f.vXScale=null,f.endXScale=null):f.vXScale<0&&f.actor.scaleX<=f.endXScale&&(f.actor.scaleX=f.endXScale,f.vXScale=null,f.endXScale=null))),null!=f.vYScale&&0!=f.vYScale&&(c=!0,f.actor.scaleY+=f.vYScale,void 0!=f.endYScale&&(f.vYScale>0&&f.actor.scaleY>=f.endYScale?(f.actor.scaleY=f.endYScale,f.vYScale=null,f.endYScale=null):f.vYScale<0&&f.actor.scaleY<=f.endYScale&&(f.actor.scaleY=f.endYScale,f.vYScale=null,f.endYScale=null))),null!=f.vYSkew&&0!=f.vYSkew&&(c=!0,f.actor.skewY+=f.vYSkew,null!=f.endYSkew&&null!=f.vYSkew&&0!=f.vYSkew&&(f.vYSkew>0&&f.actor.skewY>=f.endYSkew||f.vYSkew<0&&f.actor.skewY<=f.endYSkew)&&(f.actor.skewY=f.endYSkew,f.vYSkew=null,f.endYSkew=null)),null!=f.vXSkew&&0!=f.vXSkew&&(c=!0,f.actor.skewX+=f.vXSkew,null!=f.endXSkew&&null!=f.vXSkew&&0!=f.vXSkew&&(f.vXSkew>0&&f.actor.skewX>=f.endXSkew||f.vXSkew<0&&f.actor.skewX<=f.endXSkew)&&(f.actor.skewX=f.endXSkew,f.vXSkew=null,f.endXSkew=null)),null!=f.vRotation&&0!=f.vRotation&&(c=!0,f.actor.rotation+=f.vRotation,null!=f.endRotation&&null!=f.vRotation&&0!=f.vRotation&&(f.vRotation>0&&f.actor.rotation>=f.endRotation||f.vRotation<0&&f.actor.rotation<=f.endRotation)&&(f.actor.rotation=f.endRotation,f.vRotation=null,f.endRotation=null)),null!=f.vAlpha&&0!=f.vAlpha&&(c=!0,f.actor.alpha+=f.vAlpha,null!=f.endAlpha&&null!=f.vAlpha&&0!=f.vAlpha&&(f.vAlpha>0&&f.actor.alpha>=f.endAlpha?(f.actor.alpha=f.endAlpha,f.vAlpha=null,f.endAlpha=null):f.vAlpha<0&&f.actor.alpha<=f.endAlpha&&(f.actor.alpha=f.endAlpha,f.vAlpha=null,f.endAlpha=null),null==f.endAlpha&&f.killOnAlphaZero&&(f.markedForRemoval=!0))),null!=f.tickFunction&&(c=!0,b=f.tickFunction(f),b||(f.markedForRemoval=!0)),(f.endTime>0&&f.endTime<=d||!c&&0==f.endTime)&&(f.markedForRemoval=!0),f.markedForRemoval&&(e++,null!=f.endFunction&&f.endFunction(f.actor),f.removeFromStage?null!=f.actor&&null!=f.actor.parent&&null!=f.actor.parent.removeChild&&f.actor.parent.removeChild(f.actor):null!=f.showAtEnd&&(f.actor.visible=f.showAtEnd)));if(e>0)for(a=this.activeCardQueue.length-1;a>=0;a--)f=this.activeCardQueue[a],f.markedForRemoval&&this.activeCardQueue.splice(a,1);c&&(MemoryMatch.stageUpdated=!0)}},updateParticles:function(a,b){var c,d,e=this.allParticles.length,f=!1;for(c=e-1;c>=0;c--)d=this.allParticles[c],d.applyGravity?d.vY+=.5:d.vY*=d.friction,d.vX*=d.friction,f=!0,d.x+=d.vX*b,d.y+=d.vY*b,d.alpha+=d.vA*b,d.scaleX+=d.vScale*b,d.scaleY+=d.vScale*b,d.rotation+=d.vRotation*b,(d.alpha<=0||d.y>=this.maxHeight&&d.vY<1)&&(this.allParticles.splice(c,1),this.stage.removeChild(d)),d.bounce?(d.y>this.maxHeight&&(d.vY*=-(.4*Math.random()+.4),d.y-=d.y%this.maxHeight),(d.x>=this.maxWidth||d.x<=0)&&(d.vX*=-1)):(d.y<0||d.y>this.maxHeight||d.x>=this.maxWidth||d.x<=0)&&(d.vA=0,d.alpha=0);f&&(MemoryMatch.stageUpdated=!0)},onEnterFrame:function(a,b){this.activeCardQueue.length>0&&this.updateAnimations(b),this.allParticles.length>0&&this.updateParticles(a,b)},startSparklerParticles:function(a,b,c){var d,e,f,g,h=0;if(!MemoryMatch.gamePaused){for(e=0;a>e;e++)g=this.spriteTemplateParticles.clone(),g.x=b,g.y=c,g.alpha=.5*Math.random()+.5,g.scaleX=g.scaleY=Math.random()+.5,g.vScale=.05,g.vRotation=10*Math.random()-5,g.compositeOperation="lighter",g.bounce=!1,g.applyGravity=!0,g.friction=.95,h=2*Math.PI*Math.random(),f=40/this.frameTime,d=(Math.random()-.5)*f,g.vX=Math.cos(h)*d,g.vY=Math.sin(h)*d,g.vA=(.05*-Math.random()-.01)/this.frameTime,0===g.vX&&(g.vX=.5),0===g.vY&&(g.vY=.5),0===g.vA&&(g.vA=-.5),g.gotoAndPlay(Math.random()*g.spriteSheet.getNumFrames()|0),this.stage.addChild(g),this.allParticles.push(g);MemoryMatch.stageUpdated=!0}},startSplatterParticles:function(a,b,c){var d,e,f,g,h;if(!MemoryMatch.gamePaused){for(g=0;a>g;g++)h=this.spriteTemplateParticles.clone(),h.x=b,h.y=c,h.alpha=.5*Math.random()+.5,h.scaleX=h.scaleY=Math.random()+.8,h.vScale=0,h.vRotation=(10*Math.random()-5)/this.frameTime,h.compositeOperation="lighter",h.bounce=!1,h.applyGravity=!1,h.friction=.89,d=2*Math.PI*Math.random(),e=40/this.frameTime,f=(Math.random()-.5)*e,h.vX=Math.cos(d)*f,h.vY=Math.sin(d)*f,h.vA=(.05*-Math.random()-.01)/this.frameTime,0===h.vX&&(h.vX=.5),0===h.vY&&(h.vY=.5),0===h.vA&&(h.vA=-.5),h.gotoAndPlay(Math.random()*h.spriteSheet.getNumFrames()|0),this.stage.addChild(h),this.allParticles.push(h);MemoryMatch.stageUpdated=!0}},startSplatterStars:function(a,b,c){var d,e,f,g,h;if(!MemoryMatch.gamePaused){for(g=0;a>g;g++)h=this.spriteTemplateStars.clone(),h.framerate=0,h.x=b,h.y=c,h.alpha=.5*Math.random()+.5,h.scaleX=h.scaleY=Math.random()+.8,h.vScale=0,h.vRotation=(30*Math.random()-15)/this.frameTime,h.compositeOperation="lighter",h.bounce=!1,h.applyGravity=!1,h.friction=.89,d=2*Math.PI*Math.random(),e=80/this.frameTime,f=(Math.random()-.5)*e,h.vX=Math.cos(d)*f,h.vY=Math.sin(d)*f,h.vA=(.05*-Math.random()-.01)/this.frameTime,0===h.vX&&(h.vX=.5),0===h.vY&&(h.vY=.5),0===h.vA&&(h.vA=-.5),h.gotoAndStop("particleStar"),this.stage.addChild(h),this.allParticles.push(h);MemoryMatch.stageUpdated=!0}},startBurstParticles:function(a,b,c){var d,e,f,g,h=360/a*(Math.PI/180),i=0;if(!MemoryMatch.gamePaused){for(f=0;a>f;f++)g=this.spriteTemplateParticles.clone(),g.x=b,g.y=c,g.alpha=.5*Math.random()+.5,g.scaleX=g.scaleY=Math.random()+.9,g.vScale=.02/this.frameTime,g.vRotation=(10*Math.random()-5)/this.frameTime,g.compositeOperation="lighter",g.bounce=!1,g.applyGravity=!0,g.friction=.89,i+=h,d=20/this.frameTime,e=(.8+.2*Math.random())*d,g.vX=Math.cos(i)*e,g.vY=Math.sin(i)*e,g.vA=-.01/this.frameTime,0===g.vX&&(g.vX=.5),0===g.vY&&(g.vY=.5),0===g.vA&&(g.vA=-.5),g.gotoAndPlay(Math.random()*g.spriteSheet.getNumFrames()|0),this.stage.addChild(g),this.allParticles.push(g);MemoryMatch.stageUpdated=!0}},removeActor:function(a){var b,c=0,d=null;for(b=0;b<this.activeCardQueue.length;b++)d=this.activeCardQueue[b],d.actor==a&&(d.markedForRemoval=!0,c++);if(c>0)for(b=this.activeCardQueue.length-1;b>=0;b--)d=this.activeCardQueue[b],d.markedForRemoval&&this.activeCardQueue.splice(b,1)},removeWithTag:function(a){var b,c=0,d=null;for(b=0;b<this.activeCardQueue.length;b++)d=this.activeCardQueue[b],MemoryMatch.debugLog("removeWithTag Actor "+b+"; "+d.actor.name),d.tag==a&&(d.markedForRemoval=!0,null!=d.actor&&null!=d.actor.parent&&null!=d.actor.parent.removeChild&&d.actor.parent.removeChild(d.actor),c++);if(c>0)for(b=this.activeCardQueue.length-1;b>=0;b--)d=this.activeCardQueue[b],d.markedForRemoval&&this.activeCardQueue.splice(b,1)},clearAll:function(){this.clearAllAnimations(),this.clearAllParticles()},clearAllAnimations:function(){var a,b,c=this.activeCardQueue.length;for(a=c-1;a>0;a--)b=this.activeCardQueue[a].actor,this.stage.removeChild(b);this.activeCardQueue=[],MemoryMatch.stageUpdated=!0},clearAllParticles:function(){var a,b,c=this.allParticles.length;for(a=c-1;a>0;a--)b=this.allParticles[a],b.vY=0,b.vX=0,b.vA=0,b.vScale=0,b.vRotation=0,b.y=-100,b.alpha=0,this.stage.removeChild(b);this.allParticles=[],MemoryMatch.stageUpdated=!0}},MemoryMatch=MemoryMatch||{},MemoryMatch.AwardsPopup={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,contentDisplayObject:null,closeButtonInstance:null,backgroundWidth:0,backgroundHeight:0,backgroundCover:null,marginTop:0,marginLeft:0,lineHeight:0,isEnabled:!1,animate:!1,title:null,message:null,closeButton:!0,continueButton:!1,stateCompleteCallback:null,startYAchievements:0,scrollMask:null,scrollOffset:null,scrollLimitMin:0,scrollLimitMax:0,scrollButtonSprite:null,scrollButtonOffset:null,scrollButtonMin:0,scrollButtonMax:0,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,setup:function(a,b){this.parentDisplayObject=a,this.stateCompleteCallback=b},buildScreen:function(a,b){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.setColorFilters(),this.setupBackground(),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.06*this.backgroundWidth,this.contentDisplayObject=new createjs.Container,this.setupMask(),this.setupTitleText(),this.startYAchievements=Math.floor(.12*this.backgroundHeight),this.startYAchievements+=this.setupAward(.5,this.startYAchievements),this.setupInfoText(),this.setupAchievements(),this.setupButtons(),this.setupScrollBar(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.contentDisplayObject.setTransform(this.backgroundWidth*-.028,.05*this.backgroundHeight),this.groupDisplayObject.addChild(this.contentDisplayObject),this.scrollLimitMin=this.contentDisplayObject.y,null===a&&(a=!1),null===b&&(b=!0),this.animate=b,a&&this.start())},start:function(){var a,b;this.animate?(this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,0,0,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationPhaseTwo.bind(this)),b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)):(this.isEnabled=!0,this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight))},startAnimationPhaseTwo:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationComplete.bind(this));b.endYScale=b.endXScale=1,b.vYScale=b.vXScale=-1*(b.endXScale/(a*MemoryMatch.fps))},startAnimationComplete:function(){this.isEnabled=!0},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){this.killScreen()},closePopup:function(a){this.isEnabled=!1,null!=this.stateCompleteCallback&&this.stateCompleteCallback(a),this.closeStartAnimation()},onClickClose:function(){this.isEnabled&&(MemoryMatch.triggerSoundFx("soundTap"),this.closePopup("close"))},onClickContinue:function(){this.isEnabled&&(MemoryMatch.triggerSoundFx("soundTap"),this.closePopup("continue"))},onClickBackground:function(){},onScrollMouseDownHandler:function(a){this.scrollOffset={x:this.contentDisplayObject.x,y:this.contentDisplayObject.y-a.stageY}},onScrollPressMoveHandler:function(a){var b=a.stageY+this.scrollOffset.y;b>this.scrollLimitMin?b=this.scrollLimitMin:b<this.scrollLimitMax&&(b=this.scrollLimitMax),this.contentDisplayObject.y=b,this.scrollButtonSprite.y=this.scrollButtonMin+(b-this.scrollLimitMin)/(this.scrollLimitMax-this.scrollLimitMin)*(this.scrollButtonMax-this.scrollButtonMin),MemoryMatch.stageUpdated=!0},onScrollHandleDown:function(a){this.scrollButtonOffset={x:this.scrollButtonSprite.x,y:this.scrollButtonSprite.y-a.stageY}},onScrollHandlePressMove:function(a){var b,c=a.stageY+this.scrollButtonOffset.y;c<this.scrollButtonMin?c=this.scrollButtonMin:c>this.scrollButtonMax&&(c=this.scrollButtonMax),this.scrollButtonSprite.y=c,b=(c-this.scrollButtonMin)/(this.scrollButtonMax-this.scrollButtonMin),this.contentDisplayObject.y=this.scrollLimitMin+(this.scrollLimitMax-this.scrollLimitMin)*b,MemoryMatch.stageUpdated=!0},setupBackground:function(){var a,b,c,d=this.parentDisplayObject.canvas,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);a=e.width>d.width?d.width/e.width:1,b=e.height>d.height?d.height/e.height:1,f.alpha=1,f.scaleX=a,f.scaleY=b,c=new createjs.Shape,c.graphics.beginFill("#CCCCCC").drawRect(0,0,d.width,d.height),c.alpha=.1,c.addEventListener("click",this.onClickBackground),this.backgroundCover=c,this.parentDisplayObject.addChild(c),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*a,this.backgroundHeight=e.height*b,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupMask:function(){var a=this.groupDisplayObject.addChild(new createjs.Shape),b=3*this.marginTop,c=this.backgroundHeight-4*this.marginTop;a.graphics.beginFill("#521852").drawRoundRect(this.marginLeft,b,this.backgroundWidth-2.5*this.marginLeft,c,8),a.alpha=.3333,a.visible=!0,a.on("mousedown",this.onScrollMouseDownHandler.bind(this)),a.on("pressmove",this.onScrollPressMoveHandler.bind(this)),this.scrollMask=a,this.contentDisplayObject.mask=a,this.scrollLimitMax=c-b},setupScrollBar:function(){var a,b,c,d,e,f,g=MemoryMatch.GameSetup.guiSpritesheet1Frames,h="awardsHandle",i="awardsSlider",j=new createjs.SpriteSheet(g);e=this.marginLeft+this.backgroundWidth-2.3*this.marginLeft,f=3*this.marginTop,a=new createjs.Sprite(j,i),c=MemoryMatch.getSpriteFrameSize(g,i),a.setTransform(e,f),this.groupDisplayObject.addChild(a),b=new createjs.Sprite(j,h),d=MemoryMatch.getSpriteFrameSize(g,h),b.setTransform(e-.5*(d.width-c.width),f),b.cursor="pointer",b.on("mousedown",this.onScrollHandleDown.bind(this)),b.on("pressmove",this.onScrollHandlePressMove.bind(this)),this.groupDisplayObject.addChild(b),this.scrollButtonSprite=b,this.scrollButtonMin=f,this.scrollButtonMax=f+c.height-d.height},setupTitleText:function(){var a;a=new createjs.Text("Your Awards & Stats",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=.8*this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},setupInfoText:function(){var a,b,c,d=MemoryMatch.UserData.getUserDataObject(),e=.12*this.backgroundWidth,f=.49*this.backgroundWidth,g=.2*this.backgroundWidth,h=MemoryMatch.getScaledFontSize(52)+" "+MemoryMatch.GameSetup.guiBoldFontName,i=MemoryMatch.GameSetup.guiFontColor,j=54*MemoryMatch.stageScaleFactor,k=0|d.numberOfGamesPlayed,l=0|d.totalMatchCount,m=0|d.totalCombos,n=0|d.totalTimePlayed,o=0|d.luckyGuessCount,p=0|d.bestScore;c=0==n?"-":n>=36e5?MemoryMatch.formatTimeAsString(n,!0,!0):MemoryMatch.formatTimeAsString(n,!0,!1),b=this.startYAchievements,a=new createjs.Text("Games:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(k.toString(),h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),b+=j,a=new createjs.Text("Matches:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(l.toString(),h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),b+=j,a=new createjs.Text("Best Score:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(MemoryMatch.formatNumberWithGroups(p),h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),e=.55*this.backgroundWidth,f=.88*this.backgroundWidth,b=this.startYAchievements,a=new createjs.Text("Combos:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(m.toString(),h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),b+=j,a=new createjs.Text("Time:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(c,h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),b+=j,a=new createjs.Text("Lucky Guesses:",h,i),a.textAlign="left",a.x=e,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),a=new createjs.Text(o.toString(),h,i),a.textAlign="right",a.x=f,a.y=b,a.maxWidth=g,this.contentDisplayObject.addChild(a),this.startYAchievements=b+1.5*j},setupAward:function(a,b){var c,d,e,f,g,h,i,j=new createjs.Container,k="mapTrophy",l=MemoryMatch.GameSetup.mapSpritesheetFrames,m=new createjs.SpriteSheet(l),n=new createjs.Sprite(m,k),o=MemoryMatch.getSpriteFrameSize(l,k),p=MemoryMatch.GameSetup.levels.length;for(n.setTransform(.5*o.width,.5*o.height,1,1,0,0,0,.5*o.width,.5*o.height),n.framerate=0,j.addChild(n),j.setBounds(0,0,o.width,o.height),k="mapAwardEmpty",d=null!=l.animations[k]?new createjs.Sprite(m,k):null,k="mapAwardLand",e={x:0,y:0},f=0;p>f;f++)g=MemoryMatch.GameSetup.levels[f].gemPosition,i=f+1,null!=d&&(c=f>0?d.clone():d,c.setTransform(e.x+g.x*MemoryMatch.stageScaleFactor|0,e.y+g.y*MemoryMatch.stageScaleFactor|0),j.addChild(c)),h=k+i.toString(),n=new createjs.Sprite(m,h),n.setTransform(e.x+g.x*MemoryMatch.stageScaleFactor,e.y+g.y*MemoryMatch.stageScaleFactor,1,1),n.name=h,n.visible=MemoryMatch.didUserBeatChallenge(i),j.addChild(n);return this.contentDisplayObject.addChild(j),j.setTransform(.5*(this.backgroundWidth-o.width*a),b,a,a,0,0,0,0,0),b+o.height*a*.5},setupAchievements:function(){var a,b=MemoryMatch.GameSetup.achievements,c=null,d=null,e=!1,f=.41*this.backgroundWidth,g=.33*f,h=.01*f,i=this.startYAchievements+.5*g,j=.51*(this.backgroundWidth-f),k=j+h;for(a=0;a<b.length;a++)c=b[a],e=MemoryMatch.didUserEarnAchievement(c.id),d=new MemoryMatch.AchievementItem(this.contentDisplayObject,{achievementId:c.id,x:k,y:i,width:f,height:g,autoClose:!1,icon:"metal",earned:e,callback:null}),a%2==0?k=j+d.getBounds().width+h+h:(i+=d.getBounds().height+h,k=j+h);this.scrollLimitMax=this.scrollLimitMax-d.y},setupButtons:function(){var a,b,c=1;a=MemoryMatch.GUIButton({name:"close",tag:1,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),b=a.getSize(),a.setTransform(.94*this.backgroundWidth-b.width,.03*this.backgroundHeight,c,c),this.groupDisplayObject.addChild(a),this.closeButtonInstance=a},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){this.primaryColorFilter=null,this.secondaryColorFilter=null,this.scrollButtonSprite.removeAllEventListeners(),this.scrollButtonSprite=null,this.closeButtonInstance.removeAllEventListeners(),this.closeButtonInstance=null,this.scrollMask.removeAllEventListeners(),this.scrollMask=null,this.groupDisplayObject.removeChild(this.contentDisplayObject),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.stateCompleteCallback=null,this.contentDisplayObject=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.ChallengeIntroduction={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,marginTop:0,marginLeft:0,lineHeight:0,isEnabled:!1,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,setup:function(a,b){this.stateCompleteCallback=b,this.parentDisplayObject=a,this.buttonInstances=[]},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.parentDisplayObject.addChild(this.groupDisplayObject),this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleAndMessageText(),this.setupAward(),this.setupButtons(),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width-.5*this.backgroundWidth,.5*this.parentDisplayObject.canvas.height-.5*this.backgroundHeight,1,1),null===a&&(a=!1),a&&this.start())},start:function(){this.isEnabled=!0,MemoryMatch.stopBackgroundMusic(),MemoryMatch.playInterstitialMusic("soundChallenge",!0)},resumeFromPause:function(){MemoryMatch.playInterstitialMusic("soundChallenge",!0)},closePopup:function(a){this.isEnabled=!1,MemoryMatch.stopInterstitialMusic(),null!==MemoryMatch.ChallengeIntroduction.stateCompleteCallback&&MemoryMatch.ChallengeIntroduction.stateCompleteCallback(a),MemoryMatch.ChallengeIntroduction.killScreen()},onClickHome:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.ChallengeIntroduction.isEnabled&&MemoryMatch.ChallengeIntroduction.closePopup("home")},onClickContinue:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.ChallengeIntroduction.isEnabled&&MemoryMatch.ChallengeIntroduction.closePopup("continue")},onClickBackground:function(){},showBackgroundImage:function(a){var b,c,d,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);b=e.width>a.width?a.width/e.width:1,c=e.height>a.height?a.height/e.height:1,f.alpha=1,f.scaleX=b,f.scaleY=c,d=new createjs.Shape,d.graphics.beginFill("#CCCCCC").drawRect((a.width-e.width)*-.5,(a.height-e.height)*-.5,a.width,a.height),d.alpha=.1,d.addEventListener("click",this.onClickBackground),this.groupDisplayObject.addChild(d),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*b,this.backgroundHeight=e.height*c,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupTitleAndMessageText:function(){var a,b,c=MemoryMatch.getGameData(!0);a=new createjs.Text("Challenge Game",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a),b=a.y+a.getMeasuredHeight(),a=new createjs.Text(c.levelIntro,MemoryMatch.getScaledFontSize(52)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=b,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=1.5*a.getMeasuredLineHeight(),this.groupDisplayObject.addChild(a)},setupButtons:function(){var a,b="gameOverButtonBase",c=1,d=MemoryMatch.getSpriteFrameWidth(MemoryMatch.GameSetup.guiSpritesheet1Frames,b)*c,e=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,f=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor,g=0,h=0,i=2*(d+g)-g,j=.5*(this.backgroundWidth-i),k=.75*this.backgroundHeight;a=MemoryMatch.GUIButton({name:"home",tag:++h,disabled:!1,callback:this.onClickHome.bind(this),baseUp:b,buttonBaseColor:e,buttonBaseRollOverColor:f,iconUp:"gameOverMenuIcon",iconOver:"gameOverMenuDownIcon",iconDown:"gameOverMenuDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),j+=d+g,a=MemoryMatch.GUIButton({name:"continue",tag:++h,disabled:!1,callback:this.onClickContinue.bind(this),baseUp:b,buttonBaseColor:e,buttonBaseRollOverColor:f,iconUp:"gameOverNextIcon",iconOver:"gameOverNextDownIcon",iconDown:"gameOverNextDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a)},setupAward:function(){var a,b,c,d,e,f,g,h="mapTrophy",i=MemoryMatch.GameSetup.mapSpritesheetFrames,j=new createjs.SpriteSheet(i),k=new createjs.Sprite(j,h),l=MemoryMatch.getSpriteFrameSize(i,h),m=new createjs.Container,n=.8,o=MemoryMatch.GameSetup.levels.length;for(k.framerate=0,c={x:.5*this.backgroundWidth,y:.5*this.backgroundHeight},m.setTransform(c.x,c.y,n,n,0,0,0,.5*l.width,.5*l.height),m.addChild(k),h="mapAwardEmpty",b=null!=i.animations[h]?new createjs.Sprite(j,h):null,h="mapAwardLand",c.x-=.5*l.width,c.y-=.5*l.height,d=0;o>d;d++)g=d+1,e=MemoryMatch.GameSetup.levels[d].gemPosition,null!=b&&(a=d>0?b.clone():b,a.setTransform(e.x*MemoryMatch.stageScaleFactor,e.y*MemoryMatch.stageScaleFactor),m.addChild(a)),f=h+g.toString(),k=new createjs.Sprite(j,f),k.setTransform(e.x*MemoryMatch.stageScaleFactor,e.y*MemoryMatch.stageScaleFactor),k.name=f,k.visible=MemoryMatch.didUserBeatChallenge(g),m.addChild(k);
this.groupDisplayObject.addChild(m)},showAwardedGems:function(){var a,b,c,d="mapAwardLand",e=MemoryMatch.GameSetup.levels.length;for(c=0;e>c;c++)a=c+1,d="mapAwardLand"+a.toString(),b=this.groupDisplayObject.getChildByName(d),null!=b&&(b.visible=MemoryMatch.didUserBeatChallenge(a))},isShowing:function(){return null!=this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a;for(this.primaryColorFilter=null,this.secondaryColorFilter=null,a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].removeAllEventListeners();this.buttonInstances=null,this.parentDisplayObject.removeChild(this.groupDisplayObject),this.stateCompleteCallback=null,this.levelData=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.CreditsPopup={parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,backgroundCover:null,marginTop:0,marginLeft:0,lineHeight:0,isEnabled:!1,title:null,closeButton:!0,stateCompleteCallback:null,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,setup:function(a,b){this.parentDisplayObject=a,this.buttonInstances=[],this.stateCompleteCallback=b},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleText(),this.setupCopyrightText(),this.showCredits(),this.setupButtons(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),null===a&&(a=!1),a&&this.start())},start:function(){this.isEnabled=!0},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){this.killScreen()},closePopup:function(){this.isEnabled=!1,null!==this.stateCompleteCallback&&this.stateCompleteCallback("close"),this.closeStartAnimation()},onClickClose:function(){this.isEnabled&&this.closePopup("close")},onClickBackground:function(){},showBackgroundImage:function(a){var b,c,d,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);b=e.width>a.width?a.width/e.width:1,c=e.height>a.height?a.height/e.height:1,f.alpha=1,f.scaleX=b,f.scaleY=c,d=new createjs.Shape,d.graphics.beginFill("#CCCCCC").drawRect(0,0,a.width,a.height),d.alpha=.1,d.addEventListener("click",this.onClickBackground),this.backgroundCover=d,this.parentDisplayObject.addChild(d),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*b,this.backgroundHeight=e.height*c,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupTitleText:function(){var a;a=new createjs.Text("Credits",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},showCredits:function(){var a,b=MemoryMatch.GameSetup.GUIStrings.creditsInfo,c=MemoryMatch.GameSetup.GUIStrings.creditsCredit;a=new createjs.Text(b,MemoryMatch.getScaledFontSize(52)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="left",a.x=this.marginLeft,a.y=.18*this.backgroundHeight,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=1.5*a.getMeasuredLineHeight(),this.groupDisplayObject.addChild(a),a=new createjs.Text(c,MemoryMatch.getScaledFontSize(44)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=.32*this.backgroundHeight,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=a.getMeasuredLineHeight(),this.groupDisplayObject.addChild(a);var d=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet2Frames),e=new createjs.Sprite(d,"JumpyDotLogo");e.setTransform(.15*this.backgroundWidth,.74*this.backgroundHeight),e.framerate=1,this.groupDisplayObject.addChild(e),e=new createjs.Sprite(d,"html5-logo"),e.setTransform(.8*this.backgroundWidth,.73*this.backgroundHeight),e.framerate=1,this.groupDisplayObject.addChild(e)},setupCopyrightText:function(){var a="Copyright 2014 JumpyDot. All rights reserved.",b=new createjs.Text(a,MemoryMatch.getScaledFontSize(36)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiInfoColor);b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=.92*this.backgroundHeight,b.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(b)},setupButtons:function(){var a,b,c=(new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),1);a=MemoryMatch.GUIButton({name:"close",tag:1,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),b=a.getSize(),a.setTransform(.94*this.backgroundWidth-b.width,.05*this.backgroundHeight,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a)},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a;if(this.primaryColorFilter=null,this.secondaryColorFilter=null,null!==this.buttonInstances){for(a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].removeAllEventListeners();this.buttonInstances=null}this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.GameComplete={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,marginTop:0,marginLeft:0,isEnabled:!1,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,setup:function(a,b){this.stateCompleteCallback=b,this.parentDisplayObject=a,this.buttonInstances=[]},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.parentDisplayObject.addChild(this.groupDisplayObject),this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleAndMessageText(),this.setupAward(),this.setupButtons(),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width-.5*this.backgroundWidth,.5*this.parentDisplayObject.canvas.height-.5*this.backgroundHeight,1,1),null===a&&(a=!1),a&&this.start())},start:function(){this.isEnabled=!0,MemoryMatch.stopBackgroundMusic(),MemoryMatch.playInterstitialMusic("soundWin",!1)},closePopup:function(a){this.isEnabled=!1,null!==MemoryMatch.GameComplete.stateCompleteCallback&&MemoryMatch.GameComplete.stateCompleteCallback(a),MemoryMatch.stopInterstitialMusic(),MemoryMatch.GameComplete.killScreen()},onClickHome:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.GameComplete.isEnabled&&MemoryMatch.GameComplete.closePopup("home")},onClickStats:function(){MemoryMatch.GameComplete.isEnabled&&(MemoryMatch.AwardsPopup.setup(MemoryMatch.stage,null),MemoryMatch.AwardsPopup.buildScreen(!0,!0))},onClickShare:function(){var a,b;MemoryMatch.GameComplete.isEnabled&&(a=MemoryMatch.tokenReplace(MemoryMatch.GameSetup.GUIStrings.shareGameOverMessage,{gamename:MemoryMatch.GameSetup.gameTitle,score:MemoryMatch.totalScore}),b=MemoryMatch.tokenReplace(MemoryMatch.GameSetup.GUIStrings.shareGameOverShortMessage,{gamename:MemoryMatch.GameSetup.gameTitle,score:MemoryMatch.totalScore}),MemoryMatch.showSharePopup(a,b))},onClickBackground:function(){},showBackgroundImage:function(a){var b,c,d,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);b=e.width>a.width?a.width/e.width:1,c=e.height>a.height?a.height/e.height:1,f.alpha=1,f.scaleX=b,f.scaleY=c,d=new createjs.Shape,d.graphics.beginFill("#CCCCCC").drawRect((a.width-e.width)*-.5,(a.height-e.height)*-.5,a.width,a.height),d.alpha=.1,d.addEventListener("click",this.onClickBackground),this.groupDisplayObject.addChild(d),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*b,this.backgroundHeight=e.height*c,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupTitleAndMessageText:function(){var a,b,c,d,e;c=MemoryMatch.GameSetup.winState.title,d=MemoryMatch.GameSetup.winState.subtitle,e=MemoryMatch.GameSetup.winState.info,a=new createjs.Text(c,MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a),b=a.y+a.getMeasuredHeight(),a=new createjs.Text(d,MemoryMatch.getScaledFontSize(48)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=b,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=1.5*a.getMeasuredLineHeight(),a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a),b+=a.getMeasuredHeight()+42*MemoryMatch.stageScaleFactor,a=new createjs.Text(e,MemoryMatch.getScaledFontSize(38)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=b,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=1.5*a.getMeasuredLineHeight(),a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},setupButtons:function(){var a,b="gameOverButtonBase",c=1,d=MemoryMatch.getSpriteFrameWidth(MemoryMatch.GameSetup.guiSpritesheet1Frames,b)*c,e=42*MemoryMatch.stageScaleFactor,f=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,g=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor,h=0,i=3,j=.5*(this.backgroundWidth-(d*i+e*(i-1))),k=.75*this.backgroundHeight;a=MemoryMatch.GUIButton({name:"home",tag:++h,disabled:!1,callback:this.onClickHome.bind(this),baseUp:b,buttonBaseColor:f,buttonBaseRollOverColor:g,iconUp:"gameOverMenuIcon",iconOver:"gameOverMenuDownIcon",iconDown:"gameOverMenuDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),j+=d+e,a=MemoryMatch.GUIButton({name:"stats",tag:++h,disabled:!1,callback:this.onClickStats.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:f,buttonBaseRollOverColor:g,iconUp:"gameOverStatsIcon",iconOver:"gameOverStatsDownIcon",iconDown:"gameOverStatsDownIcon"}),a.setTransform(j,k,c,c),a.refreshParent=this,this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),j+=d+e,a=MemoryMatch.GUIButton({name:"share",tag:++h,disabled:!1,callback:this.onClickShare.bind(this),baseUp:b,buttonBaseColor:f,buttonBaseRollOverColor:g,iconUp:"gameOverShareIcon",iconOver:"gameOverShareDownIcon",iconDown:"gameOverShareDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a)},setupAward:function(){var a,b,c,d,e,f="mapTrophy",g=MemoryMatch.GameSetup.mapSpritesheetFrames,h=new createjs.SpriteSheet(g),i=new createjs.Sprite(h,f),j=MemoryMatch.getSpriteFrameSize(g,f),k=MemoryMatch.GameSetup.levels.length;for(a={x:.5*this.backgroundWidth,y:.54*this.backgroundHeight},i.setTransform(a.x,a.y,1,1,0,0,0,.5*j.width,.5*j.height),i.framerate=0,this.groupDisplayObject.addChild(i),f="mapAwardLand",a.x-=.5*j.width,a.y-=.5*j.height,b=0;k>b;b++)e=b+1,d=f+e.toString(),i=new createjs.Sprite(h,d),c=MemoryMatch.GameSetup.levels[b].gemPosition,i.setTransform(a.x+c.x*MemoryMatch.stageScaleFactor,a.y+c.y*MemoryMatch.stageScaleFactor),i.name=d,i.visible=MemoryMatch.didUserBeatChallenge(e),this.groupDisplayObject.addChild(i)},showAwardedGems:function(){var a,b,c,d="mapAwardLand",e=MemoryMatch.GameSetup.levels.length;for(c=0;e>c;c++)a=c+1,d="mapAwardLand"+a.toString(),b=this.groupDisplayObject.getChildByName(d),null!=b&&(b.visible=MemoryMatch.didUserBeatChallenge(a))},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a;for(this.primaryColorFilter=null,this.secondaryColorFilter=null,a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].removeAllEventListeners();this.buttonInstances=null,this.parentDisplayObject.removeChild(this.groupDisplayObject),this.stateCompleteCallback=null,this.levelData=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.GameGUI={groupDisplayObject:null,parentDisplayObject:null,width:0,height:0,hudHeight:0,spriteData:null,headerSprite:null,levelNumber:1,levelField:null,levelIcon:null,scoreField:null,matchCountLabel:null,matchCountField:null,gameTimerField:null,messageField:null,timerCountdownGroup:null,timerCountdownTimer:null,comboMultiplierSprite:null,matchCountFieldFlash:!1,matchCountFieldFlashCount:0,matchCountFlashTimer:null,optionsButton:null,gameOptionsButton:null,isAnimating:!1,flashThreshold:2,comboMultiplier:1,timerCountdownStarted:!1,lastUpdateTime:0,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,showingGameLevel:0,build:function(a){this.parentDisplayObject=a,null!=this.parentDisplayObject&&(this.width=MemoryMatch.stageWidth,this.height=MemoryMatch.stageHeight,this.groupDisplayObject=new createjs.Container,this.showingGameLevel=MemoryMatch.gameLevel,null==this.spriteData&&(this.spriteData=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames)),this.setColorFilters(),this.setupHeader(),this.setupOptionsButton(),this.setupGameOptionsButton(),this.setupScoreTextField(),this.setupLevelTextField(),this.setupMatchCountTextField(),this.setupGameTimerTextField(),this.setupMessageTextField(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(0,-1*this.hudHeight,1,1))},destroy:function(){null!=this.matchCountFlashTimer&&(window.clearTimeout(this.matchCountFlashTimer),this.matchCountFlashTimer=null),null!=this.timerCountdownTimer&&(window.clearTimeout(this.timerCountdownTimer),this.timerCountdownTimer=null),this.parentDisplayObject.removeChild(this.optionsButton),null!=this.timerCountdownGroup&&(this.parentDisplayObject.removeChild(this.timerCountdownGroup),this.timerCountdownGroup=null),this.spriteData=null,this.headerSprite=null,this.levelField=null,this.levelIcon=null,this.scoreField=null,this.matchCountLabel=null,this.matchCountField=null,this.gameTimerField=null,this.messageField=null,this.optionsButton=null,this.gameOptionsButton=null,this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.groupDisplayObject=null,this.parentDisplayObject=null,this.primaryColorFilter=null,this.secondaryColorFilter=null,this.isAnimating=!1},pause:function(){this.hideTimerCountdown()},resume:function(){},show:function(a){var b,c,d,e;null!=this.groupDisplayObject&&(a?(this.showingGameLevel!=MemoryMatch.gameLevel&&(this.setColorFilters(),this.showingGameLevel=MemoryMatch.gameLevel),b=0,e=0-this.groupDisplayObject.y,this.optionsButton.visible=!1):(b=-1*this.hudHeight,e=b-this.groupDisplayObject.y,this.matchCountFieldFlash=!1,this.comboMultiplierSprite.visible=!1,this.hideTimerCountdown(),this.optionsButton.visible=!0),b==this.groupDisplayObject.y||this.isAnimating||(this.messageField.visible=!1,this.isAnimating=!0,d=.2,c=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,0,!1,null,this.showAnimationComplete.bind(this)),c.vY=e/(d*MemoryMatch.fps),c.endY=b,MemoryMatch.stageUpdated=!0))},showAnimationComplete:function(){var a=this.groupDisplayObject.y>=0;this.messageField.visible=a,this.comboMultiplierSprite.visible=a,this.isAnimating=!1,MemoryMatch.stageUpdated=!0},setMessage:function(a){this.messageField.text=a,MemoryMatch.stageUpdated=!0},getHeight:function(){return this.hudHeight},updateLevelDisplay:function(a,b){var c;1>a?a=1:a>MemoryMatch.GameSetup.levels.length&&(a=MemoryMatch.GameSetup.levels.length),c=MemoryMatch.isChallengeGame?MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].gameCount+1+MemoryMatch.getGameLevelNumberOffset(MemoryMatch.gameLevel):b+MemoryMatch.getGameLevelNumberOffset(MemoryMatch.gameLevel),this.levelNumber=a,this.levelIcon.gotoAndStop(MemoryMatch.GameSetup.levels[a-1].iconHUD),this.levelField.text=c.toString(),MemoryMatch.stageUpdated=!0},updateScoreDisplay:function(a){(null==a||""==a)&&(a=0),this.scoreField.text=a>0?MemoryMatch.formatNumberWithGroups(a):"0",MemoryMatch.stageUpdated=!0},updateMatchCountDisplay:function(a){var b=this.matchCountField.text!=Number(a).toString();this.matchCountField.text=Number(a).toString(),!MemoryMatch.isChallengeGame&&a<=this.flashThreshold?(this.matchCountField.color=MemoryMatch.GameSetup.guiAlertFontColor,b&&MemoryMatch.triggerSoundFx(a>0?"soundMovesLast":"soundMovesLow"),this.matchCountFieldFlash||this.flashMatchCountDisplay(!0,-1)):(this.matchCountField.color=MemoryMatch.GameSetup.guiFontColor,this.matchCountField.alpha=1,this.matchCountFieldFlash=!1),MemoryMatch.stageUpdated=!0},flashMatchCountDisplay:function(a,b){this.matchCountFieldFlash!==a&&(this.matchCountFieldFlash=a,this.matchCountFieldFlashCount=b,a?this.matchCountFlashTimer=window.setTimeout(this.flashMatchCountDisplayUpdate.bind(this),500):(this.matchCountField.alpha=1,null!=this.matchCountFlashTimer&&(window.clearTimeout(this.matchCountFlashTimer),this.matchCountFlashTimer=null)),MemoryMatch.stageUpdated=!0)},flashMatchCountDisplayUpdate:function(){var a=!0,b=1;null!=this.matchCountField&&this.matchCountFieldFlash&&(b=this.matchCountField.alpha<1?1:.4,this.matchCountFieldFlashCount>0&&(this.matchCountFieldFlashCount--,0==this.matchCountFieldFlashCount&&(b=1,a=!1)),this.matchCountField.alpha=b,this.matchCountFlashTimer=a?window.setTimeout(this.flashMatchCountDisplayUpdate.bind(this),500):null,MemoryMatch.stageUpdated=!0)},setFlashCountThreshold:function(a){0>a&&(a=0),this.flashThreshold=a},setMatchCountLabel:function(a){null==a&&(a="Misses"),this.matchCountLabel.text=a},updateGameTimerDisplay:function(a){var b;null!=this.gameTimerField&&(b=null==a?"":0==a?"0:00":MemoryMatch.formatTimeAsString(a,!0,!1),this.gameTimerField.text=b,MemoryMatch.stageUpdated=!0)},updateComboMultiplier:function(a){var b="",c=!1;null!=this.comboMultiplierSprite&&(null==a||2>a?this.comboMultiplier=1:a>this.comboMultiplier&&(this.comboMultiplier=a,c=!0),this.comboMultiplier>1&&(b=this.comboMultiplier.toString()+"x"),this.comboMultiplierSprite.text=b,c&&this.startComboSpriteAnimation(),MemoryMatch.stageUpdated=!0)},showOptionsButton:function(a){this.optionsButton.visible=a,MemoryMatch.stageUpdated=!0},showLevelField:function(a){this.levelField.visible=a,MemoryMatch.stageUpdated=!0},showMatchCountField:function(a){this.matchCountLabel.visible=a,this.matchCountField.visible=a,MemoryMatch.stageUpdated=!0},showTimer:function(a){this.gameTimerField.visible=a,MemoryMatch.stageUpdated=!0},showTimerCountdown:function(a,b){var c,d,e,f,g,h,i,j,k;this.timerCountdownStarted||(null==a&&(a=""),1>b?b=1:b>99&&(b=99),null==this.timerCountdownGroup?(f=new createjs.Text(a,MemoryMatch.getScaledFontSize(32)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),f.textAlign="center",f.name="title",i=new createjs.Text(b.toString(),MemoryMatch.getScaledFontSize(56)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),i.textAlign="center",i.name="timer",g=f.getBounds(),j=i.getBounds(),d=1.2*Math.max(g.width,j.width),e=g.height+1.1*j.height,f.x=.5*d,i.x=.5*d,f.y=.1*e,i.y=f.y+g.height,k=i.clone(),k.name="timerAnimate",h=new createjs.Shape,h.graphics.beginFill("#000000").drawRoundRect(0,0,d,e,8),h.alpha=.2,h.name="background",c=new createjs.Container,c.addChild(h),c.addChild(f),c.addChild(i),c.addChild(k),c.setTransform(.8*MemoryMatch.stageWidth,.014*MemoryMatch.stageWidth),this.groupDisplayObject.addChild(c),this.timerCountdownGroup=c):(c=this.timerCountdownGroup,c.visible=!0,f=this.timerCountdownGroup.getChildByName("title"),null!=f&&(f.text=a),i=this.timerCountdownGroup.getChildByName("timer"),null!=i&&(i.text=b.toString()),k=this.timerCountdownGroup.getChildByName("timerAnimate"),null!=k&&(k.text=b.toString())),this.lastUpdateTime=0,MemoryMatch.stageUpdated=!0)},hideTimerCountdown:function(){null!=this.timerCountdownGroup&&(null!=this.timerCountdownTimer&&(window.clearTimeout(this.timerCountdownTimer),this.timerCountdownTimer=null),this.timerCountdownGroup.visible=!1,this.timerCountdownStarted=!1,this.lastUpdateTime=0,this.showTimer(!0),MemoryMatch.stageUpdated=!0)},startTimerCountdown:function(){this.timerCountdownStarted||(this.timerCountdownStarted=!0,this.showTimer(!1),this.updateTimerCountdown())},updateTimerCountdown:function(){var a,b;null!=this.timerCountdownGroup&&this.timerCountdownGroup.visible&&!MemoryMatch.isGamePaused()&&(a=this.timerCountdownGroup.getChildByName("timerAnimate"),null!=a&&(b=MemoryMatch.AnimationHandler.addToAnimationQueue(a,0,900,!1,null,null),b.showAtBegin=!0,b.vAlpha=-1/MemoryMatch.fps,b.vXScale=.5/MemoryMatch.fps,b.endXScale=1.5,b.vYScale=b.vXScale,b.endYScale=1.5,this.timerCountdownTimer=window.setTimeout(this.onTimerCountdownTick.bind(this),1e3),this.lastUpdateTime=Date.now(),MemoryMatch.stageUpdated=!0))},onTimerCountdownTick:function(){var a,b,c,d,e;null!=this.timerCountdownGroup&&this.timerCountdownStarted&&!MemoryMatch.isGamePaused()&&(c=Date.now()-this.lastUpdateTime,b=this.timerCountdownGroup.getChildByName("timer"),a=this.timerCountdownGroup.getChildByName("timerAnimate"),null!=b&&(d=parseInt(b.text),d>0?(d--,e=!1):e=!0,b.text=d.toString(),null!=a&&(a.alpha=1,a.scaleX=1,a.scaleY=1,a.text=d.toString()),d>=0&&!e?this.updateTimerCountdown():(this.timerCountdownStarted=!1,this.timerCountdownTimer=null),MemoryMatch.stageUpdated=!0))},setupLevelTextField:function(){var a,b=1,c=MemoryMatch.GameSetup.levels[this.levelNumber-1].iconHUD,d=new createjs.Sprite(this.spriteData,c),e=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,c);d.setTransform(.01*this.width,.5*(this.hudHeight-e.height),b,b),d.framerate=1,d.name="icon",a=new createjs.Text("",MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="left",a.textBaseline="middle",a.setTransform(.09*this.width,.5*this.hudHeight),a.maxWidth=120*MemoryMatch.stageScaleFactor,this.groupDisplayObject.addChild(d),this.levelIcon=d,this.groupDisplayObject.addChild(a),this.levelField=a},setupScoreTextField:function(){var a=new createjs.Text("0",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor);a.textAlign="center",a.textBaseline="middle",a.setTransform(.25*this.width,.5*this.hudHeight),a.maxWidth=.0974*this.width,this.groupDisplayObject.addChild(a),this.scoreField=a},setupMatchCountTextField:function(){var a,b,c,d,e,f=MemoryMatch.GameSetup.guiHUDMatchCountTopMargin;null==f&&(f=.5),c=.18*this.width,d=this.hudHeight*MemoryMatch.GameSetup.guiHUDMatchCountHeight,e=new createjs.Shape,e.graphics.beginFill("#000000").drawRect(0,0,c,d),e.alpha=.2,e.setTransform(.5*(this.width-c),this.hudHeight*MemoryMatch.GameSetup.guiHUDMatchCountOffset),this.groupDisplayObject.addChild(e),a=new createjs.Text("Misses:",MemoryMatch.getScaledFontSize(60)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="right",a.textBaseline="middle",a.setTransform(.52*this.width,this.hudHeight*f),a.maxWidth=.1*this.width,this.matchCountLabel=a,this.groupDisplayObject.addChild(a),b=new createjs.Text("0",MemoryMatch.getScaledFontSize(84)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="left",b.textBaseline="middle",b.setTransform(.54*this.width,this.hudHeight*f),b.maxWidth=.03*this.width,this.matchCountField=b,this.groupDisplayObject.addChild(b)},setupGameTimerTextField:function(){var a=220*MemoryMatch.stageScaleFactor,b=new createjs.Text("",MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor);b.textAlign="left",b.textBaseline="middle",b.setTransform(.8*this.width,.5*this.hudHeight),b.maxWidth=a,this.groupDisplayObject.addChild(b),this.gameTimerField=b},setupMessageTextField:function(){var a,b,c=new createjs.Text("",MemoryMatch.getScaledFontSize(24)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor);c.textAlign="left",c.x=30*MemoryMatch.stageScaleFactor,c.y=this.height-40*MemoryMatch.stageScaleFactor,c.maxWidth=this.width-20*MemoryMatch.stageScaleFactor,c.visible=!1,this.groupDisplayObject.addChild(c),this.messageField=c,b=new createjs.Text("1x",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColorBonus),b.textAlign="center",b.x=.9*MemoryMatch.stageWidth,b.y=.96*MemoryMatch.stageHeight,b.maxWidth=this.width-20*MemoryMatch.stageScaleFactor,b.visible=!1,a=b.getBounds(),b.setBounds(a.x,a.y,a.width,a.height),b.regY=.5*a.height,this.groupDisplayObject.addChild(b),this.comboMultiplierSprite=b},setupHeader:function(){var a="topHud",b=new createjs.Sprite(this.spriteData,a),c=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,a);this.hudHeight=c.height,b.framerate=1,b.gotoAndStop("topHud"),b.setTransform(.5*(this.width-c.width),0,1,1),null!=this.primaryColorFilter&&(b.filters=[this.primaryColorFilter]),b.cache(0,0,c.width,c.height),this.groupDisplayObject.addChild(b),this.headerSprite=b},setupOptionsButton:function(){var a,b;b=MemoryMatch.stageScaleFactor<.5?{x:.95,y:.04}:{x:.94,y:.03},a=MemoryMatch.GUIButton({name:"optionsButton",tag:1,disabled:!1,callback:this.onOptions.bind(this),spriteFrames:MemoryMatch.GameSetup.mapSpritesheetFrames,expandHitArea:20*MemoryMatch.stageScaleFactor,baseUp:"mapOptionsButtonUp",baseOver:"mapOptionsButtonDown",baseDown:"mapOptionsButtonDown"}),a.setTransform(this.width*b.x,this.height*b.y),this.parentDisplayObject.addChild(a),a.visible=!0,this.optionsButton=a},setupGameOptionsButton:function(){var a,b;a=MemoryMatch.GUIButton({name:"gameOptionsButton",tag:2,disabled:!1,callback:this.onGameOptions.bind(this),baseUp:"optionsUp",baseOver:"optionsDown",baseDown:"optionsDown"}),b=a.getSize(),a.setTransform(.92*this.width,.5*(this.hudHeight-b)),this.groupDisplayObject.addChild(a),a.visible=!0,this.gameOptionsButton=a},onPauseGame:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.beginNewGame(1)},onOptions:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.GameOptions.isShowing()?MemoryMatch.GameOptions.closePopup("close"):(MemoryMatch.GameOptions.setup(MemoryMatch.stage,MemoryMatch.GameGUI.onOptionsClosed,!1),MemoryMatch.GameOptions.buildScreen(!0,!0))},onHome:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.GameOptions.isEnabled?MemoryMatch.GameOptions.closePopup("home"):(MemoryMatch.GameResults.close(),MemoryMatch.GameGUI.show(!1),MemoryMatch.showMenuScreen())},onGameOptions:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.GameOptions.isShowing()?MemoryMatch.GameOptions.closePopup("close"):(MemoryMatch.pauseGameInProgress(),MemoryMatch.GameOptions.setup(MemoryMatch.stage,MemoryMatch.GameGUI.onOptionsClosed,!0),MemoryMatch.GameOptions.buildScreen(!0,!0))},onOptionsClosed:function(a){switch(a){case"home":MemoryMatch.onQuitGame();break;case"restart":MemoryMatch.replayCurrentGame();break;case"continue":case"close":default:MemoryMatch.gameState!=MemoryMatch.GAMESTATE.MENU&&MemoryMatch.gameState!=MemoryMatch.GAMESTATE.RESULTS&&MemoryMatch.resumePausedGame(null)}},startComboSpriteAnimation:function(){var a,b=.25;null!=this.comboMultiplierSprite&&(a=MemoryMatch.AnimationHandler.addToAnimationQueue(this.comboMultiplierSprite,0,0,!1,null,this.comboSpriteAnimationPhaseTwo.bind(this)),a.showAtBegin=!0,a.endXScale=a.endYScale=1.2,a.vXScale=a.vYScale=a.endXScale/(b*MemoryMatch.fps),a.endRotation=-12,a.vRotation=a.endRotation/(b*MemoryMatch.fps))},comboSpriteAnimationPhaseTwo:function(){var a=MemoryMatch.AnimationHandler.addToAnimationQueue(this.comboMultiplierSprite,0,0,!1,null,this.killComboSpriteAnimation.bind(this)),b=.25;a.showAtBegin=!0,a.endXScale=a.endYScale=1,a.vXScale=a.vYScale=(a.endXScale-this.comboMultiplierSprite.scaleX)/(b*MemoryMatch.fps),a.endRotation=0,a.vRotation=-1*this.comboMultiplierSprite.rotation/(b*MemoryMatch.fps)},killComboSpriteAnimation:function(){null!=this.comboMultiplierSprite},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null,null!=this.headerSprite&&null!=this.primaryColorFilter&&(this.headerSprite.filters=[this.primaryColorFilter],this.headerSprite.updateCache())
}},MemoryMatch=MemoryMatch||{},MemoryMatch.GameOptions={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,audioOnButtonInstance:null,audioOffButtonInstance:null,backgroundWidth:0,backgroundHeight:0,backgroundCover:null,marginTop:0,marginLeft:0,centerX:0,marginX:0,lineHeight:0,isGameOptions:!1,isEnabled:!1,closeEventType:null,animate:!0,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,updateLoadStatusTimerId:-1,updateLoadStatusInterval:500,setup:function(a,b,c){this.stateCompleteCallback=b,this.parentDisplayObject=a,this.buttonInstances=[],this.isGameOptions=c,this.isEnabled=!1},buildScreen:function(a,b){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.centerX=.5*this.backgroundWidth,this.marginX=12*MemoryMatch.stageScaleFactor,this.setupTitleText(),this.setupButtons(),this.setupInfoText(),this.parentDisplayObject.addChild(this.groupDisplayObject),null===a&&(a=!1),null===b&&(b=!0),this.animate=b,a&&this.start())},start:function(){var a,b;this.animate?(this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,0,0,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationPhaseTwo.bind(this)),b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)):(this.isEnabled=!0,this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight))},startAnimationPhaseTwo:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationComplete.bind(this));b.endYScale=b.endXScale=1,b.vYScale=b.vXScale=-1*(b.endXScale/(a*MemoryMatch.fps))},startAnimationComplete:function(){this.isEnabled=!0,MemoryMatch.pauseGamePendingComplete()},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){null!==MemoryMatch.GameOptions.stateCompleteCallback&&MemoryMatch.GameOptions.stateCompleteCallback(this.closeEventType),MemoryMatch.GameOptions.killScreen()},closePopup:function(a){this.isShowing()&&(this.isEnabled=!1,MemoryMatch.gamePaused&&(MemoryMatch.gamePausePending=!0),this.closeEventType=a,this.closeStartAnimation())},closePopupFromPopup:function(a){this.isShowing()&&(this.isEnabled=!1,this.closeEventType=a,this.closeComplete())},onClickClose:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.GameOptions.closePopup("close")},onClickHome:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.GameOptions.closePopup("home")},onClickRestart:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.GameOptions.closePopup("restart")},onClickContinue:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.GameOptions.closePopup("continue")},onClickCredits:function(){this.isEnabled&&(MemoryMatch.unlockAllLevelsCounter++,MemoryMatch.CreditsPopup.setup(MemoryMatch.stage,this.closePopupFromPopup.bind(this)),MemoryMatch.CreditsPopup.buildScreen(!0))},onClickAudio:function(){if(MemoryMatch.GameOptions.isEnabled){var a=!createjs.Sound.getMute();createjs.Sound.setMute(a),MemoryMatch.GameOptions.audioOnButtonInstance.visible=!a,MemoryMatch.GameOptions.audioOnButtonInstance.setEnabled(!a),MemoryMatch.GameOptions.audioOffButtonInstance.visible=a,MemoryMatch.GameOptions.audioOffButtonInstance.setEnabled(a),MemoryMatch.audioMute=a,MemoryMatch.updateUserDataObject(null)}},onClickHelp:function(){MemoryMatch.GameOptions.isEnabled&&(MemoryMatch.GameOptions.isGameOptions?(MemoryMatch.LevelIntroduction.setup(MemoryMatch.stage,MemoryMatch.GameOptions.onHelpCallback.bind(MemoryMatch.GameOptions),MemoryMatch.gameId,MemoryMatch.gameLevel,MemoryMatch.gameNumber),MemoryMatch.LevelIntroduction.buildScreen(!0,!1)):(this.showHelp(),this.closePopupFromPopup(null)))},onClickFullScreen:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.goFullScreen()},onClickShare:function(){MemoryMatch.GameOptions.isEnabled&&MemoryMatch.showSharePopup(MemoryMatch.GameSetup.gameSubTitle,MemoryMatch.GameSetup.gameShortSubTitle)},onClickViewStats:function(){MemoryMatch.GameOptions.isEnabled&&(MemoryMatch.unlockAllLevelsCounter++,MemoryMatch.AwardsPopup.setup(MemoryMatch.stage,MemoryMatch.GameOptions.onMessagePopupCallback.bind(MemoryMatch.GameOptions)),MemoryMatch.AwardsPopup.buildScreen(!0,!1))},onClickClearStats:function(){var a;MemoryMatch.GameOptions.isEnabled&&(MemoryMatch.unlockAllLevelsCounter>2?(MemoryMatch.unlockAllLevels(),a=new MemoryMatch.InfoPopup(MemoryMatch.stage,!0,{title:"UNLOCKED",message:MemoryMatch.GameSetup.GUIStrings.allLevelsUnlocked,messageFontSize:64,sound:"soundCorrect"})):(MemoryMatch.resetUserData(),a=new MemoryMatch.InfoPopup(MemoryMatch.stage,!0,{title:"CLEARED",message:MemoryMatch.GameSetup.GUIStrings.allLevelsLocked,messageFontSize:64,sound:"soundCorrect"})),MemoryMatch.unlockAllLevelsCounter=0,null!=MemoryMatch.MainMenu&&MemoryMatch.MainMenu.refreshButtons(),a=null)},onClickBackground:function(){},onMessagePopupCallback:function(a){this.closePopupFromPopup(a)},onHelpCallback:function(a){this.closePopupFromPopup(a)},showBackgroundImage:function(a){var b,c,d,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);b=e.width>a.width?a.width/e.width:1,c=e.height>a.height?a.height/e.height:1,f.alpha=1,f.scaleX=b,f.scaleY=c,d=new createjs.Shape,d.graphics.beginFill("#CCCCCC").drawRect(0,0,a.width,a.height),d.alpha=.1,d.addEventListener("click",this.onClickBackground),this.backgroundCover=d,this.parentDisplayObject.addChild(d),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*b,this.backgroundHeight=e.height*c,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupTitleText:function(){var a,b;a=this.isGameOptions?"Game Paused":"Options",b=new createjs.Text(a,MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=this.marginTop,b.lineWidth=this.backgroundWidth-2*this.marginLeft,b.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(b)},setupInfoText:function(){var a,b,c=MemoryMatch.secondaryAssetLoaderProgress;a=MemoryMatch.getAppInfo(),b=new createjs.Text(a,MemoryMatch.getScaledFontSize(36)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiInfoColor),b.textAlign="left",b.x=this.marginLeft,b.y=.92*this.backgroundHeight,b.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(b),-2!=c&&(a=c>=0?c.toString()+"%":"",b=new createjs.Text(a,MemoryMatch.getScaledFontSize(42)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiInfoColor),b.textAlign="right",b.maxWidth=210*MemoryMatch.stageScaleFactor,b.x=this.backgroundWidth-.25*this.marginLeft,b.y=.92*this.backgroundHeight,b.name="loadStatus",this.groupDisplayObject.addChild(b),this.updateLoadStatusTimerId=window.setTimeout(this.updateLoadStatus.bind(this),this.updateLoadStatusInterval))},setupButtons:function(){var a,b,c,d,e,f,g,h,i,j=new createjs.Container,k=1,l=0,m=42*MemoryMatch.stageScaleFactor,n=!MemoryMatch.isFullScreenAvailable(),o=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,p=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor;l++,b=MemoryMatch.GUIButton({name:"close",tag:l,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),c=b.getSize(),b.setTransform(.94*this.backgroundWidth-c.width,.05*this.backgroundHeight,k,k),this.groupDisplayObject.addChild(b),this.buttonInstances.push(b),a="optionsLargeButtonBase",c=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,a),d=c.width,e=3*c.height,g=0,h=0,l++,f=createjs.Sound.getMute(),b=MemoryMatch.GUIButton({name:"audioOn",tag:l,disabled:!1,callback:this.onClickAudio.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallSoundOnIcon",iconOver:"optionsSmallSoundOnDownIcon",iconDown:"optionsSmallSoundOnDownIcon"}),b.setTransform(g,h,1,1),b.visible=!f,b.setEnabled(!f),j.addChild(b),this.audioOnButtonInstance=b,this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"audioOff",tag:l,disabled:!1,callback:this.onClickAudio.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallSoundOffIcon",iconOver:"optionsSmallSoundOffDownIcon",iconDown:"optionsSmallSoundOffDownIcon"}),b.setTransform(g,h,1,1),b.visible=f,b.setEnabled(f),j.addChild(b),this.audioOffButtonInstance=b,this.buttonInstances.push(b),this.isGameOptions?(l++,h+=c.height+m,b=MemoryMatch.GUIButton({name:"home",tag:l,disabled:!1,callback:this.onClickHome.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallMenuIcon",iconOver:"optionsSmallMenuDownIcon",iconDown:"optionsSmallMenuDownIcon"}),b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,h+=c.height+m,b=MemoryMatch.GUIButton({name:"credits",tag:l,disabled:!1,callback:this.onClickCredits.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallCreditIcon",iconOver:"optionsSmallCreditDownIcon",iconDown:"optionsSmallCreditDownIcon"}),b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"help",tag:l,disabled:!1,callback:this.onClickHelp.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallHelpIcon",iconOver:"optionsSmallHelpDownIcon",iconDown:"optionsSmallHelpDownIcon"}),c=b.getSize(),g=d-c.width,h=0,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"restart",tag:l,disabled:!1,callback:this.onClickRestart.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallReplayIcon",iconOver:"optionsSmallReplayDownIcon",iconDown:"optionsSmallReplayDownIcon"}),h+=c.height+m,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"fullscreen",tag:l,disabled:n,callback:this.onClickFullScreen.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallFullScreenIcon",iconOver:"optionsSmallFullScreenDownIcon",iconDown:"optionsSmallFullScreenDownIcon"}),h+=c.height+m,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b)):(l++,h+=c.height+m,b=MemoryMatch.GUIButton({name:"viewstats",tag:l,disabled:!1,callback:this.onClickViewStats.bind(this),baseUp:"optionsLargeButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,text:"View Stats",iconUp:"optionsLargeAwardsIcon",iconOver:"optionsLargeAwardsDownIcon",iconDown:"optionsLargeAwardsDownIcon"}),b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,h+=c.height+m,b=MemoryMatch.GUIButton({name:"clearstats",tag:l,disabled:!1,callback:this.onClickClearStats.bind(this),baseUp:"optionsLargeButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,text:"Clear Stats",iconUp:"optionsLargeClearIcon",iconOver:"optionsLargeClearDownIcon",iconDown:"optionsLargeClearDownIcon"}),b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"help",tag:l,disabled:!1,callback:this.onClickHelp.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallHelpIcon",iconOver:"optionsSmallHelpDownIcon",iconDown:"optionsSmallHelpDownIcon"}),c=b.getSize(),g=d-c.width,h=0,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),i=g-c.width,d+=i+c.width,g+=c.width+i,h=0,l++,b=MemoryMatch.GUIButton({name:"fullscreen",tag:l,disabled:n,callback:this.onClickFullScreen.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallFullScreenIcon",iconOver:"optionsSmallFullScreenDownIcon",iconDown:"optionsSmallFullScreenDownIcon"}),b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"share",tag:l,disabled:!1,callback:this.onClickShare.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"gameOverShareIcon",iconOver:"gameOverShareDownIcon",iconDown:"gameOverShareDownIcon"}),h+=c.height+m,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b),l++,b=MemoryMatch.GUIButton({name:"credits",tag:l,disabled:!1,callback:this.onClickCredits.bind(this),baseUp:"optionsSmallButtonBase",buttonBaseColor:o,buttonBaseRollOverColor:p,iconUp:"optionsSmallCreditIcon",iconOver:"optionsSmallCreditDownIcon",iconDown:"optionsSmallCreditDownIcon"}),h+=c.height+m,b.setTransform(g,h,1,1),j.addChild(b),this.buttonInstances.push(b)),j.setTransform(.5*(this.backgroundWidth-d),.5*(this.backgroundHeight-e),k,k),this.groupDisplayObject.addChild(j)},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},showHelp:function(){var a=document.getElementById("helpArea");a.style.display="block"},updateLoadStatus:function(){var a=this.groupDisplayObject.getChildByName("loadStatus"),b=MemoryMatch.secondaryAssetLoaderProgress;null!=a&&(-1!=b?(a.text=b.toString()+"%",this.updateLoadStatusTimerId=window.setTimeout(this.updateLoadStatus.bind(this),this.updateLoadStatusInterval)):(this.updateLoadStatusTimerId=-1,this.groupDisplayObject.removeChild(a)))},killScreen:function(){var a;for(-1!=this.updateLoadStatusTimerId&&(window.clearTimeout(this.updateLoadStatusTimerId),this.updateLoadStatusTimerId=-1),this.primaryColorFilter=null,this.secondaryColorFilter=null,a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].kill();this.buttonInstances=null,this.audioOnButtonInstance=null,this.audioOffButtonInstance=null,this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.stateCompleteCallback=null,this.levelData=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.GameResults={stateCompleteCallback:null,levelData:null,parentDisplayObject:null,groupDisplayObject:null,animationDisplayObject:null,buttonInstances:null,spriteData:null,gemSprite:null,gemSpriteFinalPosition:null,matchBonusText:null,comboBonusText:null,currentScoreTextField:null,bestScoreTextField:null,backgroundWidth:0,backgroundHeight:0,marginTop:0,marginLeft:0,totalGameTime:0,timeBonus:0,movesRemainingBonus:0,comboBonus:0,achievementBonus:0,totalMatches:0,totalMisses:0,totalCombos:0,totalMoves:0,unusedMoves:0,accuracy:0,playerScore:0,playerBestScore:0,gameStarsEarned:0,isChallenge:!1,isEnabled:!1,lineHeight:0,priorGameData:null,gameNumber:0,streakCount:0,starHalfWidth:0,holdThirdStar:null,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,refreshTimerId:null,cacheRefreshCount:0,showingTip:!0,pausedWhileShowingAd:!1,resultsScreenStartedTime:0,setup:function(a,b,c){var d,e,f;null===this.levelData&&(this.spriteData=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),this.levelData=b,this.gameNumber=MemoryMatch.isChallengeGame?99:MemoryMatch.gameNumber,this.streakCount=0,this.priorGameData=MemoryMatch.getPriorScoreDataForGameNumber(this.gameNumber,null),this.stateCompleteCallback=c,this.parentDisplayObject=a,this.playerScore=MemoryMatch.gameScore,this.totalCombos=MemoryMatch.numberOfCombos,this.unusedMoves=MemoryMatch.moveCountDown,this.totalMoves=MemoryMatch.levelTolerance-MemoryMatch.moveCountDown,this.totalMatches=MemoryMatch.matchCount,this.totalMisses=MemoryMatch.missCount,this.totalGameTime=MemoryMatch.gameEndTime-MemoryMatch.gameStartTime,this.timeBonus=MemoryMatch.calculateTimeBonus(),this.movesRemainingBonus=MemoryMatch.calculateUnusedMovesBonus(),this.comboBonus=MemoryMatch.calculateComboBonus(),this.achievementBonus=MemoryMatch.calculateAchievementBonus(),this.totalGameTime=MemoryMatch.formatTimeAsString(this.totalGameTime,!1,!1),this.accuracy=MemoryMatch.calculateLevelAccuracy(),this.gameStarsEarned=MemoryMatch.starsEarnedInCurrentGame(),this.buttonInstances=[],this.playerBestScore=MemoryMatch.priorBestGameScore,d=MemoryMatch.levelComplete?"win":"lose",MemoryMatch.isChallengeGame?(this.streakCount=MemoryMatch.playerBeatChallenge&&MemoryMatch.gameType!=MemoryMatch.GAMEPLAYTYPE.SIMON?MemoryMatch.gameNumber:MemoryMatch.gameNumber-1,e=100*MemoryMatch.gameLevel,f=this.streakCount):(e=MemoryMatch.gameNumber+MemoryMatch.getGameLevelNumberOffset(MemoryMatch.gameLevel),f=this.totalMisses),this.isEnabled=!1,enginesisSession.gameTrackingRecord("level",d,"Level "+e.toString(),f,null))},buildScreen:function(a){null===this.groupDisplayObject&&(this.resultsScreenStartedTime=(new Date).getTime(),this.showingTip=!MemoryMatch.isChallengeGame||MemoryMatch.gamePlayState!=MemoryMatch.GAMEPLAYSTATE.WIN,this.groupDisplayObject=new createjs.Container,this.animationDisplayObject=new createjs.Container,this.parentDisplayObject.addChild(this.groupDisplayObject),this.parentDisplayObject.addChild(this.animationDisplayObject),this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.06*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleText(this.groupDisplayObject),MemoryMatch.isChallengeGame?this.setupAward(this.groupDisplayObject):this.setupStars(this.groupDisplayObject),this.showingTip&&this.setupTipText(this.groupDisplayObject),this.setupLevelText(this.groupDisplayObject),this.setupButtons(this.groupDisplayObject),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,0,0,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),this.groupDisplayObject.cache(0,0,this.backgroundWidth,this.backgroundHeight),this.animationDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),null===a&&(a=!1),a&&this.start())},start:function(){var a,b=.3,c=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*b,!1,null,this.startAnimationPhaseTwo.bind(this));c.endYScale=c.endXScale=1.08,c.vYScale=c.vXScale=c.endXScale/(b*MemoryMatch.fps),a=MemoryMatch.levelComplete?"soundWin":"soundLose",MemoryMatch.playInterstitialMusic(a,!1)},startAnimationPhaseTwo:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationComplete.bind(this));b.endYScale=b.endXScale=1,b.vYScale=b.vXScale=-1*(b.endXScale/(a*MemoryMatch.fps))},startAnimationComplete:function(){var a;this.isEnabled=!0,MemoryMatch.isChallengeGame&&(this.flashNextButton(),a=MemoryMatch.hiFiveEarnedInCurrentGame(),null!=a&&a.length>0&&MemoryMatch.showMessageBalloon(null,a+"!",0,.5*this.backgroundWidth,.2*this.backgroundHeight))},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps),MemoryMatch.stopInterstitialMusic()},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){null!==this.stateCompleteCallback&&this.stateCompleteCallback(this.closeEventType),this.killScreen()},close:function(){MemoryMatch.GameResults.isEnabled=!1,MemoryMatch.AnimationHandler.removeWithTag(MemoryMatch.GAMERESULTS_ANIMATION_TAG),MemoryMatch.GameResults.isShowing()&&MemoryMatch.GameResults.closeStartAnimation(),MemoryMatch.stageUpdated=!0},onClickNext:function(){MemoryMatch.GameResults.isEnabled&&(MemoryMatch.GameResults.closeEventType="next",MemoryMatch.determineIfItTimeToShowAdPopup(this.onCloseAdInterstital.bind(this))||MemoryMatch.GameResults.close())},onClickReplay:function(){MemoryMatch.GameResults.isEnabled&&(MemoryMatch.GameResults.closeEventType="replay",MemoryMatch.determineIfItTimeToShowAdPopup(this.onCloseAdInterstital.bind(this))||MemoryMatch.GameResults.close())},onClickHome:function(){MemoryMatch.GameResults.isEnabled&&(MemoryMatch.GameResults.closeEventType="home",MemoryMatch.GameResults.close())},onClickStats:function(){MemoryMatch.GameResults.isEnabled&&(MemoryMatch.AwardsPopup.setup(MemoryMatch.stage,null),MemoryMatch.AwardsPopup.buildScreen(!0,!0))},onCloseAdInterstital:function(){MemoryMatch.gamePaused?MemoryMatch.GameResults.pausedWhileShowingAd=!0:(MemoryMatch.GameResults.close(),MemoryMatch.GameResults.pausedWhileShowingAd=!1)},refreshCache:function(){this.groupDisplayObject.updateCache(),MemoryMatch.stageUpdated=!0},flashNextButton:function(){this.buttonInstances.length>3&&(this.buttonInstances[3].setFlashing(!0),this.startRefreshInterval())},showBackgroundImage:function(a){var b,c,d=MemoryMatch.assetLoader.getResult("popup-bg"),e=new createjs.Bitmap(d);b=d.width>a.width?a.width/d.width:1,c=d.height>a.height?a.height/d.height:1,e.alpha=1,e.scaleX=b,e.scaleY=c,this.groupDisplayObject.addChild(e),this.backgroundWidth=d.width*b,this.backgroundHeight=d.height*c,null!=this.primaryColorFilter&&(e.filters=[this.primaryColorFilter],e.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupStars:function(a){var b,c,d,e,f,g,h="gameOverStarFill",i=MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[h][0]][2],j=MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[h][0]][3],k="gameOverStarEmpty",l=MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[k][0]][2],m=MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[k][0]][3],n=36*MemoryMatch.stageScaleFactor,o=Math.floor(.12*this.backgroundHeight),p=3*(l+n)-n,q=Math.floor(.5*(this.backgroundWidth-p)),r=800;for(this.holdThirdStar=3===this.gameStarsEarned?!0:null,b=0;b<MemoryMatch.GameSetup.numberOfStars;b++)0===b?(c=new createjs.Sprite(this.spriteData,h),e=new createjs.Sprite(this.spriteData,k),c.framerate=1,e.framerate=1,c.visible=!1,e.visible=!0,d=c,f=e):(d=c.clone(),f=e.clone()),f.setTransform(q,o),a.addChild(f),b<this.gameStarsEarned&&(d.setTransform(q+(l-i)-1,o+(m-j)-1),d.visible=!1,d.starNumber=b+1,a.addChild(d),2===b&&this.holdThirdStar?this.holdThirdStar=d:(g=MemoryMatch.AnimationHandler.addToAnimationQueue(d,r+500*b,0,!1,null,this.showStar.bind(this)),g.showAtBegin=!0,g.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG)),q+=l+n},showStar:function(a){var b,c,d="gameOverStarFill",e=.5*MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[d][0]][2],f=this.groupDisplayObject.localToGlobal(a.x,a.y);a.starNumber<3?b=40*Math.random()+20:(b=50*Math.random()+40,c=MemoryMatch.hiFiveEarnedInCurrentGame(),null!=c&&c.length>0&&MemoryMatch.showMessageBalloon(null,c+"!",0,a.x,a.y)),MemoryMatch.AnimationHandler.startSplatterParticles(b,f.x+e,f.y+e),this.refreshCache("showStar"),MemoryMatch.triggerSoundFx("soundBump"),MemoryMatch.isChallengeGame&&(this.isEnabled=!0,this.flashNextButton())},showThirdStar:function(a){var b;null!==this.holdThirdStar&&(b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.holdThirdStar,a,0,!1,null,this.showStar.bind(this)),b.showAtBegin=!0,b.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,this.holdThirdStar=null,MemoryMatch.triggerSoundFx("soundBonus",{delay:a}),MemoryMatch.stageUpdated=!0)},setupAward:function(){var a,b,c,d,e,f,g,h,i="mapTrophy",j=MemoryMatch.GameSetup.mapSpritesheetFrames,k=new createjs.SpriteSheet(j),l=new createjs.Sprite(k,i),m=MemoryMatch.getSpriteFrameSize(j,i),n=.5,o=MemoryMatch.GameSetup.levels.length;for(this.showingTip?(n=.5,h=.22):(n=.92,h=.3),c={x:.5*this.backgroundWidth,y:this.backgroundHeight*h},l.setTransform(c.x,c.y,n,n,0,0,0,.5*m.width,.5*m.height),l.framerate=0,this.groupDisplayObject.addChild(l),i="mapAwardEmpty",b=null!=j.animations[i]?new createjs.Sprite(k,i):null,i="mapAwardLand",c.x-=.5*m.width*n,c.y-=.5*m.height*n,d=0;o>d;d++)e=MemoryMatch.GameSetup.levels[d].gemPosition,g=d+1,f=i+g.toString(),null!=b&&(a=d>0?b.clone():b,a.setTransform(c.x+e.x*n*MemoryMatch.stageScaleFactor,c.y+e.y*n*MemoryMatch.stageScaleFactor,n,n),this.groupDisplayObject.addChild(a)),l=new createjs.Sprite(k,f),l.setTransform(c.x+e.x*n*MemoryMatch.stageScaleFactor,c.y+e.y*n*MemoryMatch.stageScaleFactor,n,n),l.name=f,l.visible=MemoryMatch.didUserBeatChallenge(g),this.groupDisplayObject.addChild(l),MemoryMatch.levelComplete&&l.visible&&g==MemoryMatch.gameLevel&&(m=MemoryMatch.getSpriteFrameSize(j,f),this.gemSprite=l.clone(),this.gemSprite.width=m.width,this.gemSprite.height=m.height,this.gemSpriteFinalPosition={x:l.x+.5*m.width*n,y:l.y+.5*m.height*n},this.animateGemToAward())},setupTitleText:function(a){var b,c,d=1,e=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].iconPopup,f=new createjs.Sprite(this.spriteData,e),g=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,e);f.setTransform(this.marginLeft-.25*g.width,this.marginTop-.25*g.height,d,d),f.framerate=1,f.name="icon",a.addChild(f),MemoryMatch.isChallengeGame?MemoryMatch.levelComplete?(c="Challenge Complete!",MemoryMatch.gameLevel<MemoryMatch.GameSetup.levels.length&&(c+=" Play On!")):c="Challenge Failed! Try Again?":c=MemoryMatch.levelComplete?"Level "+(MemoryMatch.gameNumber+MemoryMatch.getGameLevelNumberOffset(MemoryMatch.gameLevel)).toString()+" Complete! Play On!":"Out of Moves! Try Again?",b=new createjs.Text(c,MemoryMatch.getScaledFontSize(58)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=this.marginTop,b.lineWidth=this.backgroundWidth-2*this.marginLeft,b.maxWidth=this.backgroundWidth-2*this.marginLeft,a.addChild(b)},setupTipText:function(a){var b,c=this.getRandomTip(MemoryMatch.levelComplete);b=new createjs.Text(c,MemoryMatch.getScaledFontSize(48)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=.32*this.backgroundHeight,b.lineWidth=this.backgroundWidth-2*this.marginLeft,b.maxWidth=this.backgroundWidth-2*this.marginLeft,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b)},addTextBackgroundSprite:function(a,b,c,d){var e=b.clone(),f=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,"gameOverInfoBoxSmall");e.x=d-f.width,e.y=c.y-.5*f.height,a.addChild(e)},setupLevelText:function(a){var b,c,d,e,f,g,h,i=.12*this.backgroundWidth,j=.44*this.backgroundWidth,k=.2*this.backgroundWidth,l=1e3,m=0,n=MemoryMatch.getScaledFontSize(48)+" "+MemoryMatch.GameSetup.guiMediumFontName,o=MemoryMatch.getScaledFontSize(52)+" "+MemoryMatch.GameSetup.guiBoldFontName,p=MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiBoldFontName,q=MemoryMatch.GameSetup.guiFontColor,r=MemoryMatch.GameSetup.guiFontColorBonus,s=this.animationDisplayObject;h=new createjs.Sprite(this.spriteData,"gameOverInfoBoxSmall"),h.alpha=.1,this.lineHeight=96*MemoryMatch.stageScaleFactor,MemoryMatch.isChallengeGame?(c=Math.floor(.52*this.backgroundHeight),i=.38*this.backgroundWidth,j=.68*this.backgroundWidth,b=new createjs.Text("Streak:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.02*j),a.addChild(b),b=new createjs.Text(this.streakCount.toString(),this.streakCount<5?o:p,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,a.addChild(b),c+=this.lineHeight):(c=Math.floor(.5*this.backgroundHeight),b=new createjs.Text("Misses:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.03*j),a.addChild(b),b=new createjs.Text(this.totalMisses.toString(),o,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.visible=!1,a.addChild(b),d=MemoryMatch.AnimationHandler.addToAnimationQueue(b,l+500*m,0,!1,null,this.animateTextMisses.bind(this)),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,this.movesRemainingBonus>0&&(this.matchBonusText=new createjs.Text("+ "+this.movesRemainingBonus.toString(),o,r),this.matchBonusText.textAlign="left",this.matchBonusText.x=j,this.matchBonusText.y=c,this.matchBonusText.alpha=1,this.matchBonusText.maxWidth=k,this.matchBonusText.visible=!1,this.matchBonusText.height=this.matchBonusText.getMeasuredLineHeight(),this.matchBonusText.cache(0,0,k,this.matchBonusText.height),s.addChild(this.matchBonusText),d=MemoryMatch.AnimationHandler.addToAnimationQueue(this.matchBonusText,l+750*m,0,!1,null,null),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,d.vAlpha=-1/(2*MemoryMatch.fps),d.endAlpha=0,d.killOnAlphaZero=!0,d.vY=-1*(72/MemoryMatch.fps),d.vXscale=.1,d.vYscale=.1),m++,c+=this.lineHeight,e=this.accuracy>0?this.accuracy.toString()+"%":"--",b=new createjs.Text("Accuracy:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.03*j),a.addChild(b),b=new createjs.Text(e,o,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.visible=!1,a.addChild(b),d=MemoryMatch.AnimationHandler.addToAnimationQueue(b,l+500*m,0,!1,null,this.animateText.bind(this)),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,m++,MemoryMatch.gameType!=MemoryMatch.GAMEPLAYTYPE.CHAINS&&(c+=this.lineHeight,b=new createjs.Text("Combos:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.03*j),a.addChild(b),b=new createjs.Text(this.totalCombos.toString(),o,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.visible=!1,a.addChild(b),d=MemoryMatch.AnimationHandler.addToAnimationQueue(b,l+500*m,0,!1,null,this.animateTextComboBonus.bind(this)),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,this.matchBonusText=null,this.comboBonus>0&&(this.comboBonusText=new createjs.Text("+ "+this.comboBonus.toString(),o,r),this.comboBonusText.textAlign="left",this.comboBonusText.x=j,this.comboBonusText.y=c,this.comboBonusText.alpha=1,this.comboBonusText.maxWidth=k,this.comboBonusText.visible=!1,this.comboBonusText.height=this.comboBonusText.getMeasuredLineHeight(),this.comboBonusText.cache(0,0,k,this.comboBonusText.height),s.addChild(this.comboBonusText),d=MemoryMatch.AnimationHandler.addToAnimationQueue(this.comboBonusText,l+500*m,0,!1,null,null),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,d.vAlpha=-1/(2*MemoryMatch.fps),d.endAlpha=0,d.killOnAlphaZero=!0,d.vY=-1*(72/MemoryMatch.fps),d.vXscale=.1,d.vYscale=.1),m++),i=.56*this.backgroundWidth,j=.88*this.backgroundWidth,c=Math.floor(.5*this.backgroundHeight),b=new createjs.Text("Time Bonus:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.02*j),a.addChild(b),b=new createjs.Text(MemoryMatch.formatNumberWithGroups(this.timeBonus),o,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.visible=!1,a.addChild(b),d=MemoryMatch.AnimationHandler.addToAnimationQueue(b,l+500*m,0,!1,null,this.animateTextTimeBonus.bind(this)),d.showAtBegin=!0,d.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,c+=this.lineHeight),f=this.playerScore>=this.playerBestScore?p:o,b=new createjs.Text("Score:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.02*j),a.addChild(b),b=new createjs.Text(MemoryMatch.formatNumberWithGroups(this.playerScore),f,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.name="playerscore",a.addChild(b),this.currentScoreTextField=b,c+=this.lineHeight,this.playerScore>=this.playerBestScore?(f=o,g=0,0==this.playerBestScore&&(this.playerBestScore=this.playerScore)):(f=p,g=10*MemoryMatch.stageScaleFactor),b=new createjs.Text("Best:",n,q),b.textAlign="left",b.textBaseline="middle",b.x=i,b.y=c,b.maxWidth=k,this.addTextBackgroundSprite(a,h,b,1.02*j),a.addChild(b),b=new createjs.Text(MemoryMatch.formatNumberWithGroups(this.playerBestScore),f,q),b.textAlign="right",b.textBaseline="middle",b.x=j,b.y=c,b.maxWidth=k,b.name="bestscore",a.addChild(b),this.bestScoreTextField=b,MemoryMatch.isChallengeGame&&window.setTimeout(this.showBestScoreBurstIfBeatBestScore.bind(this),500),MemoryMatch.stageUpdated=!0
},animateText:function(){return null!=this.groupDisplayObject?(this.refreshCache("animateText"),!0):!1},animateTextMisses:function(){this.playerScore+=this.movesRemainingBonus,null!==this.currentScoreTextField&&(this.currentScoreTextField.text=MemoryMatch.formatNumberWithGroups(this.playerScore)),this.refreshCache("animateTextMisses")},animateTextComboBonus:function(){this.playerScore+=this.comboBonus,null!==this.currentScoreTextField&&(this.currentScoreTextField.text=MemoryMatch.formatNumberWithGroups(this.playerScore)),this.refreshCache("animateTextComboBonus")},animateTextTimeBonus:function(){var a,b=MemoryMatch.getScaledFontSize(52)+" "+MemoryMatch.GameSetup.guiBoldFontName,c=MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiBoldFontName;this.playerScore+=this.timeBonus,a=this.playerScore>=this.playerBestScore?c:b,null!==this.currentScoreTextField&&(this.currentScoreTextField.text=MemoryMatch.formatNumberWithGroups(this.playerScore),this.currentScoreTextField.font=a),this.showBestScoreBurstIfBeatBestScore(),this.showThirdStar(250),this.isEnabled=!0,this.flashNextButton(),this.refreshCache("animateTextTimeBonus")},showBestScoreBurstIfBeatBestScore:function(){var a,b,c=MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiBoldFontName;null!==this.bestScoreTextField&&this.playerScore>=this.playerBestScore&&0!=this.playerScore&&(this.playerBestScore=this.playerScore,this.bestScoreTextField.text=MemoryMatch.formatNumberWithGroups(this.playerBestScore),MemoryMatch.levelComplete&&(b=40*Math.random()+20,a=this.groupDisplayObject.localToGlobal(this.bestScoreTextField.x,this.bestScoreTextField.y),MemoryMatch.AnimationHandler.startSplatterParticles(b,a.x,a.y)),this.bestScoreTextField.font=c,this.refreshCache("showBestScoreBurstIfBeatBestScore"))},setupButtons:function(a){var b,c="gameOverButtonBase",d=MemoryMatch.gamePlayState==MemoryMatch.GAMEPLAYSTATE.WIN?4:3,e=1,f=MemoryMatch.GameSetup.guiSpritesheet1Frames.frames[MemoryMatch.GameSetup.guiSpritesheet1Frames.animations[c][0]][2]*e,g=0,h=0,i=d*(f+h)-h,j=.5*(this.backgroundWidth-i),k=.77*this.backgroundHeight,l=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,m=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor;b=MemoryMatch.GUIButton({name:"home",tag:++g,disabled:!1,callback:this.onClickHome.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:l,buttonBaseRollOverColor:m,iconUp:"gameOverMenuIcon",iconOver:"gameOverMenuDownIcon",iconDown:"gameOverMenuDownIcon"}),b.setTransform(j,k,e,e),b.refreshParent=this,a.addChild(b),this.buttonInstances.push(b),j+=f+h,b=MemoryMatch.GUIButton({name:"stats",tag:++g,disabled:!1,callback:this.onClickStats.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:l,buttonBaseRollOverColor:m,iconUp:"gameOverStatsIcon",iconOver:"gameOverStatsDownIcon",iconDown:"gameOverStatsDownIcon"}),b.setTransform(j,k,e,e),b.refreshParent=this,a.addChild(b),this.buttonInstances.push(b),j+=f+h,b=MemoryMatch.GUIButton({name:"replay",tag:++g,disabled:!1,callback:this.onClickReplay.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:l,buttonBaseRollOverColor:m,iconUp:"gameOverReplayIcon",iconOver:"gameOverReplayDownIcon",iconDown:"gameOverReplayDownIcon"}),b.setTransform(j,k,e,e),b.refreshParent=this,a.addChild(b),this.buttonInstances.push(b),MemoryMatch.gamePlayState==MemoryMatch.GAMEPLAYSTATE.WIN&&(j+=f+h,b=MemoryMatch.GUIButton({name:"continue",tag:++g,disabled:!1,callback:this.onClickNext.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:l,buttonBaseRollOverColor:m,iconUp:"gameOverNextIcon",iconOver:"gameOverNextDownIcon",iconDown:"gameOverNextDownIcon"}),b.setTransform(j,k,e,e),b.refreshParent=this,a.addChild(b),this.buttonInstances.push(b))},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},getRandomTip:function(a){for(var b,c=MemoryMatch.gameLevel-1,d=MemoryMatch.GameSetup.tips[c],e=d.length,f=MemoryMatch.getRandomNumberBetween(0,e-1),c=f,g=!1;!g;)a&&"win"==d[c].category||!a&&"win"!=d[c].category?g=!0:(c++,c==f?g=!0:c==e&&(c=0));return b=d[c].text},startRefreshInterval:function(){this.refreshTimerId=window.setTimeout(this.refreshInterval.bind(this),500)},refreshInterval:function(){this.refreshCache("refreshInterval"),this.startRefreshInterval()},animateGemToAward:function(){var a,b,c=.4,d=14,e=.75,f=.8;null!=this.gemSprite&&(this.gemSprite.setTransform(.5*this.backgroundWidth,.5*this.backgroundHeight,d,d,0,0,0,.5*this.gemSprite.width,.5*this.gemSprite.height),this.gemSprite.alpha=c,this.animationDisplayObject.addChild(this.gemSprite),b=MemoryMatch.fps*f,a=MemoryMatch.AnimationHandler.addToAnimationQueue(this.gemSprite,300,0,!1,null,this.gemAnimationComplete.bind(this)),a.tag=MemoryMatch.GAMERESULTS_ANIMATION_TAG,a.vX=(this.gemSpriteFinalPosition.x-this.gemSprite.x)/b,a.endX=this.gemSpriteFinalPosition.x,a.vY=(this.gemSpriteFinalPosition.y-this.gemSprite.y)/b,a.endY=this.gemSpriteFinalPosition.y,a.vAlpha=(1-c)/b,a.endAlpha=1,a.vXScale=-1*(d-e)/b,a.endXScale=.75,a.vYScale=a.vXScale,a.endYScale=a.endXScale,a.tickFunction=this.gemAnimationUpdate.bind(this))},gemAnimationUpdate:function(a){var b=!1,c=.75;return null!=this.animationDisplayObject&&(1!=a.actor.alpha||a.actor.scaleX!=c)&&(b=!0),b},gemAnimationComplete:function(){var a=this.animationDisplayObject.localToGlobal(this.gemSprite.x,this.gemSprite.y);MemoryMatch.AnimationHandler.startSplatterStars(100*Math.random()+80,a.x,a.y),MemoryMatch.triggerSoundFx("soundBump"),this.animationDisplayObject.removeChild(this.gemSprite),this.gemSprite=null,this.gemSpriteFinalPosition=null,this.refreshCache("gemAnimationComplete")},killScreen:function(){var a;for(null!=this.refreshTimerId&&(window.clearTimeout(this.refreshTimerId),this.refreshTimerId=null),null!=this.matchBonusText&&this.matchBonusText.uncache(),null!=this.comboBonusText&&this.comboBonusText.uncache(),this.groupDisplayObject.uncache(),this.spriteData=null,this.primaryColorFilter=null,this.secondaryColorFilter=null,null!=this.backgroundSoundInstance&&(this.backgroundSoundInstance.stop(),this.backgroundSoundInstance=null),a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].kill();this.buttonInstances=null,this.currentScoreTextField=null,this.bestScoreTextField=null,this.matchBonusText=null,this.comboBonusText=null,this.parentDisplayObject.removeChild(this.groupDisplayObject),this.stateCompleteCallback=null,this.levelData=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.GUIButton=function(a){var b=new createjs.Container;return b.callback=null,b.buttonSprite=null,b.iconSprite=null,b.text=null,b.addTextShadow=!1,b.name="button",b.tag=0,b.buttonScale=1,b.disabled=!1,b.forceDisabledDisplay=!1,b._isPressed=!1,b._isOver=!1,b._isFlashing=!1,b.spriteFrames=null,b.spriteData=null,b.shadowSource=null,b.buttonFaceActive=null,b.buttonFaceOver=null,b.buttonFaceDown=null,b.buttonFaceDisabled=null,b.buttonBaseActive=null,b.buttonBaseOver=null,b.buttonBaseDown=null,b.buttonBaseDisabled=null,b.buttonBaseColor=null,b.buttonBaseRollOverColor=null,b.spriteSheet=b.spriteData,b.buttonColorFilter=null,b.buttonRollOverColorFilter=null,b.refreshParent=null,b.flashingTimerId=-1,b.flashingCounter=null,b.flashingInterval=500,b.expandHitArea=0,b.setParameters=function(a){null!=a&&(null!=a.text&&(b.text=a.text),null!=a.name&&(b.name=a.name),null!=a.tag&&(b.tag=parseInt(a.tag)),null!=a.callback&&(b.callback=a.callback),null!=a.disabled&&(b.disabled=a.disabled),null!=a.baseUp&&(b.buttonBaseActive=a.baseUp),null!=a.baseOver&&(b.buttonBaseOver=a.baseOver),null!=a.baseDown&&(b.buttonBaseDown=a.baseDown),null!=a.baseDisabled&&(b.buttonBaseDisabled=a.baseDisabled),null!=a.buttonBaseColor&&(b.buttonBaseColor=a.buttonBaseColor),null!=a.buttonBaseRollOverColor&&(b.buttonBaseRollOverColor=a.buttonBaseRollOverColor),null!=a.icon&&(b.buttonFaceActive=a.icon),null!=a.iconUp&&(b.buttonFaceActive=a.iconUp),null!=a.iconDown&&(b.buttonFaceDown=a.iconDown),null!=a.iconOver&&(b.buttonFaceOver=a.iconOver),null!=a.iconDisabled&&(b.buttonFaceDisabled=a.iconDisabled),null!=a.addTextShadow&&(b.addTextShadow=a.addTextShadow),b.spriteFrames=null!=a.spriteFrames?a.spriteFrames:MemoryMatch.GameSetup.guiSpritesheet1Frames,b.expandHitArea=null!=a.expandHitArea?a.expandHitArea:0,null==b.buttonBaseOver&&(b.buttonBaseOver=b.buttonBaseActive),null==b.buttonBaseDown&&(b.buttonBaseDown=b.buttonBaseActive),null==b.buttonBaseDisabled&&(b.buttonBaseDisabled=b.buttonBaseActive),null==b.buttonFaceOver&&(b.buttonFaceOver=b.buttonFaceActive),null==b.buttonFaceDown&&(b.buttonFaceDown=b.buttonFaceActive),null==b.buttonFaceDisabled&&(b.forceDisabledDisplay=!0,b.buttonFaceDisabled=b.buttonFaceActive),null==this.name&&(this.name="button"+this.tag.toString()),b.spriteData=new createjs.SpriteSheet(b.spriteFrames))},b.createButton=function(){var a,b,c,d;a=this.disabled?this.buttonBaseDisabled:this.buttonBaseActive,null==this.buttonSprite&&(this.buttonSprite=new createjs.Sprite(this.spriteData,a),this.buttonSprite.name="button",this.buttonSprite.framerate=1,this.addChild(this.buttonSprite)),b=MemoryMatch.getSpriteFrameSize(this.spriteFrames,a),this.width=b.width*this.buttonScale,this.height=b.height*this.buttonScale,d=new createjs.Shape((new createjs.Graphics).beginFill("909090").drawRect(0-this.expandHitArea,0-this.expandHitArea,this.width+2*this.expandHitArea,this.height+2*this.expandHitArea)),d.cache(0-this.expandHitArea,0-this.expandHitArea,this.width+2*this.expandHitArea,this.height+2*this.expandHitArea),this.buttonSprite.hitArea=d,this.flashingCounter=0,this.setTransform(0,0,this.buttonScale,this.buttonScale),this.createButtonIcon(),this.createButtonText(),null!=this.buttonBaseColor&&(c=MemoryMatch.htmlColorStringToColorArray(this.buttonBaseColor),this.buttonColorFilter=new createjs.ColorFilter(0,0,0,1,c[0],c[1],c[2],0),this.buttonSprite.filters=[this.buttonColorFilter],this.buttonSprite.cache(0,0,b.width,b.height),null!=this.buttonBaseRollOverColor&&(c=MemoryMatch.htmlColorStringToColorArray(this.buttonBaseRollOverColor),this.buttonRollOverColorFilter=new createjs.ColorFilter(0,0,0,1,c[0],c[1],c[2],0))),this.disabled?this.showEnabled(!1):(this.setEnabled(!0),this.handleEvent({type:"rollout"})),MemoryMatch.stageUpdated=!0},b.createButtonText=function(){var a=new createjs.Text(this.text,MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),b=a.getMeasuredLineHeight();null==this.iconSprite?(a.textAlign="center",a.x=.5*this.width,a.maxWidth=this.width):(a.textAlign="left",a.x=this.iconSprite.x+this.iconSprite.width,a.maxWidth=this.width-this.iconSprite.width),a.y=.5*(this.height-b),a.visible=!0,a.name="buttonText",this.addTextShadow&&null==this.shadowSource&&(this.shadowSource=new createjs.Shadow("#000000",2,2,10)),a.shadow=this.shadowSource,this.addChild(a)},b.setButtonText=function(a){var b=this.getChildByName("buttonText");this.text=a,null==b?this.createButtonText():b.text=this.text,MemoryMatch.stageUpdated=!0},b.setText=function(a){this.setButtonText(a)},b.createButtonIcon=function(){var a,b,c,d;null==this.iconSprite&&null!=this.buttonFaceActive&&(a=new createjs.Sprite(this.spriteData,this.buttonFaceActive),b=MemoryMatch.getSpriteFrameSize(this.spriteFrames,this.buttonFaceActive),a.framerate=1,a.name="buttonIcon",d=.5*(this.height-b.height),c=null==this.text?.5*(this.width-b.width):0,a.setTransform(c,d,1,1),a.width=b.width,a.height=b.height,this.addChild(a),this.iconSprite=a)},b.setIcon=function(a){null!=this.iconSprite&&(this.iconSprite.gotoAndStop(a),MemoryMatch.stageUpdated=!0)},b.getSize=function(){return{width:this.width,height:this.height}},b.handleEvent=function(a){var b,c,d=a.type,e=!1;switch(d){case"click":break;case"mousedown":this._isPressed=!0,b=this.buttonBaseDown,c=this.buttonFaceDown,null!=this.buttonBaseRollOverColor&&(this.buttonSprite.filters=[this.buttonRollOverColorFilter],this.buttonSprite.updateCache(),MemoryMatch.stageUpdated=!0);break;case"rollover":this._isPressed?(b=this.buttonBaseDown,c=this.buttonFaceDown):(b=this.buttonBaseOver,c=this.buttonFaceOver);break;case"pressup":this._isPressed=!1,this._isOver?(b=this.buttonBaseOver,c=this.buttonFaceOver):(b=this.buttonBaseActive,c=this.buttonFaceActive),null!=this.buttonBaseRollOverColor&&null!=this.buttonBaseColor&&(this.buttonSprite.filters=[this.buttonColorFilter],this.buttonSprite.updateCache()),e=!0;break;case"rollout":default:this._isPressed?(b=this.buttonBaseDown,c=this.buttonFaceDown):(b=this.buttonBaseActive,c=this.buttonFaceActive)}null!=this.buttonSprite&&null!=b&&(this.buttonSprite.gotoAndStop(b),MemoryMatch.stageUpdated=!0),null!=this.iconSprite&&null!=c&&(this.iconSprite.gotoAndStop(c),MemoryMatch.stageUpdated=!0),null!=this.refreshParent&&null!=this.refreshParent.refreshCache&&this.refreshParent.refreshCache()},b.onClicked=function(a){if(null!=a&&null!=a.target){var b=a.target.parent;null!=b.callback&&(MemoryMatch.triggerSoundFx("soundTap"),b.callback(b.name))}},b.show=function(a){this.visible=a},b.enable=function(){this.disabled&&(this.setEnabled(!0),this.showEnabled(!0),this.handleEvent({type:"rollout"}))},b.disable=function(){this.setEnabled(!1),this.showEnabled(!1)},b.setEnabled=function(a){a?(this.disabled=!1,this.cursor="pointer",this.addEventListener("click",this.onClicked),this.addEventListener("rollover",this),this.addEventListener("rollout",this),this.addEventListener("mousedown",this),this.addEventListener("pressup",this)):(this.disabled=!0,this.cursor=null,this.removeEventListener("click",this.onClicked),this.removeEventListener("rollover",this),this.removeEventListener("rollout",this),this.removeEventListener("mousedown",this),this.removeEventListener("pressup",this))},b.showEnabled=function(a){var b,c,d=1,e=this.getChildByName("buttonText");a?(b=this.buttonBaseActive,c=this.buttonFaceActive,this.forceDisabledDisplay&&(e=this.getChildByName("buttonText"))):(this.forceDisabledDisplay&&(d=.4,e=this.getChildByName("buttonText")),b=this.buttonBaseDisabled,c=this.buttonFaceDisabled),null!=this.buttonSprite&&(this.buttonSprite.gotoAndStop(b),this.buttonSprite.alpha=d),null!=this.iconSprite&&(this.iconSprite.gotoAndStop(c),this.iconSprite.alpha=d),null!=e&&(e.alpha=d)},b.setFlashing=function(a){this._isFlashing=a,this._isFlashing&&-1==this.flashingTimerId?(this.flashingCounter=1,this.updateFlashing()):this._isFlashing||(this.flashingCounter=0,-1!=this.flashingTimerId&&(window.clearTimeout(this.flashingTimerId),this.flashingTimerId=-1,MemoryMatch.stageUpdated=!0))},b.updateFlashing=function(){var a,b=this.getChildByName("buttonText");this._isFlashing?(this.flashingCounter++,a=this.flashingCounter%2==0?.3:1,this.flashingTimerId=window.setTimeout(this.updateFlashing.bind(this),this.flashingInterval)):(a=1,this.flashingTimerId=-1),null!=this.iconSprite&&(this.iconSprite.alpha=a),null!=b&&(b.alpha=a,MemoryMatch.stageUpdated=!0)},b.toString=function(){return"[GUIButton] name="+this.name+"; tag="+this.tag.toString()+"; enabled="+(this.disabled?"NO":"YES")},b.kill=function(){-1!=this.flashingTimerId&&(window.clearTimeout(this.flashingTimerId),this.flashingTimerId=-1),null!=this.buttonSprite&&(this.buttonSprite.uncache(),this.buttonSprite=null),this.buttonColorFilter=null,this.buttonRollOverColorFilter=null,this.removeAllEventListeners(),this.removeAllChildren(),this.shadowSource=null,this.callback=null,this.spriteData=null,this.iconSprite=null,this.text=null},b.setParameters(a),b.createButton(),b},MemoryMatch=MemoryMatch||{},function(){"use strict";var a=function(a,b,c){this.setParameters(a,c),this.buildScreen(b)},b=a.prototype;b.stateCompleteCallback=null,b.parentDisplayObject=null,b.groupDisplayObject=null,b.x=0,b.y=0,b.width=-1,b.height=-1,b.marginTop=0,b.marginLeft=0,b.centerX=0,b.marginX=0,b.lineHeight=0,b.title=null,b.titleFontSize=56,b.message=null,b.messageFontSize=48,b.messageFont=null,b.icon=null,b.iconWidth=0,b.sound=null,b.displayDuration=2.5,b.fadeTime=1,b.borderColor=MemoryMatch.GameSetup.achievementBorderColor,b.backgroundColor=MemoryMatch.GameSetup.achievementBackgroundColor,b.autoClose=!0,b.setParameters=function(a,b){this.parentDisplayObject=a,null!==b&&(this.fadeTime=1,null!=b.x?this.x=b.x:this.x<1&&(this.x=.5*this.parentDisplayObject.canvas.width),null!=b.y?this.y=b.y:this.y<1&&(this.y=.5*this.parentDisplayObject.canvas.height),null!=b.width?this.width=b.width:this.width<1&&(this.width=900),this.width*=MemoryMatch.stageScaleFactor,null!=b.height?this.height=b.height:this.height<1&&(this.height=270),this.height*=MemoryMatch.stageScaleFactor,null!=b.title?this.title=b.title:null==this.title&&(this.title=""),null!=b.titleFontSize?this.titleFontSize=b.titleFontSize:null==this.titleFontSize&&(this.titleFontSize=56),null!=b.message?this.message=b.message:null==this.message&&(this.message=""),null!=b.messageFont?this.messageFont=b.messageFont:null==this.messageFont&&(this.messageFont=MemoryMatch.GameSetup.guiMediumFontName),null!=b.messageFontSize?this.messageFontSize=b.messageFontSize:null==this.messageFontSize&&(this.messageFontSize=48),null!=b.icon?this.icon=b.icon:null==this.icon&&(this.icon=null),this.iconWidth=0,this.backgroundColor=null!=b.backgroundColor?b.backgroundColor:MemoryMatch.GameSetup.achievementBackgroundColor,this.borderColor=null!=b.borderColor?b.borderColor:MemoryMatch.GameSetup.achievementBorderColor,null!=b.sound&&(this.sound=b.sound),this.displayDuration=null!=b.duration?b.duration:2.5,null!=b.callback&&(this.stateCompleteCallback=b.callback),this.autoClose=null!=b.autoClose?b.autoClose:!0)},b.drawBackground=function(){var a,b=new createjs.Shape;return b.x=0,b.y=0,a=b.graphics,a.beginFill(this.backgroundColor),a.beginStroke(this.borderColor),a.setStrokeStyle(3),a.drawRoundRect(0,0,this.width,this.height,12),this.groupDisplayObject.addChild(b),b},b.buildScreen=function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.marginTop=8*MemoryMatch.stageScaleFactor,this.marginLeft=8*MemoryMatch.stageScaleFactor,this.drawBackground(),this.setupIcon(),this.setupTitleText(),this.setupMessageText(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(this.x,this.y,1,1,0,0,0,.5*this.width,.5*this.height),this.groupDisplayObject.visible=!0,null===a&&(a=!1),a&&this.start())},b.start=function(){this.autoClose&&this.closeStartAnimation(),null!=this.sound&&MemoryMatch.triggerSoundFx(this.sound,{delay:0})},b.closeStartAnimation=function(){var a=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,1e3*this.displayDuration,1e3*this.fadeTime,!0,null,this.closeComplete.bind(this));a.showAtBegin=!0,a.vAlpha=-1/(this.fadeTime*MemoryMatch.fps),a.endAlpha=0},b.closeComplete=function(){null!=this.stateCompleteCallback&&this.stateCompleteCallback("close"),this.killObject()},b.setupIcon=function(){var a,b,c;null!=this.icon?(a=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),b=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,this.icon),c=new createjs.Sprite(a,this.icon),c.setTransform(.02*this.width,.5*(this.height-b.height),1,1),c.framerate=1,c.name="icon",this.iconWidth=b.width,this.groupDisplayObject.addChild(c)):this.iconWidth=0},b.setupTitleText=function(){var a;a=new createjs.Text(this.title,MemoryMatch.getScaledFontSize(this.titleFontSize)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.width,a.y=.1*this.height,a.lineWidth=.8*this.width,a.maxWidth=.8*this.width,a.name="title",this.groupDisplayObject.addChild(a)},b.setupMessageText=function(){var a;a=new createjs.Text(this.message,MemoryMatch.getScaledFontSize(this.messageFontSize)+" "+this.messageFont,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=this.iconWidth+.5*(this.width-this.iconWidth),a.y=.34*this.height,a.lineWidth=.9*(this.width-this.iconWidth),a.maxWidth=.9*(this.width-this.iconWidth),a.lineHeight=1.5*a.getMeasuredLineHeight(),a.name="message",this.groupDisplayObject.addChild(a)},b.isShowing=function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},b.killObject=function(){this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.stateCompleteCallback=null,this.parentDisplayObject=null,this.groupDisplayObject=null},MemoryMatch.InfoPopup=a}(),MemoryMatch=MemoryMatch||{},MemoryMatch.LevelButton=function(a){var b=new createjs.Container;return b.callback=null,b.width=0,b.height=0,b.gameNumber=0,b.landNumber=0,b.starsEarned=0,b.maxStars=3,b.showStarsForChallenge=!1,b.bestScore=0,b.wasPlayed=!1,b.isLocked=!0,b.isChallengeGame=!1,b.userBeatChallenge=!1,b.buttonScale=1,b.addShadow=!1,b.spriteData=new createjs.SpriteSheet(MemoryMatch.GameSetup.mapSpritesheetFrames),b.shadowSource=null,b.nextYPosition=0,b.primaryColor="ffffff",b.secondaryColor="000000",b.liteColor="C0C0C0",b.buttonPrimaryColorFilter=null,b.buttonSecondaryColorFilter=null,b.changeEventNotification=null,b.setParameters=function(a){null!=a&&(null!=a.gameNumber&&(b.gameNumber=a.gameNumber),null!=a.landNumber&&(b.landNumber=a.landNumber),null!=a.starsEarned&&(b.starsEarned=a.starsEarned),null!=a.bestScore&&(b.bestScore=a.bestScore),null!=a.wasPlayed&&(b.wasPlayed=a.wasPlayed),null!=a.isLocked&&(b.isLocked=a.isLocked),null!=a.primaryColor&&(b.primaryColor=a.primaryColor),null!=a.secondaryColor&&(b.secondaryColor=a.secondaryColor),null!=a.liteColor&&(b.liteColor=a.liteColor),null!=a.scale&&(b.buttonScale=a.scale),null!=a.addShadow&&(b.addShadow=a.addShadow,b.shadowSource=new createjs.Shadow("#000000",2,2,10)),null!=a.isChallengeGame&&(b.isChallengeGame=a.isChallengeGame,b.isChallengeGame&&(b.userBeatChallenge=MemoryMatch.didUserBeatChallenge(b.landNumber))),null!=a.callback&&(b.callback=a.callback),null!=a.changeEventNotification&&(b.changeEventNotification=a.changeEventNotification))},b.createGameNumberText=function(){var a=this.gameNumber.toString(),b=this.isChallengeGame?this.primaryColor:MemoryMatch.GameSetup.mapLevelColor,c=this.isChallengeGame?56:44,d=new createjs.Text(a,MemoryMatch.getScaledFontSize(c)+" "+MemoryMatch.GameSetup.guiBoldFontName,b),e=this.getChildByName("button"),f=d.getMeasuredLineHeight(),g="Win32"==MemoryMatch.platform;d.textAlign="center",d.x=.5*this.width,d.maxWidth=this.width,d.color=b,d.visible=!0,d.name="gameNumber",this.isChallengeGame?(d.visible=!this.isLocked&&!this.userBeatChallenge,d.y=e.y+.54*(e.height-f)):(d.visible=!this.isLocked,d.y=e.y+.6666*(e.height-f)),g&&(d.y*=.9),this.addShadow&&null!=this.shadowSource&&(d.shadow=this.shadowSource.clone()),this.addChild(d)},b.createBestScoreText=function(){var a=new createjs.Text(MemoryMatch.formatNumberWithGroups(this.bestScore),MemoryMatch.getScaledFontSize(36)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.mapLevelColor);a.textAlign="center",a.x=.5*this.width,a.y=this.nextYPosition,a.maxWidth=this.width,a.visible=!(this.isLocked||!this.wasPlayed),a.name="bestScore",this.addShadow&&null!=this.shadowSource&&(a.shadow=b.shadowSource.clone()),this.addChild(a),this.height=a.y+2*a.getMeasuredLineHeight()},b.createLockIcon=function(){var a,b="levelSelectLock",c=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[b][0]][2],d=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[b][0]][3],e=this.getChildByName("button"),f=.5*c,g=.5*d,h=15;a=new createjs.Sprite(this.spriteData,b),a.setTransform(.5*this.width,e.y+.5*e.height,1,1,h,0,0,f,g),a.framerate=0,a.name="lock",a.visible=this.isLocked,this.isChallengeGame&&(a.filters=[this.buttonPrimaryColorFilter],a.cache(0,0,c,d)),this.addChild(a)},b.createGemIcon=function(){var a,b="mapAwardLand"+this.landNumber.toString(),c=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.mapSpritesheetFrames,b),d=this.getChildByName("button"),e=.5*c.width,f=.5*c.height,g=0;a=new createjs.Sprite(this.spriteData,b),a.setTransform(.5*this.width,d.y+.5*d.height,1,1,g,0,0,e,f),a.framerate=0,a.name="award",a.visible=!this.isLocked&&this.userBeatChallenge,this.addChild(a)},b.createStars=function(){var a,b,c,d,e,f="mapStarUnearned",g=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[f][0]][2],h=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[f][0]][3],i=.5*g,j=2*h,k=j;for(a=0;a<this.maxStars;a++)f=a<this.starsEarned?"mapStarEarned":"mapStarUnearned",0==a?(d=-45,c=1.5*g):2==a?d=45:(d=0,c+=.05*g),b=new createjs.Sprite(this.spriteData,f),b.setTransform(c,k,1,1,d,0,0,i,j),b.framerate=0,b.name="star"+(a+1),e=this.isChallengeGame?!this.isLocked&&this.showStarsForChallenge:!this.isLocked,b.visible=e,this.addChild(b);this.nextYPosition=1.1*h,this.width=3*g},b.showStars=function(){var a,b,c;for(a=0;a<this.maxStars;a++)b=this.getChildByName("star"+(a+1)),null!=b&&(b.gotoAndStop(a<this.starsEarned?"mapStarEarned":"mapStarUnearned"),c=this.isChallengeGame?!this.isLocked&&this.showStarsForChallenge:!this.isLocked,b.visible=c);this.changeEvent()},b.removeStars=function(){var a,b;for(a=0;a<this.maxStars;a++)b=this.getChildByName("star"+a),null!=b&&this.removeChild(b)},b.createButton=function(){var a,c,d,e,f,g,h,i,j,k=null,l=MemoryMatch.htmlColorStringToColorArray(this.primaryColor),m=MemoryMatch.htmlColorStringToColorArray(this.secondaryColor);this.buttonPrimaryColorFilter=new createjs.ColorFilter(0,0,0,1,l[0],l[1],l[2],0),this.buttonSecondaryColorFilter=new createjs.ColorFilter(0,0,0,1,m[0],m[1],m[2],0),b.createStars(),this.isChallengeGame?(k="bossBase",d="bossCircle",a="bossRing",c="bossRingOver"):(k="levelSelectCircle",a="levelSelectRing",c="levelSelectRingOver",d=null),h=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[k][0]][2]*this.buttonScale,i=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[k][0]][3]*this.buttonScale,this.width<h&&(this.width=h),e=new createjs.Sprite(this.spriteData,k),e.setTransform(.5*this.width,this.nextYPosition,this.buttonScale,this.buttonScale,0,0,0,.5*h,0),e.framerate=0,e.name="button",e.filters=[this.buttonSecondaryColorFilter],e.cache(0,0,h,i),e.width=h,e.height=i,this.addChildAt(e,0),null!=d&&(f=new createjs.Sprite(this.spriteData,d),f.setTransform(.5*this.width,this.nextYPosition,this.buttonScale,this.buttonScale,0,0,0,.5*h,0),f.framerate=0,f.name="circle",f.visible=!(this.isLocked||!this.wasPlayed)||this.isChallengeGame,this.addChild(f)),f=new createjs.Sprite(this.spriteData,a),f.setTransform(.5*this.width,this.nextYPosition,this.buttonScale,this.buttonScale,0,0,0,.5*h,0),f.framerate=0,f.name="ring",this.isChallengeGame&&(f.filters=[this.buttonPrimaryColorFilter],f.cache(0,0,h,i)),f.visible=!(this.isLocked||!this.wasPlayed)||this.isChallengeGame,this.addChild(f),g=new createjs.Sprite(this.spriteData,c),g.setTransform(.5*this.width,this.nextYPosition,this.buttonScale,this.buttonScale,0,0,0,.5*h,0),g.visible=!1,g.name="rollover",this.isChallengeGame&&(g.filters=[this.buttonPrimaryColorFilter],g.cache(0,0,h,i)),this.addChild(g),this.nextYPosition+=i,b.createLockIcon(),this.isChallengeGame&&b.createGemIcon(),b.createGameNumberText(),b.createBestScoreText(),b.cache(0,0,this.width,this.height),j=new createjs.Shape,j.graphics.beginFill("#ff0000").drawRect(0,0,this.width,this.height),j.cache(0,0,this.width,this.height),b.hitArea=j,this.isLocked||this.setEnabled(!0)},b.refreshButton=function(a){this.setParameters(a),this.coordinateDisplayInformation()},b.onLevelSelect=function(a){var b;null!=a&&null!=a.target&&(b=a.target,null==b.callback&&(b=a.target.parent),null!=b.callback&&(MemoryMatch.triggerSoundFx("soundTap"),b.callback(b.gameNumber)))},b.onRollover=function(){var a=this.getChildByName("rollover"),b=this.getChildByName("gameNumber");null!=a&&(a.visible=!0),null!=b&&(b.color=this.liteColor),this.changeEvent()},b.onRollout=function(){var a=this.getChildByName("rollover"),b=this.getChildByName("gameNumber");null!=a&&(a.visible=!1),null!=b&&(b.color=this.isChallengeGame?this.primaryColor:MemoryMatch.GameSetup.mapLevelColor),this.changeEvent()},b.onTouchDown=function(a){MemoryMatch.isTouchDevice&&this.onRollover(a)},b.onTouchUp=function(a){MemoryMatch.isTouchDevice&&this.onRollout(a)},b.show=function(a){this.visible=a,this.changeEvent()},b.setGameNumber=function(a){var b=this.getChildByName("gameNumber");this.gameNumber=a,null!=b&&(b.text=this.gameNumber.toString())},b.setStarsEarned=function(a){this.showStars(!1),0>a?a=0:a>this.maxStars&&(a=this.maxStars),this.starsEarned=a,a>=0&&this.showStars(!0)},b.setBestScore=function(a){this.bestScore=a,this.coordinateDisplayInformation()},b.setIsLocked=function(a){this.isLocked=a,this.coordinateDisplayInformation()},b.setWasPlayed=function(a){this.wasPlayed=a,this.coordinateDisplayInformation()},b.coordinateDisplayInformation=function(){var a,b=this.getChildByName("bestScore"),c=this.getChildByName("gameNumber"),d=this.getChildByName("ring"),e=this.getChildByName("lock"),f=!1;(1==this.gameNumber||this.wasPlayed)&&(this.isLocked=!1),this.isChallengeGame&&(a=this.getChildByName("award"),null!=a&&(a.visible=!1)),this.isLocked?(this.setEnabled(!1),e.visible=!0,b.visible=!1,c.visible=!1,d.visible=this.isChallengeGame):(this.setEnabled(!0),e.visible=!1,this.wasPlayed?(this.isChallengeGame&&this.userBeatChallenge?null!=a&&(a.visible=!0,c.visible=!1):c.visible=!0,b.visible=!0,b.text=MemoryMatch.formatNumberWithGroups(this.bestScore),d.visible=!0,f=this.isChallengeGame?!this.isLocked&&this.showStarsForChallenge:!this.isLocked):(c.visible=!0,b.visible=!1,d.visible=!1)),this.showStars(f),f&&this.setStarsEarned(this.starsEarned),this.changeEvent(),MemoryMatch.stageUpdated=!0},b.setEnabled=function(a){a?(b.cursor="pointer",this.addEventListener("click",this.onLevelSelect),this.addEventListener("rollover",this.onRollover.bind(this)),this.addEventListener("rollout",this.onRollout.bind(this)),this.addEventListener("mousedown",this.onTouchDown.bind(this)),this.addEventListener("pressup",this.onTouchUp.bind(this)),this.addEventListener("rollout",this.onTouchUp.bind(this))):(b.cursor=null,this.removeEventListener("click",this.onLevelSelect),this.removeEventListener("rollover",this.onRollover.bind(this)),this.removeEventListener("rollout",this.onRollout.bind(this)),this.removeEventListener("mousedown",this.onTouchDown.bind(this)),this.removeEventListener("pressup",this.onTouchUp.bind(this)),this.removeEventListener("rollout",this.onTouchUp.bind(this)))},b.kill=function(){var a,b,c,d=this.getChildByName("button");this.setEnabled(!1),this.isChallengeGame&&(a=this.getChildByName("ring"),null!=a&&a.uncache(),b=this.getChildByName("rollover"),null!=b&&b.uncache(),c=this.getChildByName("lock"),null!=c&&c.uncache()),null!=d&&d.uncache(),this.shadowSource=null,this.callback=null,this.spriteData=null,this.uncache(),this.removeAllChildren()},b.toString=function(){return"[LevelButton] gameNumber: "+b.gameNumber.toString()},b.changeEvent=function(){this.updateCache(),MemoryMatch.stageUpdated=!0,null!=this.changeEventNotification&&this.changeEventNotification()},b.setParameters(a),b.createButton(),b},MemoryMatch=MemoryMatch||{},MemoryMatch.LevelIntroduction={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,boardContainer:null,spriteData:null,backgroundWidth:0,backgroundHeight:0,isEnabled:!1,animate:!0,marginTop:0,marginLeft:0,buttonInstances:null,closeEventType:null,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,gameId:0,level:0,gameNumber:0,captionTextFontSize:42,timerId:null,demoTimer:0,demoAnimationState:1,setup:function(a,b,c,d,e){this.stateCompleteCallback=b,this.parentDisplayObject=a,this.buttonInstances=[],this.isEnabled=!1,this.gameId=c,this.level=d,this.gameNumber=e
},buildScreen:function(a,b){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.parentDisplayObject.addChild(this.groupDisplayObject),this.spriteData=new createjs.SpriteSheet(MemoryMatch.GameSetup.guiSpritesheet1Frames),this.setColorFilters(),this.showBackgroundImage(this.parentDisplayObject.canvas),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleText(),this.setupLayoutForGameId(this.gameId),this.setupButtons(),void 0==a&&(a=!1),void 0===b&&(b=!0),this.animate=b,a&&this.start())},start:function(){var a,b=.3;MemoryMatch.showingDemo=!0,this.demoAnimationState=1,this.animate?(this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,0,0,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),a=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*b,!1,null,this.startAnimationPhaseTwo.bind(this)),a.endYScale=a.endXScale=1.08,a.vYScale=a.vXScale=a.endXScale/(b*MemoryMatch.fps)):(this.isEnabled=!0,this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),this.demoAnimationStep())},startAnimationPhaseTwo:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.startAnimationComplete.bind(this));b.endYScale=b.endXScale=1,b.vYScale=b.vXScale=-1*(b.endXScale/(a*MemoryMatch.fps)),MemoryMatch.stageUpdated=!0},startAnimationComplete:function(){this.isEnabled=!0,MemoryMatch.stageUpdated=!0,this.scheduleDemoAnimation(1e3)},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps),null!=this.backgroundSoundInstance&&(this.backgroundSoundInstance.stop(),this.backgroundSoundInstance=null)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){this.killScreen()},close:function(){MemoryMatch.showingDemo=!1,this.isEnabled=!1,this.isShowing()&&(null!==this.stateCompleteCallback&&this.stateCompleteCallback(this.closeEventType,this.level,this.gameNumber),this.closeStartAnimation())},onClickHome:function(){MemoryMatch.LevelIntroduction.isEnabled&&(this.closeEventType="home",this.close())},onClickContinue:function(){MemoryMatch.LevelIntroduction.isEnabled&&(this.closeEventType="continue",this.close())},onClickBackground:function(){},showBackgroundImage:function(a){var b,c,d,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);b=e.width>a.width?a.width/e.width:1,c=e.height>a.height?a.height/e.height:1,f.alpha=1,f.scaleX=b,f.scaleY=c,d=new createjs.Shape,d.graphics.beginFill("#CCCCCC").drawRect((a.width-e.width)*-.5,(a.height-e.height)*-.5,a.width,a.height),d.alpha=.1,d.addEventListener("click",this.onClickBackground),this.groupDisplayObject.addChild(d),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*b,this.backgroundHeight=e.height*c,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupTitleText:function(){var a,b,c=MemoryMatch.getGameData(!1),d=1,e=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].iconPopup,f=new createjs.Sprite(this.spriteData,e),g=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,e);f.setTransform(this.marginLeft-.25*g.width,this.marginTop-.25*g.height,d,d),f.framerate=1,f.name="icon",this.groupDisplayObject.addChild(f),a=new createjs.Text(c.levelName,MemoryMatch.getScaledFontSize(58)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a),b=a.y+2*a.getMeasuredLineHeight(),a=new createjs.Text(c.levelIntro,MemoryMatch.getScaledFontSize(46)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=b,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,a.lineHeight=1.5*a.getMeasuredLineHeight(),this.groupDisplayObject.addChild(a)},setupLayoutForGameId:function(){var a,b=this.groupDisplayObject,c=MemoryMatch.GameSetup.levels[this.level-1];switch(a=c.tipId){case 1:this.setupLayoutForConcentration(b);break;case 2:this.setupLayoutForChains(b);break;case 3:this.setupLayoutForNemesis(b);break;case 4:this.setupLayoutForHaystack(b)}},setupLayoutForConcentration:function(a){var b,c,d=.4*this.backgroundHeight,e=.58*this.backgroundHeight;this.buildDemoBoard(a,.28*this.backgroundWidth,.48*this.backgroundHeight),c=MemoryMatch.GameSetup.GUIStrings.demoTextMatchLikeCards,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.25*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.setupMatchCountTextField(a,.5*(this.backgroundWidth-300*MemoryMatch.stageScaleFactor),d,300*MemoryMatch.stageScaleFactor,144*MemoryMatch.stageScaleFactor),c=MemoryMatch.GameSetup.GUIStrings.demoTextClearBoard,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.setupGameTimerTextField(a,.86*(this.backgroundWidth-300*MemoryMatch.stageScaleFactor),d),c=MemoryMatch.GameSetup.GUIStrings.demoTextPlayQuick,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.75*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b)},setupLayoutForChains:function(a){var b,c,d=.4*this.backgroundHeight,e=.58*this.backgroundHeight;this.buildDemoBoard(a,.28*this.backgroundWidth,.48*this.backgroundHeight),c=MemoryMatch.GameSetup.GUIStrings.demoTextStudyBoard,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.25*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.showTimerCountdown(a,.5*this.backgroundWidth,d),c=MemoryMatch.GameSetup.GUIStrings.demoTextOnlyAFewSeconds,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.showChainsPath(a,.75*this.backgroundWidth,d,.5),c=MemoryMatch.GameSetup.GUIStrings.demoTextFindPairs,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.75*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b)},setupLayoutForNemesis:function(a){var b,c,d=.4*this.backgroundHeight,e=.58*this.backgroundHeight;this.buildDemoBoard(a,.28*this.backgroundWidth,.48*this.backgroundHeight),c=MemoryMatch.GameSetup.GUIStrings.demoTextMatchLikeCards,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.25*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.setupMatchCountTextField(a,.5*(this.backgroundWidth-300*MemoryMatch.stageScaleFactor),d,300*MemoryMatch.stageScaleFactor,144*MemoryMatch.stageScaleFactor),c=MemoryMatch.GameSetup.GUIStrings.demoTextClearBoard,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),MemoryMatch.Nemesis.layoutNemesisDemo(a,.88*this.backgroundWidth,d,.3333),c=MemoryMatch.GameSetup.GUIStrings.demoTextNemesisGoal,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.8*this.backgroundWidth,b.y=e,b.lineWidth=.25*this.backgroundWidth,b.maxWidth=.25*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b)},setupLayoutForHaystack:function(a){var b,c,d=.4*this.backgroundHeight,e=.58*this.backgroundHeight;this.buildDemoBoard(a,.28*this.backgroundWidth,.48*this.backgroundHeight),c=MemoryMatch.GameSetup.GUIStrings.demoTextRememberLocation,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.25*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.showTimerCountdown(a,.5*this.backgroundWidth,d),c=MemoryMatch.GameSetup.GUIStrings.demoTextOnlyAFewSeconds,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.5*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b),this.setupMatchCountTextField(a,.8*(this.backgroundWidth-300*MemoryMatch.stageScaleFactor),d,300*MemoryMatch.stageScaleFactor,144*MemoryMatch.stageScaleFactor),c=MemoryMatch.GameSetup.GUIStrings.demoTextHaystackGoal,b=new createjs.Text(c,MemoryMatch.getScaledFontSize(this.captionTextFontSize)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),b.textAlign="center",b.x=.75*this.backgroundWidth,b.y=e,b.lineWidth=.2*this.backgroundWidth,b.maxWidth=.2*this.backgroundWidth,b.lineHeight=1.5*b.getMeasuredLineHeight(),a.addChild(b)},setupMatchCountTextField:function(a,b,c,d,e){var f,g,h;h=new createjs.Shape,h.graphics.beginFill("#000000").drawRect(0,0,d,e),h.alpha=.2,h.setTransform(b,c),a.addChild(h),f=new createjs.Text("Misses",MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),f.textAlign="right",f.textBaseline="middle",f.setTransform(b+.65*d,c+.5*e),f.maxWidth=.75*d,a.addChild(f),g=new createjs.Text("2",MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiAlertFontColor),g.textAlign="left",g.textBaseline="middle",g.setTransform(b+.7*d,c+.55*e),g.maxWidth=.25*d,g.name="matchCounter",a.addChild(g),MemoryMatch.stageUpdated=!0},setupGameTimerTextField:function(a,b,c){var d,e=220*MemoryMatch.stageScaleFactor,f=new createjs.Text("0:00",MemoryMatch.getScaledFontSize(56)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor);f.textAlign="left",f.textBaseline="middle",d=1.3*f.getMeasuredLineHeight(),f.setTransform(b,c+d),f.maxWidth=e,f.name="gameTimer",a.addChild(f)},showTimerCountdown:function(a,b,c){var d,e,f,g,h,i,j,k,l;e="Study",this.demoTimer=5,h=new createjs.Text(e,MemoryMatch.getScaledFontSize(32)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),h.textAlign="center",h.name="title",k=new createjs.Text(this.demoTimer.toString(),MemoryMatch.getScaledFontSize(56)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),k.textAlign="center",k.name="studyTimer",i=h.getBounds(),l=k.getBounds(),f=1.2*Math.max(i.width,l.width),g=i.height+1.1*l.height,h.x=.5*f,k.x=.5*f,h.y=.1*g,k.y=h.y+i.height,j=new createjs.Shape,j.graphics.beginFill("#000000").drawRoundRect(0,0,f,g,8),j.alpha=.2,j.name="background",d=new createjs.Container,d.addChild(j),d.addChild(h),d.addChild(k),d.setTransform(b-.5*f,c),d.name="studyGroup",a.addChild(d),MemoryMatch.stageUpdated=!0},showChainsPath:function(a,b,c,d){var e,f,g,h,i,j,k=MemoryMatch.GameSetup.guiSpritesheet2Frames,l=new createjs.SpriteSheet(k),m=2,n=new createjs.Container,o="chainCardSlot1",p=MemoryMatch.getSpriteFrameSize(k,o),q=0,r=new createjs.Sprite(l,o),s=new createjs.Text("1",MemoryMatch.getScaledFontSize(64)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),t=m*(p.height+q);for(r.framerate=1,s.textAlign="center",s.textBaseline="middle",g=p.height,q=.25*g,null!=this.secondaryColorValue&&(e=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),f=new createjs.ColorFilter(.5,.5,.5,1,e[0],e[1],e[2],0)),h=0;m>h;h++){switch(i=r.clone(),j=s.clone(),h){case 0:o="chainCardSlot1";break;case 1:o="chainCardSlot2";break;default:o="chainCardSlot3"}i.gotoAndStop(o),i.name="chainstile"+h,p=MemoryMatch.getSpriteFrameSize(k,o),i.setTransform(p.width*-.5,(g+q)*h,1,1,0,0,0,0,0),i.width=p.width,i.height=p.height,null!=f&&(i.filters=[f],i.cache(0,0,i.width,i.height)),j.name="chainstext"+h,j.text=(h+1).toString(),j.setTransform(0,i.y+.5*p.height,1,1,0,0,0,0,0),n.addChild(i),n.addChild(j)}n.setTransform(b,c-.2*t,d,d,0,0,0,0,0),a.addChild(n),n.name="chainsGroup"},showChainsMatches:function(a,b){var c,d,e,f,g,h,i,j,k=MemoryMatch.GameSetup.guiSpritesheet2Frames,l=0,m=0,n=new createjs.SpriteSheet(k),o="chainCard",p=MemoryMatch.getSpriteFrameSize(k,o),q=0,r=new createjs.Sprite(n,o),s=250;if(h=a.getChildByName("chainsGroup"),null!=h){if(g=h.getChildByName("chainstile0"),null!=g)for(d=0,l=g.x+.5*(g.width-p.width),m=g.y+.5*(g.height-p.height),c=0;b>c;c++)q++,e="chaincard"+q,f=h.getChildByName(e),null==f?(f=r.clone(),f.name=e,h.addChild(f),f.visible=!1,j=s+100*c,i=MemoryMatch.AnimationHandler.addToAnimationQueue(f,s+100*c,0,!1,null,null),i.showAtBegin=!0):f.visible=!0,f.setTransform(l+d,m-d),d+=4*MemoryMatch.stageScaleFactor;MemoryMatch.stageUpdated=!0}},clearChainsMatches:function(a,b){var c,d;if(d=a.getChildByName("chainsGroup"),null!=d){for(;b>0;)c=d.getChildByName("chaincard"+b),null!=c&&d.removeChild(c),b--;MemoryMatch.stageUpdated=!0}},setupButtons:function(){var a,b="gameOverButtonBase",c=1,d=MemoryMatch.getSpriteFrameWidth(MemoryMatch.GameSetup.guiSpritesheet1Frames,b)*c,e=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,f=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor,g=0,h=0,i=2*(d+g)-g,j=.5*(this.backgroundWidth-i),k=.75*this.backgroundHeight;a=MemoryMatch.GUIButton({name:"home",tag:++h,disabled:!1,callback:this.onClickHome.bind(this),baseUp:b,buttonBaseColor:e,buttonBaseRollOverColor:f,iconUp:"gameOverMenuIcon",iconOver:"gameOverMenuDownIcon",iconDown:"gameOverMenuDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),j+=d+g,a=MemoryMatch.GUIButton({name:"continue",tag:++h,disabled:!1,callback:this.onClickContinue.bind(this),baseUp:b,buttonBaseColor:e,buttonBaseRollOverColor:f,iconUp:"gameOverNextIcon",iconOver:"gameOverNextDownIcon",iconDown:"gameOverNextDownIcon"}),a.setTransform(j,k,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a)},flashContinueButton:function(){this.buttonInstances.length>1&&(this.buttonInstances[1].setFlashing(!0),MemoryMatch.stageUpdated=!0)},buildDemoBoard:function(a,b,c){var d,e,f,g,h,i=4*MemoryMatch.cardMargin,j=2,k=2,l=.25,m=[3,4,4,3],n=new createjs.Container,o=(MemoryMatch.cardWidth+i)*j*.5,p=(MemoryMatch.cardHeight+i)*k*.5;for(d=new createjs.SpriteSheet({images:[MemoryMatch.imageSheetImage],frames:{regX:0,regY:0,width:MemoryMatch.cardWidth,height:MemoryMatch.cardHeight,count:0}}),e=0,f=0;k>f;f++)for(g=0;j>g;g++)h=MemoryMatch.makeCard(e,m[e],d),h.isEnabled=!1,h.setTransform(g*(MemoryMatch.cardWidth+i),f*(MemoryMatch.cardHeight+i)),n.addChild(h),h.showCardDemo(),e++;n.setTransform(b,c,l,l,0,0,0,o,p),a.addChild(n),this.boardContainer=n},scheduleDemoAnimation:function(a){this.timerId=window.setTimeout(this.demoAnimationStep.bind(this),a)},demoAnimationStep:function(){switch(this.gameId){case 2:this.demoAnimationStepForHaystack();break;case 4:this.demoAnimationStepForConcentration();break;case 5:this.demoAnimationStepForChains();break;case 7:this.demoAnimationStepForNemesis()}MemoryMatch.stageUpdated=!0,this.scheduleDemoAnimation(1e3)},demoAnimationStepForConcentration:function(){var a,b;switch(this.demoAnimationState){case 1:a=this.boardContainer.getChildAt(0),null!=a&&a.flip();break;case 2:a=this.boardContainer.getChildAt(3),null!=a&&a.flip();break;case 3:break;case 4:a=this.boardContainer.getChildAt(0),null!=a&&a.flipBack(),a=this.boardContainer.getChildAt(3),null!=a&&a.flipBack(),b=this.groupDisplayObject.getChildByName("matchCounter"),null!=b&&(b.alpha=.1);break;case 5:b=this.groupDisplayObject.getChildByName("matchCounter"),null!=b&&(b.alpha=1);break;case 6:b=this.groupDisplayObject.getChildByName("matchCounter"),null!=b&&(b.alpha=.1);break;case 7:b=this.groupDisplayObject.getChildByName("matchCounter"),null!=b&&(b.alpha=1);break;default:this.demoAnimationState=0,this.flashContinueButton()}b=this.groupDisplayObject.getChildByName("gameTimer"),null!=b&&(this.demoTimer+=1001,this.demoTimer>6e3&&(this.demoTimer=0),b.text=MemoryMatch.formatTimeAsString(this.demoTimer,!0,!1)),this.demoAnimationState++},demoAnimationStepForChains:function(){var a,b,c;switch(this.demoAnimationState){case 1:for(b=0;4>b;b++)a=this.boardContainer.getChildAt(b),null!=a&&a.flip();break;case 2:break;case 3:for(b=0;4>b;b++)a=this.boardContainer.getChildAt(b),null!=a&&a.flipBack();break;case 4:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1),this.showChainsMatches(this.groupDisplayObject,3);break;case 5:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=.1);break;case 6:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1);break;case 7:this.clearChainsMatches(this.groupDisplayObject,3);break;default:this.demoAnimationState=0,this.flashContinueButton()}c=this.groupDisplayObject.getChildByName("studyGroup"),null!=c&&(c=c.getChildByName("studyTimer"),null!=c&&(this.demoTimer-=1,this.demoTimer<0&&(this.demoTimer=5),c.text=this.demoTimer.toString())),this.demoAnimationState++},demoAnimationStepForNemesis:function(){var a,b,c;switch(this.demoAnimationState){case 1:a=this.boardContainer.getChildAt(2),null!=a&&a.flip();break;case 2:a=this.boardContainer.getChildAt(1),null!=a&&a.flip();break;case 3:break;case 4:a=this.boardContainer.getChildAt(1),null!=a&&a.flipBack(),a=this.boardContainer.getChildAt(2),null!=a&&a.flipBack(),c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=.2);break;case 5:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1);break;case 6:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=.2);break;case 7:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1);break;case 8:case 9:case 10:case 11:case 12:b=this.demoAnimationState-7,MemoryMatch.Nemesis.moveNemesisCharacterDemo(this.groupDisplayObject,b);break;default:this.demoAnimationState=0,this.flashContinueButton()}this.demoAnimationState++},demoAnimationStepForHaystack:function(){var a,b,c;switch(this.demoAnimationState){case 1:for(b=0;4>b;b++)a=this.boardContainer.getChildAt(b),null!=a&&a.flip();break;case 2:break;case 3:for(b=0;4>b;b++)a=this.boardContainer.getChildAt(b),null!=a&&a.flipBack();break;case 4:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1);break;case 5:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=.1);break;case 6:c=this.groupDisplayObject.getChildByName("matchCounter"),null!=c&&(c.alpha=1);break;default:this.demoAnimationState=0,this.flashContinueButton()}c=this.groupDisplayObject.getChildByName("studyGroup"),null!=c&&(c=c.getChildByName("studyTimer"),null!=c&&(this.demoTimer-=1,this.demoTimer<0&&(this.demoTimer=5),c.text=this.demoTimer.toString())),this.demoAnimationState++},isShowing:function(){return null!=this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a;for(null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.primaryColorFilter=null,this.secondaryColorFilter=null,a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].kill();this.buttonInstances=null,this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.stateCompleteCallback=null,this.spriteData=null,this.boardContainer=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.MainMenu={stateCompleteCallback:null,levelData:null,parentDisplayObject:null,groupDisplayObject:null,awardSprite:null,spriteData:null,mapSpriteFrames:null,backgroundWidth:0,backgroundHeight:0,width:0,height:0,animate:!0,connectorShape:null,setup:function(a,b,c){this.levelData=b,this.stateCompleteCallback=c,this.parentDisplayObject=a,this.backgroundWidth=a.canvas.width,this.backgroundHeight=a.canvas.height,this.mapSpriteFrames=MemoryMatch.GameSetup.mapSpritesheetFrames,this.spriteData=new createjs.SpriteSheet(this.mapSpriteFrames)},buildScreen:function(a){this.width=this.parentDisplayObject.canvas.width,this.height=this.parentDisplayObject.canvas.height,this.groupDisplayObject=new createjs.Container,this.parentDisplayObject.addChild(this.groupDisplayObject),this.setupBackgroundAndGameLogo(),this.setupLandImages(),this.setupAward(),this.setupLevelButtons(),null==a&&(a=!1),a&&this.start(),this.groupDisplayObject.setTransform(0,0,1,1),this.animate&&(this.groupDisplayObject.alpha=0),this.groupDisplayObject.cache(0,0,this.width,this.height)},start:function(){var a,b;this.animate&&(a=1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,0,!1,null,this.onStartFadeInComplete.bind(this)),b.endAlpha=1,b.vAlpha=a/MemoryMatch.fps),null!=this.stateCompleteCallback},onStartFadeInComplete:function(){MemoryMatch.shouldAskUserToBookmarkApp()&&MemoryMatch.MainMenu.showBookmarkAppPrompt()},showBookmarkAppPrompt:function(){{var a=MemoryMatch.stageScaleFactor<.3?1.4:1;new MemoryMatch.InfoPopup(MemoryMatch.stage,!0,{title:MemoryMatch.GameSetup.GUIStrings.bookmarkTitle,message:MemoryMatch.GameSetup.GUIStrings.bookmarkMessage,x:.5*MemoryMatch.stageWidth,y:.14*MemoryMatch.stageHeight*a,duration:5.5,backgroundColor:MemoryMatch.GameSetup.achievementBackgroundColor,borderColor:MemoryMatch.GameSetup.achievementBorderColor,titleFontSize:64*a,messageFontSize:52*a,messageFont:"Arial",width:1280*a,height:380*a,icon:"iosShare"})}},onContinue:function(a){null!=MemoryMatch.MainMenu.stateCompleteCallback&&MemoryMatch.MainMenu.stateCompleteCallback(a),MemoryMatch.MainMenu.killScreen()},onClickedAward:function(){MemoryMatch.triggerSoundFx("soundTap"),MemoryMatch.AwardsPopup.setup(MemoryMatch.stage,null),MemoryMatch.AwardsPopup.buildScreen(!0,!0)},setupBackgroundAndGameLogo:function(){var a="gameLogo",b=new createjs.Sprite(this.spriteData,a),c=MemoryMatch.GameSetup.mapLogoPosition,d=MemoryMatch.getSpriteFrameSize(this.mapSpriteFrames,a);null==c?(c={x:.5*this.width,y:.5*this.height},b.setTransform(c.x,c.y,1,1,0,0,0,.5*d.width,.5*d.height)):b.setTransform(c.x*MemoryMatch.stageScaleFactor,c.y*MemoryMatch.stageScaleFactor,1,1,0,0,0,.5*d.width,.5*d.height),b.framerate=0,this.groupDisplayObject.addChild(b)},setupLandImages:function(){var a,b,c,d,e;for(a=0;a<MemoryMatch.GameSetup.levels.length;a++)b=MemoryMatch.GameSetup.levels[a].mapImage,null!=b&&b.length>0&&(c=MemoryMatch.GameSetup.levels[a].mapPosition,d=new createjs.Sprite(this.spriteData,b),null!=d&&(e=MemoryMatch.getSpriteFrameSize(this.mapSpriteFrames,b),d.setTransform(c.x*MemoryMatch.stageScaleFactor,c.y*MemoryMatch.stageScaleFactor,1,1,0,0,0,.5*e.width,.5*e.height),d.framerate=0,this.groupDisplayObject.addChild(d)));this.showSpecialCrap()},setupAward:function(){var a,b,c,d,e,f="mapTrophy",g=new createjs.Sprite(this.spriteData,f),h=MemoryMatch.GameSetup.mapAwardPosition,i=MemoryMatch.getSpriteFrameSize(this.mapSpriteFrames,f),j=MemoryMatch.GameSetup.levels.length;for(a=null==h?{x:.5*(this.width-i.width)|0,y:.5*(this.height-i.height)|0}:{x:h.x*MemoryMatch.stageScaleFactor|0,y:h.y*MemoryMatch.stageScaleFactor|0},g.setTransform(a.x,a.y,1,1,0,0,0,.5*i.width|0,.5*i.height|0),g.framerate=0,g.cursor="pointer",g.addEventListener("click",this.onClickedAward.bind(this)),this.groupDisplayObject.addChild(g),this.awardSprite=g,f="mapAwardLand",a.x-=.5*i.width|0,a.y-=.5*i.height|0,b=0;j>b;b++)e=b+1,d=f+e.toString(),g=new createjs.Sprite(this.spriteData,d),c=MemoryMatch.GameSetup.levels[b].gemPosition,g.setTransform(a.x+c.x*MemoryMatch.stageScaleFactor|0,a.y+c.y*MemoryMatch.stageScaleFactor|0),g.name=d,g.visible=MemoryMatch.didUserBeatChallenge(e),this.groupDisplayObject.addChild(g)},showAwardedGems:function(){var a,b,c,d="mapAwardLand",e=MemoryMatch.GameSetup.levels.length;for(c=0;e>c;c++)a=c+1,d="mapAwardLand"+a.toString(),b=this.groupDisplayObject.getChildByName(d),null!=b&&(b.visible=MemoryMatch.didUserBeatChallenge(a))},setupLevelButtons:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=MemoryMatch.GameSetup.mapLevelPositions,w=MemoryMatch.GameSetup.levels;if(null!=v&&null!=w)for(d=0,s=0,b=0;b<w.length;b++){for(c=b+1,n=w[b].primaryColor,o=w[b].secondaryColor,p=w[b].liteColor,q=MemoryMatch.UserData.getLevelDataItem(c,"levelScoreCollection"),t=q.length,u=null,e=0;e<w[b].gameCount;e++)f=e+d+1,h=e+1,a=null!=v[b]&&v[b].length>e?v[b][e]:{x:0,y:0},r=MemoryMatch.getPriorScoreDataForGameNumber(h,q),null!=r&&r.playCount>0?(k=!0,s++,l=!1,j=r.bestScore,i=r.starsEarned):h==t?(k=!1,l=!1,j=0,i=0):(k=!1,l=!0,j=0,i=0),m=1,g=MemoryMatch.LevelButton({gameNumber:f,landNumber:c,starsEarned:i,bestScore:j,wasPlayed:k,isLocked:l,isChallengeGame:!1,primaryColor:n,secondaryColor:o,liteColor:p,scale:m,callback:this.onContinue.bind(this),changeEventNotification:this.changeEvent.bind(this)}),g.x=a.x*MemoryMatch.stageScaleFactor,g.y=a.y*MemoryMatch.stageScaleFactor,g.name=this.makeLevelButtonName(c,f),this.groupDisplayObject.addChild(g),null!=u&&this.connectPath(u,g),u=g;f++,h=99,a=null!=v[b]&&v[b].length>=e?v[b][e]:{x:0,y:0},r=MemoryMatch.getPriorScoreDataForGameNumber(h,q),null!=r&&r.playCount>0?(k=!0,s++,l=!1,j=r.bestScore,i=r.starsEarned):t>=h||t>w[b].gameCount?(k=!1,l=!1,j=0,i=0):(k=!1,l=!0,j=0,i=0),g=MemoryMatch.LevelButton({gameNumber:f,landNumber:c,starsEarned:i,bestScore:j,wasPlayed:k,isLocked:l,isChallengeGame:!0,primaryColor:n,secondaryColor:o,liteColor:p,scale:m,callback:this.onContinue.bind(this),changeEventNotification:this.changeEvent.bind(this)}),g.x=a.x*MemoryMatch.stageScaleFactor,g.y=a.y*MemoryMatch.stageScaleFactor,g.name=this.makeLevelButtonName(c,f),null!=u&&this.connectPath(u,g),this.groupDisplayObject.addChild(g),d+=w[b].gameCount+1}},refreshButtons:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=MemoryMatch.GameSetup.levels;if(null!=p&&this.isShowing()){for(c=0,n=0,a=0;a<p.length;a++){for(b=a+1,l=MemoryMatch.UserData.getLevelDataItem(b,"levelScoreCollection"),o=l.length,d=0;d<p[a].gameCount;d++)e=d+c+1,g=d+1,m=MemoryMatch.getPriorScoreDataForGameNumber(g,l),null!=m&&m.playCount>0?(j=!0,n++,k=!1,i=m.bestScore,h=m.starsEarned):g==o?(j=!1,k=!1,i=0,h=0):(j=!1,k=!0,i=0,h=0),f=this.groupDisplayObject.getChildByName(this.makeLevelButtonName(b,e)),null!=f&&f.refreshButton({starsEarned:h,bestScore:i,wasPlayed:j,isLocked:k});e++,g=99,m=MemoryMatch.getPriorScoreDataForGameNumber(g,l),null!=m&&m.playCount>0?(j=!0,n++,k=!1,i=m.bestScore,h=m.starsEarned):g==o?(j=!1,k=!1,i=0,h=0):(j=!1,k=!0,i=0,h=0),f=this.groupDisplayObject.getChildByName(this.makeLevelButtonName(b,e)),null!=f&&f.refreshButton({starsEarned:h,bestScore:i,wasPlayed:j,isLocked:k}),c+=p[a].gameCount+1}this.showAwardedGems(),this.groupDisplayObject.updateCache(),MemoryMatch.stageUpdated=!0}},connectPath:function(a,b){var c,d;null!=a&&null!=b&&null!=a.x&&null!=b.x&&(c=new createjs.Shape,d=MemoryMatch.GameSetup.mapPathColor,(null==d||""==d)&&(d="rgba(102,102,102,0.5)"),c.graphics.beginStroke(d).setStrokeStyle(12*MemoryMatch.stageScaleFactor),c.graphics.moveTo(a.x+.5*a.width,a.y+.5*a.height),c.graphics.lineTo(b.x+.5*b.width,b.y+.5*b.height),c.graphics.endStroke(),this.groupDisplayObject.addChildAt(c,this.groupDisplayObject.getChildIndex(a)))},showSpecialCrap:function(){var a,b,c,d,e,f=MemoryMatch.GameSetup.mapSpecialMarkers;if(null!=f)for(e=0;e<f.length;e++)a=f[e],null!=a.icon&&(b=new createjs.Sprite(this.spriteData,a.icon),c=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[a.icon][0]][2],d=MemoryMatch.GameSetup.mapSpritesheetFrames.frames[MemoryMatch.GameSetup.mapSpritesheetFrames.animations[a.icon][0]][3],b.setTransform(a.x*MemoryMatch.stageScaleFactor,a.y*MemoryMatch.stageScaleFactor,1,1,0,0,0,.5*c,.5*d),this.groupDisplayObject.addChild(b))},isShowing:function(){return null!=this.groupDisplayObject&&this.groupDisplayObject.visible},changeEvent:function(){null!=this.groupDisplayObject&&this.groupDisplayObject.updateCache()},makeLevelButtonName:function(a,b){return"land"+a.toString()+":level"+b.toString()},killScreen:function(){this.stateCompleteCallback=null,this.groupDisplayObject.uncache(),this.levelData=null,this.spriteData=null,this.mapSpriteFrames=null,this.awardSprite=null,this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.groupDisplayObject=null,this.parentDisplayObject=null,this.backgroundWidth=0,this.backgroundHeight=0,this.width=0,this.height=0}},MemoryMatch=MemoryMatch||{},MemoryMatch.MessagePopup={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,bgImageScaleX:1,bgImageScaleY:1,backgroundCover:null,marginTop:0,marginLeft:0,lineHeight:0,isEnabled:!1,title:null,message:null,closeButton:!0,continueButton:!1,domElement:null,noscale:!1,closeEventType:null,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,setParameters:function(a){null!=a&&(null!=a.title?this.title=a.title:null==this.title&&(this.title=""),null!=a.message?this.message=a.message:null==this.message&&(this.message=""),null!=a.domElement&&(this.domElement=a.domElement),null!=a.closeButton&&(this.closeButton=a.closeButton),null!=a.continueButton&&(this.continueButton=a.continueButton),null!=a.callback&&(this.stateCompleteCallback=a.callback),null!=a.noscale&&(this.noscale=a.noscale))
},setup:function(a,b){this.parentDisplayObject=a,this.buttonInstances=[],this.setParameters(b)},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.setColorFilters(),this.showBackgroundImage(),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleText(),null==this.domElement&&this.setupMessageText(),this.setupButtons(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),null!=this.domElement&&this.setupDOMElement(),null==a&&(a=!1),a&&this.start())},start:function(){this.isEnabled=!0},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));null!=b&&(b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)),null!=this.stateCompleteCallback&&this.stateCompleteCallback(this.closeEventType)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps)},closeComplete:function(){this.killScreen()},closePopup:function(a){var b,c=this.groupDisplayObject.getChildByName("text");this.isEnabled=!1,this.closeEventType=a,null!=c&&(c.visible=!1,b=document.getElementById(this.domElement),null!=b&&(b.style.display="none")),this.closeStartAnimation()},onClickClose:function(){this.isEnabled&&(MemoryMatch.triggerSoundFx("soundTap"),this.closePopup("close"))},onClickContinue:function(){this.isEnabled&&(MemoryMatch.triggerSoundFx("soundTap"),this.closePopup("continue"))},onClickBackground:function(){},showBackgroundImage:function(){var a,b,c,d=this.parentDisplayObject.canvas,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);a=e.width>d.width?d.width/e.width:1,b=e.height>d.height?d.height/e.height:1,f.alpha=1,f.scaleX=a,f.scaleY=b,c=new createjs.Shape,c.graphics.beginFill("#CCCCCC").drawRect(0,0,d.width,d.height),c.alpha=.1,c.addEventListener("click",this.onClickBackground),this.backgroundCover=c,this.parentDisplayObject.addChild(c),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*a,this.backgroundHeight=e.height*b,this.bgImageScaleX=a,this.bgImageScaleY=b,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupDOMElement:function(){var a,b,c,d,e,f,g,h=document.getElementById(this.domElement),i=new createjs.DOMElement(h);null!=i&&(i.name="text",f=h.clientWidth,g=h.clientHeight,b=MemoryMatch.stageScaleFactor*(MemoryMatch.cssScaledWidth/MemoryMatch.stageWidth),c=MemoryMatch.stageScaleFactor*(MemoryMatch.cssScaledHeight/MemoryMatch.stageHeight),.5==MemoryMatch.stageScaleFactor?(a=-.5,d=this.backgroundWidth*a|0,e=this.backgroundHeight*a|0):MemoryMatch.stageScaleFactor>.5?(a=-.415,d=this.backgroundWidth*a|0,e=this.backgroundHeight*a|0):(d=this.backgroundWidth*-.52|0,e=this.backgroundHeight*-.48|0),this.parentDisplayObject.addChild(i),h.style.display="block",h.width=this.parentDisplayObject.width,h.height=this.parentDisplayObject.height)},setupTitleText:function(){var a;a=new createjs.Text(this.title,MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},setupMessageText:function(){var a;a=new createjs.Text(this.message,MemoryMatch.getScaledFontSize(48)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="left",a.x=this.marginLeft,a.y=.4*this.backgroundHeight,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},setupButtons:function(){var a,b,c=1,d=0,e=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].liteColor,f=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].secondaryColor;d++,a=MemoryMatch.GUIButton({name:"close",tag:d,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),b=a.getSize(),a.setTransform(.94*this.backgroundWidth-b.width,.05*this.backgroundHeight,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),this.continueButton&&(d++,b=MemoryMatch.getSpriteFrameSize(MemoryMatch.GameSetup.guiSpritesheet1Frames,"gameOverButtonBase"),a=MemoryMatch.GUIButton({name:"continue",tag:d,disabled:!1,callback:this.onClickContinue.bind(this),baseUp:"gameOverButtonBase",buttonBaseColor:e,buttonBaseRollOverColor:f,iconUp:"gameOverNextIcon",iconOver:"gameOverNextDownIcon",iconDown:"gameOverNextDownIcon"}),a.setTransform(.5*(this.backgroundWidth-b.width),.75*this.backgroundHeight,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a))},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a,b;if(this.primaryColorFilter=null,this.secondaryColorFilter=null,null!==this.buttonInstances){for(a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].removeAllEventListeners();this.buttonInstances=null}null!=this.domElement&&(b=document.getElementById(this.domElement),null!=b&&(b.style.visibility="hidden")),this.domElement=null,this.title=null,this.message=null,this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.stateCompleteCallback=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.Nemesis={nemesisGroupDisplayObject:null,parentDisplayObject:null,spriteFrameData:null,bottleTopFilled:"nemesis1",bottleTopEmpty:"nemesis1Empty",bottleNeckFilled:"nemesis2",bottleNeckEmpty:"nemesis2Empty",bottleNeckEmptyEmpty:"nemesis2Empty2",bottleSectionFilled:"nemesis3",bottleSectionEmpty:"nemesis3Empty",bottleSectionEmptyEmpty:"nemesis3Empty2",bottleBottomFilled:"nemesis4",bottleBottomEmpty:"nemesis4Empty",maxNumberOfPieces:0,layoutNemesisPath:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(this.parentDisplayObject=a,q=MemoryMatch.getGameData(MemoryMatch.isChallengeGame),null!=q.progression&&q.progression.length>=MemoryMatch.gameNumber)for(this.maxNumberOfPieces=0,r=q.progression,h=0;h<r.length;h++)this.maxNumberOfPieces<r[h].tolerance&&(this.maxNumberOfPieces=r[h].tolerance);else this.maxNumberOfPieces=q.tolerance;for((null==this.maxNumberOfPieces||this.maxNumberOfPieces<3)&&(this.maxNumberOfPieces=3),this.spriteFrameData=MemoryMatch.GameSetup.guiSpritesheet2Frames,b=new createjs.SpriteSheet(this.spriteFrameData),null==this.nemesisGroupDisplayObject?(this.nemesisGroupDisplayObject=new createjs.Container,a.addChild(this.nemesisGroupDisplayObject)):this.nemesisGroupDisplayObject.removeAllChildren(),n=this.maxNumberOfPieces-3,g=0,c=1,i=new createjs.Sprite(b,this.bottleTopFilled),i.framerate=1,i.name="miss"+c.toString(),i.gotoAndStop(this.bottleTopFilled),d=MemoryMatch.getSpriteFrameSize(this.spriteFrameData,this.bottleTopFilled),c++,j=new createjs.Sprite(b,this.bottleNeckFilled),j.framerate=1,j.name="miss"+c.toString(),j.gotoAndStop(this.bottleNeckFilled),f=MemoryMatch.getSpriteFrameSize(this.spriteFrameData,this.bottleNeckFilled),o=f.width,p=.5*o|0,i.setTransform(p,g,1,1,0,0,0,.5*d.width|0,0),g+=d.height,j.setTransform(p,g,1,1,0,0,0,p,0),g+=f.height,this.nemesisGroupDisplayObject.addChild(i),this.nemesisGroupDisplayObject.addChild(j),k=new createjs.Sprite(b,this.bottleSectionFilled),k.framerate=1,k.gotoAndStop(this.bottleSectionFilled),e=MemoryMatch.getSpriteFrameSize(this.spriteFrameData,this.bottleSectionFilled),h=0;n>h;h++)c++,l=0==h?k:k.clone(),this.nemesisGroupDisplayObject.addChild(l),l.setTransform(p,g,1,1,0,0,0,.5*e.width|0,0),l.name="miss"+c.toString(),g+=e.height;c++,m=new createjs.Sprite(b,this.bottleBottomFilled),m.framerate=1,m.name="miss"+c.toString(),m.gotoAndStop(this.bottleBottomFilled),f=MemoryMatch.getSpriteFrameSize(this.spriteFrameData,this.bottleBottomFilled),m.setTransform(p,g,1,1,0,0,0,.5*f.width|0,0),g+=f.height,this.nemesisGroupDisplayObject.addChild(m),this.nemesisGroupDisplayObject.setTransform(MemoryMatch.stageWidth-f.width-.14*f.width|0,.5*(MemoryMatch.stageHeight-g)|0,1,1,0,0,0,0,0),this.moveNemesisCharacter(),MemoryMatch.stageUpdated=!0},layoutNemesisDemo:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(w=MemoryMatch.getGameData(MemoryMatch.isChallengeGame),null!=w.progression&&w.progression.length>=MemoryMatch.gameNumber)for(n=0,x=w.progression,m=0;m<x.length;m++)n<x[m].tolerance&&(n=x[m].tolerance);else n=w.tolerance;for((null==n||3>n)&&(n=3),f=MemoryMatch.GameSetup.guiSpritesheet2Frames,e=new createjs.SpriteSheet(f),g=new createjs.Container,g.name="nemesisContainer",g.maxNumberOfPieces=n,t=n-3,l=0,h=1,o=new createjs.Sprite(e,this.bottleTopFilled),o.framerate=1,o.name="miss"+h.toString(),o.gotoAndStop(this.bottleTopFilled),i=MemoryMatch.getSpriteFrameSize(f,this.bottleTopFilled),h++,p=new createjs.Sprite(e,this.bottleNeckFilled),p.framerate=1,p.name="miss"+h.toString(),p.gotoAndStop(this.bottleNeckFilled),k=MemoryMatch.getSpriteFrameSize(f,this.bottleNeckFilled),u=k.width,v=.5*u|0,o.setTransform(v,l,1,1,0,0,0,.5*i.width|0,0),l+=i.height,p.setTransform(v,l,1,1,0,0,0,v,0),l+=k.height,g.addChild(o),g.addChild(p),q=new createjs.Sprite(e,this.bottleSectionFilled),q.framerate=1,q.gotoAndStop(this.bottleSectionFilled),j=MemoryMatch.getSpriteFrameSize(f,this.bottleSectionFilled),m=0;t>m;m++)h++,r=0==m?q:q.clone(),g.addChild(r),r.setTransform(v,l,1,1,0,0,0,.5*j.width|0,0),r.name="miss"+h.toString(),l+=j.height;h++,s=new createjs.Sprite(e,this.bottleBottomFilled),s.framerate=1,s.name="miss"+h.toString(),s.gotoAndStop(this.bottleBottomFilled),k=MemoryMatch.getSpriteFrameSize(f,this.bottleBottomFilled),s.setTransform(v,l,1,1,0,0,0,.5*k.width|0,0),l+=k.height,g.addChild(s),g.setTransform(b-k.width-.14*k.width|0,c,d,d,0,0,0,0,.5*l),a.addChild(g)},moveNemesisCharacter:function(){var a,b,c,d=this.maxNumberOfPieces-MemoryMatch.levelTolerance+MemoryMatch.missCount;for(c=1;c<=this.maxNumberOfPieces;c++)a=this.nemesisGroupDisplayObject.getChildByName("miss"+c.toString()),null!=a&&(b=d>=c?1==c?this.bottleTopEmpty:2==c?d>c?this.bottleNeckEmptyEmpty:this.bottleNeckEmpty:c==this.maxNumberOfPieces?this.bottleBottomEmpty:d>c?this.bottleSectionEmptyEmpty:this.bottleSectionEmpty:1==c?this.bottleTopFilled:2==c?this.bottleNeckFilled:c==this.maxNumberOfPieces?this.bottleBottomFilled:this.bottleSectionFilled),a.gotoAndStop(b)},moveNemesisCharacterDemo:function(a,b){var c,d,e,f,g,h;if(null!=a&&(d=a.getChildByName("nemesisContainer"),null!=d))for(e=d.maxNumberOfPieces,f=b,h=1;e>=h;h++)c=d.getChildByName("miss"+h.toString()),null!=c&&(g=f>=h?1==h?this.bottleTopEmpty:2==h?f>h?this.bottleNeckEmptyEmpty:this.bottleNeckEmpty:h==e?this.bottleBottomEmpty:f>h?this.bottleSectionEmptyEmpty:this.bottleSectionEmpty:1==h?this.bottleTopFilled:2==h?this.bottleNeckFilled:h==e?this.bottleBottomFilled:this.bottleSectionFilled),c.gotoAndStop(g)},awakeNemesisCharacter:function(){},removeNemesisCharacter:function(){null!=this.nemesisGroupDisplayObject&&(this.spriteFrameData=null,this.nemesisGroupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.nemesisGroupDisplayObject),this.nemesisCharacterSprite=null,this.nemesisGroupDisplayObject=null,MemoryMatch.stageUpdated=!0)},moveNemesisCharacterComplete:function(){null!=this.nemesisCharacterSprite&&(this.nemesisCharacterSprite.gotoAndStop("stand"),MemoryMatch.stageUpdated=!0)},scale:function(a){a>=0&&1>=a&&null!=this.nemesisGroupDisplayObject&&(this.nemesisGroupDisplayObject.scaleX=a,this.nemesisGroupDisplayObject.scaleY=a)}},MemoryMatch=MemoryMatch||{},MemoryMatch.SharePopup={shareNetworks:[{id:"facebook",icon:"facebook-icon",initialized:!1},{id:"twitter",icon:"twitter-icon",initialized:!1},{id:"googleplus",icon:"googleplus-icon",initialized:!1}],stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,backgroundCover:null,marginTop:0,marginLeft:0,lineHeight:0,isEnabled:!1,title:null,message:null,closeButton:!0,continueButton:!1,domElementEmailForm:null,noscale:!1,closeEventType:null,primaryColorFilter:null,secondaryColorFilter:null,primaryColorValue:null,secondaryColorValue:null,shareMessage:null,shareShortMessage:null,setParameters:function(a){null!=a&&(null!=a.title?this.title=a.title:null==this.title&&(this.title=""),null!=a.message?this.message=a.message:null==this.message&&(this.message=""),null!=a.domElementEmailForm&&(this.domElementEmailForm=a.domElementEmailForm),null!=a.closeButton&&(this.closeButton=a.closeButton),null!=a.continueButton&&(this.continueButton=a.continueButton),null!=a.callback&&(this.stateCompleteCallback=a.callback),null!=a.noscale&&(this.noscale=a.noscale),null!=a.shareMessage&&(this.shareMessage=a.shareMessage),null!=a.shareShortMessage&&(this.shareShortMessage=a.shareShortMessage))},setup:function(a,b){this.parentDisplayObject=a,this.buttonInstances=[],this.setParameters(b)},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.setColorFilters(),this.showBackgroundImage(),this.marginTop=.05*this.backgroundHeight,this.marginLeft=.09*this.backgroundWidth,this.setupTitleText(),null==this.domElement&&this.setupMessageText(),this.setupButtons(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),null==a&&(a=!1),a&&this.start())},start:function(){var a,b,c;for(this.isEnabled=!0,b={facebookAppId:MemoryMatch.GameSetup.facebookAppId},c=this.shareNetworks.length,a=0;c>a;a++)enginesisSession.ShareHelper.initialize(enginesisSession,this.shareNetworks[a].id,b,this.onNetworksInitializeComplete.bind(this))},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeShrink.bind(this));null!=b&&(b.endYScale=b.endXScale=1.08,b.vYScale=b.vXScale=b.endXScale/(a*MemoryMatch.fps)),null!=this.stateCompleteCallback&&this.stateCompleteCallback(this.closeEventType)},closeShrink:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));null!=b&&(b.endYScale=b.endXScale=0,b.vYScale=b.vXScale=-1*this.groupDisplayObject.scaleX/(a*MemoryMatch.fps))},closeComplete:function(){this.killScreen()},closePopup:function(a){var b=this.parentDisplayObject.getChildByName(this.domElementEmailForm),c=document.getElementById(this.domElementEmailForm);this.isEnabled=!1,this.closeEventType=a,null!=c&&(c.style.display="none"),null!=b&&this.parentDisplayObject.removeChild(b),this.closeStartAnimation()},onClickClose:function(){this.isEnabled&&this.closePopup("close")},onClickNetworkButton:function(a){var b,c,d;if(this.isEnabled)for(this.isEnabled=!1,c=this.shareNetworks.length,b=0;c>b;b++)a==this.shareNetworks[b].id&&(this.shareNetworks[b].initalized?this.networkShare(a):(d={facebookAppId:MemoryMatch.GameSetup.facebookAppId,googleClientId:MemoryMatch.GameSetup.googlePlusClientId},enginesisSession.ShareHelper.initialize(enginesisSession,a,d,this.onNetworkInitializeComplete.bind(this))))},onClickSend:function(){var a,b,c,d,e,f;f=!1,a=document.getElementById("fromname").value,b=document.getElementById("fromemail").value,c=document.getElementById("toemail").value,d=document.getElementById("message").value,b.length<4?d=MemoryMatch.GameSetup.GUIStrings.emailErrorSender:c.length<4?d=MemoryMatch.GameSetup.GUIStrings.emailErrorTo:MemoryMatch.isValidEmail(b)?MemoryMatch.isValidEmail(c)?f=!0:d=MemoryMatch.GameSetup.GUIStrings.emailErrorToEmail:d=MemoryMatch.GameSetup.GUIStrings.emailErrorFrom,f?(document.getElementById("errorMessage").innerText="",MemoryMatch.UserData.updateUser(-1,a,null,b,null),MemoryMatch.UserData.flush(),document.getElementById("toemail").value="",e={fromName:a,fromEmail:b,toEmail:c,message:d,picture:MemoryMatch.GameSetup.promoImage,link:MemoryMatch.GameSetup.gameShortLink,referrer:MemoryMatch.GameSetup.siteDomain},enginesisSession.ShareHelper.share("email",e,this.onNetworkShareComplete.bind(this))):document.getElementById("errorMessage").innerText=d},onClickBackground:function(){},onNetworksInitializeComplete:function(a){var b,c;for(c=this.shareNetworks.length,b=0;c>b;b++)a==this.shareNetworks[b].id&&(this.shareNetworks[b].initalized=!0)},networkShare:function(a){var b;"email"!=a?(b={description:"",shortDescription:"",title:MemoryMatch.GameSetup.gameTitle,caption:MemoryMatch.GameSetup.gameSubTitle,picture:MemoryMatch.GameSetup.promoImage,socialHashTags:MemoryMatch.GameSetup.socialHashTag,viaId:MemoryMatch.GameSetup.twitterId,googleClientId:MemoryMatch.GameSetup.googlePlusClientId,link:MemoryMatch.GameSetup.gameShortLink},b.description=null!=this.shareMessage?this.shareMessage:MemoryMatch.GameSetup.gameSubTitle,b.shortDescription=null!=this.shareShortMessage?this.shareShortMessage:MemoryMatch.GameSetup.gameSubTitle,"facebook"==a&&(b.link=MemoryMatch.GameSetup.gameLink),enginesisSession.ShareHelper.share(a,b,this.onNetworkShareComplete.bind(this))):this.showEmailForm()},onNetworkInitializeComplete:function(a){this.onNetworksInitializeComplete(a),this.networkShare(a)},onNetworkShareComplete:function(){this.closePopup("continue")},showBackgroundImage:function(){var a,b,c,d=this.parentDisplayObject.canvas,e=MemoryMatch.assetLoader.getResult("popup-bg"),f=new createjs.Bitmap(e);a=e.width>d.width?d.width/e.width:1,b=e.height>d.height?d.height/e.height:1,f.alpha=1,f.scaleX=a,f.scaleY=b,c=new createjs.Shape,c.graphics.beginFill("#CCCCCC").drawRect(0,0,d.width,d.height),c.alpha=.1,c.addEventListener("click",this.onClickBackground),this.backgroundCover=c,this.parentDisplayObject.addChild(c),this.groupDisplayObject.addChild(f),this.backgroundWidth=e.width*a,this.backgroundHeight=e.height*b,null!=this.primaryColorFilter&&(f.filters=[this.primaryColorFilter],f.cache(0,0,this.backgroundWidth,this.backgroundHeight))},setupDOMElement:function(a){var b,c=document.getElementById(a);null!=c&&(b=new createjs.DOMElement(c),null!=b&&(b.name=a,c.style.display="table-cell",this.parentDisplayObject.addChildAt(b,0),c=document.getElementById("send"),null!=c&&(c.onclick=this.onClickSend.bind(this))))},setupTitleText:function(){var a;a=new createjs.Text(this.title,MemoryMatch.getScaledFontSize(72)+" "+MemoryMatch.GameSetup.guiBoldFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=this.marginTop,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,this.groupDisplayObject.addChild(a)},setupMessageText:function(){var a;a=new createjs.Text(this.message,MemoryMatch.getScaledFontSize(48)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="left",a.x=this.marginLeft,a.y=.2*this.backgroundHeight,a.lineWidth=this.backgroundWidth-2*this.marginLeft,a.maxWidth=this.backgroundWidth-2*this.marginLeft,a.name="title",this.groupDisplayObject.addChild(a)},setupButtons:function(){var a,b,c,d,e,f,g,h,i,j=1,k=0,l=0;for(l++,a=MemoryMatch.GUIButton({name:"close",tag:l,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),f=a.getSize(),a.setTransform(.94*this.backgroundWidth-f.width,.05*this.backgroundHeight,j,j),this.groupDisplayObject.addChild(a),this.buttonInstances.push(a),c=this.shareNetworks.length,i=0;c>i;i++)g=this.shareNetworks[i].id,h=this.shareNetworks[i].icon,l++,b=MemoryMatch.GUIButton({name:g,tag:l,disabled:!1,callback:this.onClickNetworkButton.bind(this),spriteFrames:MemoryMatch.GameSetup.shareIconsFrames,baseUp:h,baseOver:h,baseDown:h}),0==k&&(f=a.getSize(),e=Math.floor(.3333*f.width),k=(f.width+e)*c-e,d=.5*(this.backgroundWidth-k)),b.setTransform(d+(f.width+e)*i,.4*this.backgroundHeight,j,j),this.groupDisplayObject.addChild(b),this.buttonInstances.push(b)},showEmailForm:function(){var a,b,c,d,e,f;for(this.isEnabled=!0,b=this.shareNetworks.length,f=0;b>f;f++)c=this.shareNetworks[f].id,a=this.groupDisplayObject.getChildByName(c),null!=a&&(a.visible=!1);a=this.groupDisplayObject.getChildByName("title"),null!=a&&(a.visible=!1),null!=this.domElementEmailForm&&this.setupDOMElement(this.domElementEmailForm),d=MemoryMatch.UserData.getById(),e=MemoryMatch.tokenReplace(MemoryMatch.GameSetup.GUIStrings.emailShareMessage,{gamename:MemoryMatch.GameSetup.gameTitle}),document.getElementById("fromname").value=d.userName,document.getElementById("fromemail").value=d.email,document.getElementById("toemail").value="",document.getElementById("message").value=e},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},setColorFilters:function(){var a,b;this.primaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,this.secondaryColorValue=MemoryMatch.GameSetup.levels[MemoryMatch.gameLevel-1].primaryColor,null!=this.primaryColorValue?(a=MemoryMatch.htmlColorStringToColorArray(this.primaryColorValue),this.primaryColorFilter=new createjs.ColorFilter(0,0,0,1,a[0],a[1],a[2],0)):this.primaryColorFilter=null,null!=this.secondaryColorValue?(b=MemoryMatch.htmlColorStringToColorArray(this.secondaryColorValue),this.secondaryColorFilter=new createjs.ColorFilter(0,0,0,1,b[0],b[1],b[2],0)):this.secondaryColorFilter=null},killScreen:function(){var a,b;if(this.primaryColorFilter=null,this.secondaryColorFilter=null,null!==this.buttonInstances){for(a=0;a<this.buttonInstances.length;a++)this.buttonInstances[a].removeAllEventListeners();this.buttonInstances=null}null!=this.domElement&&(b=document.getElementById(this.domElement),null!=b&&(b.style.visibility="hidden")),this.domElement=null,this.title=null,this.message=null,null!=this.groupDisplayObject&&(this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.groupDisplayObject=null),null!=this.parentDisplayObject&&(this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.stateCompleteCallback=null,this.parentDisplayObject=null)}},MemoryMatch=MemoryMatch||{},MemoryMatch.AdPopup={stateCompleteCallback:null,parentDisplayObject:null,groupDisplayObject:null,buttonInstances:null,backgroundWidth:0,backgroundHeight:0,backgroundCover:null,isEnabled:!1,title:null,closeButton:!0,domElementName:null,refreshOnDisplay:!0,noscale:!1,closeEventType:null,closeTimer:null,showAdTimer:null,setParameters:function(a){null!=a&&(null!=a.title?this.title=a.title:null==this.title&&(this.title="Advertisement"),this.domElementName=null!=a.domElement?a.domElement:"adPlacement",null!=a.closeButton&&(this.closeButton=a.closeButton),null!=a.callback&&(this.stateCompleteCallback=a.callback),null!=a.noscale&&(this.noscale=a.noscale))},setup:function(a,b){this.parentDisplayObject=a,this.setParameters(b)},buildScreen:function(a){null===this.groupDisplayObject&&(this.groupDisplayObject=new createjs.Container,this.showBackgroundImage(),this.setupTitleText(),this.setupButtons(),this.parentDisplayObject.addChild(this.groupDisplayObject),this.groupDisplayObject.setTransform(.5*this.parentDisplayObject.canvas.width,.5*this.parentDisplayObject.canvas.height,1,1,0,0,0,.5*this.backgroundWidth,.5*this.backgroundHeight),this.setupDOMElement(),MemoryMatch.stageUpdated=!0,null==a&&(a=!1),a&&this.start())},start:function(){this.isEnabled=!0,enginesisSession.gameTrackingRecord("game","showad","",MemoryMatch.adModel.adDisplayCounter.toString(),null),this.startAutoCloseTimer()},closeStartAnimation:function(){var a=.1,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeSlide.bind(this));null!=b&&(b.endX=this.groupDisplayObject.x-.05*this.backgroundWidth,b.vX=b.endX/(a*MemoryMatch.fps))},closeSlide:function(){var a=.3,b=MemoryMatch.AnimationHandler.addToAnimationQueue(this.groupDisplayObject,0,1e3*a,!1,null,this.closeComplete.bind(this));b.endX=this.groupDisplayObject.x+1.05*this.backgroundWidth,b.vX=1.05*this.backgroundWidth/(a*MemoryMatch.fps)},closeComplete:function(){var a,b,c=this.stateCompleteCallback,d=this.closeEventType;null!=this.groupDisplayObject&&(a=this.groupDisplayObject.getChildByName("ad"),this.isEnabled=!1,null!=a&&(a.visible=!1,b=document.getElementById(this.domElementName),null!=b&&(b.style.display="none")),this.killScreen(),null!=c&&c(d))},closePopup:function(a){this.isEnabled=!1,this.closeEventType=a,this.closeStartAnimation()},startAutoCloseTimer:function(){var a=15|MemoryMatch.GameSetup.adMinDisplaySeconds;this.closeTimer=window.setTimeout(this.onAutoCloseTimerExpired.bind(this),1e3*a)},onAutoCloseTimerExpired:function(){this.closeTimer=null,this.closePopup("close")},onClickClose:function(){this.isEnabled&&(MemoryMatch.triggerSoundFx("soundTap"),this.closePopup("close"))},onClickBackground:function(){},onShowAdTimerExpired:function(){var a;this.showAdTimer=null,a=document.getElementById(this.domElementName),null!=a&&(a.style.display="block")},showBackgroundImage:function(){var a,b=this.parentDisplayObject.canvas;this.backgroundWidth=b.width,this.backgroundHeight=b.height,a=new createjs.Shape,a.graphics.beginFill("#CCCCCC").drawRect(0,0,this.backgroundWidth,this.backgroundHeight),a.alpha=.8,a.addEventListener("click",this.onClickBackground),this.backgroundCover=a,this.parentDisplayObject.addChild(a)},setupDOMElement:function(){var a,b,c;a=document.getElementById(this.domElementName),null!=a&&(c=document.createElement("IFRAME"),c.setAttribute("src","adLoader.html"),c.setAttribute("id","adFramed"),c.setAttribute("name","adFramed"),c.setAttribute("width","300"),c.setAttribute("height","250"),c.setAttribute("scrolling","no"),c.setAttribute("marginwidth","0"),c.setAttribute("marginheight","0"),c.setAttribute("frameborder","0"),c.style.width="300px",c.style.height="250px",a.appendChild(c),b=new createjs.DOMElement(a),null!=b&&(b.name="ad",this.groupDisplayObject.addChild(b),this.showAdTimer=window.setTimeout(this.onShowAdTimerExpired.bind(this),1e3)))},killDOMElement:function(){var a=document.getElementById(this.domElementName);if(null!=a){for(;null!=a.firstChild;)a.removeChild(a.firstChild);a.style.visibility="hidden",a.style.display="none"}},setupTitleText:function(){var a;a=new createjs.Text(this.title,MemoryMatch.getScaledFontSize(56)+" "+MemoryMatch.GameSetup.guiMediumFontName,MemoryMatch.GameSetup.guiFontColor),a.textAlign="center",a.x=.5*this.backgroundWidth,a.y=.94*this.backgroundHeight,a.lineWidth=this.backgroundWidth,a.maxWidth=this.backgroundWidth,this.groupDisplayObject.addChild(a)},setupButtons:function(){var a,b,c=1;a=MemoryMatch.GUIButton({name:"close",tag:1,disabled:!1,callback:this.onClickClose.bind(this),baseUp:"closeButtonUp",baseOver:"closeButtonDown",baseDown:"closeButtonDown"}),b=a.getSize(),a.setTransform(.99*this.backgroundWidth-b.width,.06*this.backgroundHeight,c,c),this.groupDisplayObject.addChild(a),this.buttonInstances=a},isShowing:function(){return null!==this.groupDisplayObject&&this.groupDisplayObject.visible},killScreen:function(){null!=this.closeTimer&&(window.clearTimeout(this.closeTimer),this.closeTimer=null),null!=this.showAdTimer&&(window.clearTimeout(this.showAdTimer),this.showAdTimer=null),this.buttonInstances=null,this.killDOMElement(),this.domElementName=null,this.title=null,this.message=null,this.groupDisplayObject.removeAllChildren(),this.parentDisplayObject.removeChild(this.groupDisplayObject),this.parentDisplayObject.removeChild(this.backgroundCover),this.backgroundCover=null,this.stateCompleteCallback=null,this.parentDisplayObject=null,this.groupDisplayObject=null}},MemoryMatch=MemoryMatch||{},MemoryMatch.UserData={userDataCollection:null,currentUser:null,dataUpdatedFlag:!1,dataLoadedFromStorage:!1,dataLoadedFromServer:!1,addUser:function(a,b,c,d,e){var f;return null==this.userDataCollection&&(this.userDataCollection=[]),(null==a||1>a)&&(a=this.getNextUserId()),f=this.getById(a),null==f?(f={userId:a,userName:b,password:c,email:d,ageCheck:e,userDataObject:{},levelDataArray:[],userAchievements:[],userTips:[]},this.userDataCollection.push(f),this.dataUpdatedFlag=!0):(f.userName=b,f.password=c,f.email=d,f.ageCheck=e,this.dataUpdatedFlag=!0),this.sync(),null==this.currentUser&&(this.currentUser=f),f},updateUser:function(a,b,c,d,e){var f;return(void 0==a||null==a||1>a)&&(a=this.getCurrentUserId()),f=this.getById(a),null==f?(null==b&&(b=""),null==c&&(c=""),null==d&&(d=""),null==e&&(e=!1),f=this.addUser(a,b,c,d,e)):(null!=b&&(f.userName=b),null!=c&&(f.password=c),null!=d&&(f.email=d),null!=e&&(f.ageCheck=e),this.dataUpdatedFlag=!0),f},deleteUser:function(a){var b,c,d=!1;if(this.currentUser===c&&(this.currentUser=null),null!==this.userDataCollection&&this.userDataCollection.length>0&&null!==a){for(b=0;b<this.userDataCollection.length;b++)if(c=this.userDataCollection[b],a===c.userId){d=!0,this.currentUser==c&&(this.currentUser=null);break}d&&(this.userDataCollection.splice(b,1),this.dataUpdatedFlag=!0)}return d},getById:function(a){var b,c,d=null;if((void 0==a||null==a||1>a)&&(a=this.getCurrentUserId()),null!=this.userDataCollection&&this.userDataCollection.length>0&&null!=a)for(b=0;b<this.userDataCollection.length;b++)if(c=this.userDataCollection[b],a==c.userId){d=c;break}return d},getByName:function(a){var b,c,d=null;if(null!=this.userDataCollection&&this.userDataCollection.length>0&&null!=a)for(b=0;b<this.userDataCollection.length;b++)if(c=this.userDataCollection[b],a==c.userName){d=c;break}return d},getNextUserId:function(){var a,b,c=0;if(null!=this.userDataCollection&&this.userDataCollection.length>0)for(a=0;a<this.userDataCollection.length;a++)b=this.userDataCollection[a],c<b.userId&&(c=b.userId);return++c},count:function(){return this.userDataCollection.length},setCurrentUser:function(a){return this.currentUser=this.getById(a),this.currentUser},getCurrentUserId:function(){return null===this.currentUser&&this.setCurrentUser(1),this.currentUser.userId},setUserDataObject:function(a){return null!=this.currentUser&&(this.currentUser.userDataObject=a,this.dataUpdatedFlag=!0),a},getUserDataObject:function(){var a=null;return null!==this.currentUser&&(a=this.currentUser.userDataObject,null===a?a={}:null===a.userAchievements||Array.isArray(a.userAchievements)||(a.userAchievements=[],a.userTips=[])),a},setUserDataItem:function(a,b){var c=!1;return null!==this.currentUser&&null!==this.currentUser.userDataObject&&(this.currentUser.userDataObject[a]=b,c=!0,this.dataUpdatedFlag=!0),c},getUserDataItem:function(a){var b=null;return null!=this.currentUser&&null!=this.currentUser.userDataObject&&(b=this.currentUser.userDataObject[a]),b},setLevelDataObject:function(a,b){return null!=this.currentUser&&null!=this.currentUser.levelDataArray&&a>0&&(this.currentUser.levelDataArray[a-1]=b,this.dataUpdatedFlag=!0),b
},getLevelDataObject:function(a){var b=null;return null!=this.currentUser&&null!=this.currentUser.levelDataArray&&a>0&&(b=this.currentUser.levelDataArray[a-1]),b},setLevelDataItem:function(a,b,c){var d=!1;return null!=this.currentUser&&null!=this.currentUser.levelDataArray&&a>0&&(null==this.currentUser.levelDataArray[a-1]&&(this.currentUser.levelDataArray[a-1]={}),this.currentUser.levelDataArray[a-1][b]=c,d=!0,this.dataUpdatedFlag=!0),d},getLevelDataItem:function(a,b){var c=null;return null!==this.currentUser&&null!==this.currentUser.levelDataArray&&a>0&&null!==this.currentUser.levelDataArray[a-1]&&(c=this.currentUser.levelDataArray[a-1][b]),c},setUserAchievementArray:function(a){return null!==this.currentUser&&(this.currentUser.userAchievements=a,this.dataUpdatedFlag=!0),achievementObject},setUserAchievement:function(a){var b=!1;return null!==this.currentUser&&null!==this.currentUser.userAchievements&&(null===this.currentUser.userAchievements||Array.isArray(this.currentUser.userAchievements)||(this.currentUser.userAchievements=[]),this.currentUser.userAchievements.push(a),b=!0,this.dataUpdatedFlag=!0),b},isUserAchievementSet:function(a){var b=!1;return null!==this.currentUser&&null!==this.currentUser.userAchievements&&(null===this.currentUser.userAchievements||Array.isArray(this.currentUser.userAchievements)||(this.currentUser.userAchievements=[]),b=-1!==this.currentUser.userAchievements.indexOf(a)),b},getUserAchievements:function(){return null===this.currentUser.userAchievements||Array.isArray(this.currentUser.userAchievements)||(this.currentUser.userAchievements=[]),this.currentUser.userAchievements},clearAllUserAchievements:function(){return this.currentUser.userAchievements=[],this.currentUser.userAchievements},setUserTipSeen:function(a){var b,c,d=!1,e=a-1;if(0>e&&(e=0),null!==this.currentUser&&null!==this.currentUser.userTips){for(null===this.currentUser.userTips||Array.isArray(this.currentUser.userTips)||(this.currentUser.userTips=[]),c=this.currentUser.userTips,c[e]=!0,b=0;b<c.length;b++)void 0===c[b]&&(c[b]=!1);d=!0,this.dataUpdatedFlag=!0}return d},isUserTipSeen:function(a){var b=!1,c=a-1;return null!==this.currentUser&&null!==this.currentUser.userTips&&(null===this.currentUser.userTips||Array.isArray(this.currentUser.userTips)||(this.currentUser.userTips=[]),b=this.currentUser.userTips[c],void 0===b&&(b=!1)),b},getUserTips:function(){return null===this.currentUser.userTips||Array.isArray(this.currentUser.userTips)||(this.currentUser.userTips=[]),this.currentUser.userTips},clearAllUserTips:function(){return this.currentUser.userTips=[],this.currentUser.userTips},sync:function(){var a;MemoryMatch.hasHTML5LocalStorage()&&(a=JSON.stringify(this.userDataCollection),window.localStorage[MemoryMatch.getGameKey("userData")]=a,this.dataUpdatedFlag=!1)},load:function(){var a,b=!1;return MemoryMatch.hasHTML5LocalStorage()&&(a=window.localStorage[MemoryMatch.getGameKey("userData")],null!=a&&"null"!=a&&(this.userDataCollection=JSON.parse(a),this.dataUpdatedFlag=!1,b=!0)),b},flush:function(){this.dataUpdatedFlag=!0,this.sync()},debug:function(){MemoryMatch.debugLog(JSON.stringify(this.userDataCollection))}};