"use strict";var enginesis=function(a,b,c,d,e,f,g,h){var i="2.2.17",j=!0,k=!1,l=15,m=!1,n=null,o=null,p=null,a=a||0,b=b||0,c=c||0,g=g||"en",q=0,r=null,h=h,s=0,t=function(a,b){var c;try{c=JSON.parse(a)}catch(d){c={results:{status:{success:0,message:"Error: "+d.message,extended_info:a.toString()},passthru:{fn:"unknown",state_seq:"0"}}}}c.fn=c.results.passthru.fn,null!=b?b(c):null!=h&&h(c)},u=function(a,b,c){var d=v(a,b),e=new XMLHttpRequest;void 0==typeof e.withCredentials?y("CORS is not supported"):k||(e.onload=function(){t(this.responseText,c)},e.onerror=function(a){y("CORS request error "+e.status+" "+a.toString())},e.open("POST",p,!0),e.overrideMimeType("application/json"),e.send(w(d)),r=a)},v=function(c,d){var e={fn:c,language_code:g,site_id:a,game_id:b,state_seq:++q,response:"json"};if(0!=s&&(e.logged_in_user_id=s),null!=d)for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);return e},w=function(a){var b,c=new FormData;for(b in a)a.hasOwnProperty(b)&&c.append(b,a[b]);return c},x=function(a){switch(a){case"":case"-l":case"-d":case"-q":case"-x":n=a;break;default:n=""}return o="www.enginesis"+n+".com",p=(m?"https://":"http://")+o+"/index.php",n},y=function(a,b){j&&(null==b&&(b=15),l&b>0&&console.log(a),9==b&&alert(a))};return x(d),{ShareHelper:ShareHelper,versionGet:function(){return i},serverStageSet:function(a){return x(a)},serverStageGet:function(){return n},gameIdGet:function(){return b},gameIdSet:function(a){return b=a},gameGroupIdGet:function(){return c},gameGroupIdSet:function(a){return c=a},siteIdGet:function(){return a},siteIdSet:function(b){return a=b},sessionBegin:function(a,b){return u("SessionBegin",{gamekey:a},b)},userLogin:function(a,b,c){return u("UserLogin",{user_name:a,password:b},c)},userLoginCoreg:function(a,b,c,d,e,f,g,h,i,j){return u("UserLoginCoreg",{site_user_id:b,user_name:a,network_id:i},j)},registeredUserCreate:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,v,w,x,y,z){x="99999",y="DEADMAN",u("RegisteredUserCreate",{site_id:this.site_id,captcha_id:x,captcha_response:y,user_name:a,site_user_id:n,network_id:o,real_name:d,password:b,dob:e,gender:f,city:g,state:h,zipcode:i,email_address:c,country_code:j,mobile_number:k,im_id:l,agreement:p,security_question_id:1,security_answer:"",img_url:"",about_me:t,tagline:m,additional_info:v,source_site_id:w},z)},registeredUserForgotPassword:function(a,b,c){return u("RegisteredUserForgotPassword",{user_name:a,email:b},c)},gameFind:function(a,b){return u("GameFind",{game_name_part:a},b)},gameList:function(a,b,c,d){return u("GameList",{first_item:a,num_items:b,game_status_id:c},d)},gameDataCreate:function(a,b,c,d,e,f,g,h,i,j,k,l){return u("GameDataCreate",{referrer:a,from_address:b,from_name:c,to_address:d,to_name:e,user_msg:f,user_files:g,game_data:h,name_tag:i,add_to_gallery:j?1:0,last_score:k},l)},gameDataGet:function(a,b){return u("GameDataGet",{game_data_id:a},b)},gameTrackingRecord:function(a,b,c,d,e){return null!=window.ga&&ga("send","event",a,b,c,d),u("GameTrackingRecord",{hit_type:"REQUEST",hit_category:a,hit_action:b,hit_label:c,hit_data:d},e)}}},ShareHelper={networks:null,serverResponse:"",success:!1,errorMessage:"",responseInfo:"",callBackWhenComplete:null,enginesisSession:null,initialize:function(a,b,c,d){var e,f,g;if(this.enginesisSession=a,this.networks=[{id:"email",init:this.initializeEmail.bind(this),share:this.ShareByEmail.bind(this)},{id:"facebook",init:this.initializeFacebook.bind(this),share:this.FacebookFeed.bind(this)},{id:"twitter",init:this.initializeTwitter.bind(this),share:this.TwitterStatus.bind(this)},{id:"googleplus",init:this.initializeGooglePlus.bind(this),share:this.GoogleFeed.bind(this)}],null!=b)if(e=Object.prototype.toString.call(b),e.indexOf("String")>=0)f=b,this.initializeNetwork(f,c,d);else if(e.indexOf("Number")>=0)(b>this.networks.length||0>b)&&(b=this.networks.length-1),f=this.networks[b],this.initializeNetwork(f,c,d);else if(b.length>0)for(g=0;g<b.length;g++)f=b[g],this.initializeNetwork(f,c,d)},share:function(a,b,c){var d,e;for(d=0;d<this.networks.length;d++)e=this.networks[d],e.id==a&&e.share(b,c)},initializeNetwork:function(a,b,c){var d,e;for(d=0;d<this.networks.length;d++)e=this.networks[d],e.id==a&&e.init(b,c)},initializeNetworks:function(a,b,c){var d,e,f,g;for(e=0;e<a.length;e++)for(f=a[e],d=0;d<this.networks.length;d++)g=this.networks[d],g.id==f&&g.init(b,c)},initializeFacebook:function(a,b){var c="//connect.facebook.net/en_US/sdk.js",d="facebook-jssdk";null==window.FB||null==window.FB.ui?(window.fbAsyncInit=function(){window.FB.init({appId:a.facebookAppId,xfbml:!0,status:!0,cookie:!0,oauth:!0,frictionlessRequests:!0,display:"popup",version:"v2.0"}),null!=b&&b("facebook")},function(a){var b,d;document.getElementById(a)||(d=document.getElementsByTagName("script")[0],b=document.createElement("script"),b.id=a,b.async=!0,b.src=c,d.parentNode.insertBefore(b,d))}(d)):null!=b&&b("facebook")},initializeTwitter:function(a,b){var c,d,e="//platform.twitter.com/widgets.js",f="twitter-jswidgets",g=document.getElementsByTagName("script")[0],h=this.onTweetComplete;null==window.twttr&&null==document.getElementById(f)?(window.twttr=function(){return d=document.createElement("script"),d.id=f,d.src=e,g.parentNode.insertBefore(d,g),window.twttr||(c={_e:[],ready:function(a){c._e.push(a)}})}(),window.twttr.ready(function(a){a.events.bind("tweet",h),null!=b&&b("twitter")})):null!=b&&b("twitter")},onTweetComplete:function(a){this.enginesisSession.debugLog("ShareHelper:onTweetComplete event="+a)},initializeGooglePlus:function(a,b){var c,d=document.createElement("script");this.callBackWhenComplete=b,d.type="text/javascript",d.async=!0,d.src="https://apis.google.com/js/client:plusone.js?onload=onGooglePlusLoaded",c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(d,c)},onGooglePlusLoaded:function(){null!=this.callBackWhenComplete&&this.callBackWhenComplete("googleplus")},initializeEmail:function(a,b){null!=b&&b("email")},FacebookFeed:function(a,b){null!=FB&&null!=FB.ui&&FB.ui({method:"feed",name:a.title,caption:a.caption,description:this.description,link:a.link,picture:a.picture},function(a){a&&a.post_id?(this.responseInfo="Post was published.",this.success=!0):(this.errorMessage="Post was not published.",this.success=!1)}),null!=b&&b("facebook")},GoogleFeed:function(a,b){var c,d,e={contenturl:a.link,clientid:a.googleClientId,cookiepolicy:"single_host_origin",prefilltext:a.description,calltoactionlabel:"CHALLENGE",calltoactionurl:a.link,contentdeeplinkid:"/pages",calltoactiondeeplinkid:"/pages/create"};gapi.interactivepost.render("googleSharePost",e),window.setTimeout(function(){try{if(c=document.getElementById("googleSharePost"),"function"==typeof c.onclick)try{c.onclick.apply(c)}catch(e){d=window.open("https://plus.google.com/share?url="+encodeURI(a.link),"_blank")}}catch(f){d=window.open("https://plus.google.com/share?url="+encodeURI(a.link),"_blank")}null!=b&&b("googleplus")},350)},TwitterStatus:function(a,b){var c,d,e,f,g,h,i="https://twitter.com/intent/tweet";e=null==a.shortDescription?null==a.description?"Status update":a.description:a.shortDescription,f=null==a.socialHashTags?"":a.socialHashTags,g=null==a.viaId?"":a.viaId,h=null==a.link?"":a.link,d=116-f.length-g.length,e.length>d&&(e=e.substr(0,d)),c=i+"?text="+encodeURIComponent(e),h.length>0&&(c+="&url="+encodeURIComponent(h)),g.length>0&&(c+="&via="+encodeURIComponent(this.replaceChar(g,"@"))),f.length>0&&(c+="&hashtags="+encodeURIComponent(this.replaceChar(f,"#"))),window.open(c,"shareWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=300,height=250"),null!=b&&b("twitter")},ShareByEmail:function(a,b){var c;c=null!=a.referrer?a.referrer:"enginesis.com",this.enginesisSession.gameDataCreate(c,a.fromEmail,a.fromName,a.toEmail,"",a.message,"","","",!1,0,function(a){null!=a&&null!=a.fn&&"GameDataCreate"==a.fn,null!=b&&b("email")})},replaceChar:function(a,b){var c=a.indexOf(b);return c>0?a.substr(0,c)+a.substr(c+1):0==c?a.substr(1):a}};